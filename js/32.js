(self["webpackChunk_lace_browser_extension_wallet"]=self["webpackChunk_lace_browser_extension_wallet"]||[]).push([[32],{1139:(y,m,w)=>{"use strict";w.d(m,{generate:()=>generate,presetPrimaryColors:()=>M});var x=w(23997);var S=w(34633);var P=2;var E=.16;var T=.05;var C=.05;var O=.15;var A=5;var R=4;var I=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function toHsv(y){var m=y.r,w=y.g,S=y.b;var P=(0,x.py)(m,w,S);return{h:360*P.h,s:P.s,v:P.v}}function toHex(y){var m=y.r,w=y.g,S=y.b;return"#".concat((0,x.vq)(m,w,S,false))}function mix(y,m,w){var x=w/100;var S={r:(m.r-y.r)*x+y.r,g:(m.g-y.g)*x+y.g,b:(m.b-y.b)*x+y.b};return S}function getHue(y,m,w){var x;x=Math.round(y.h)>=60&&Math.round(y.h)<=240?w?Math.round(y.h)-P*m:Math.round(y.h)+P*m:w?Math.round(y.h)+P*m:Math.round(y.h)-P*m;if(x<0)x+=360;else if(x>=360)x-=360;return x}function getSaturation(y,m,w){if(0===y.h&&0===y.s)return y.s;var x;x=w?y.s-E*m:m===R?y.s+E:y.s+T*m;if(x>1)x=1;if(w&&m===A&&x>.1)x=.1;if(x<.06)x=.06;return Number(x.toFixed(2))}function getValue(y,m,w){var x;x=w?y.v+C*m:y.v-O*m;if(x>1)x=1;return Number(x.toFixed(2))}function generate(y){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var w=[];var x=(0,S.uA)(y);for(var P=A;P>0;P-=1){var E=toHsv(x);var T=toHex((0,S.uA)({h:getHue(E,P,true),s:getSaturation(E,P,true),v:getValue(E,P,true)}));w.push(T)}w.push(toHex(x));for(var C=1;C<=R;C+=1){var O=toHsv(x);var M=toHex((0,S.uA)({h:getHue(O,C),s:getSaturation(O,C),v:getValue(O,C)}));w.push(M)}if("dark"===m.theme)return I.map(function(y){var x=y.index,P=y.opacity;var E=toHex(mix((0,S.uA)(m.backgroundColor||"#141414"),(0,S.uA)(w[x]),100*P));return E});return w}var M={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"};var D={};var j={};Object.keys(M).forEach(function(y){D[y]=generate(M[y]);D[y].primary=D[y][5];j[y]=generate(M[y],{theme:"dark",backgroundColor:"#141414"});j[y].primary=j[y][5]});var $=D.red;var N=D.volcano;var q=D.gold;var V=D.orange;var et=D.yellow;var en=D.lime;var er=D.green;var ei=D.cyan;var eo=D.blue;var es=D.geekblue;var ea=D.purple;var ec=D.magenta;var eu=D.grey},23997:(y,m,w)=>{"use strict";w.d(m,{T6:()=>convertHexToDecimal,VD:()=>parseIntFromHex,WE:()=>hsvToRgb,Yt:()=>numberInputToObject,lC:()=>rgbToHsl,py:()=>rgbToHsv,rW:()=>rgbToRgb,s:()=>rgbaToHex,ve:()=>hslToRgb,vq:()=>rgbToHex});var x=w(44705);function rgbToRgb(y,m,w){return{r:255*(0,x.sh)(y,255),g:255*(0,x.sh)(m,255),b:255*(0,x.sh)(w,255)}}function rgbToHsl(y,m,w){y=(0,x.sh)(y,255);m=(0,x.sh)(m,255);w=(0,x.sh)(w,255);var S=Math.max(y,m,w);var P=Math.min(y,m,w);var E=0;var T=0;var C=(S+P)/2;if(S===P){T=0;E=0}else{var O=S-P;T=C>.5?O/(2-S-P):O/(S+P);switch(S){case y:E=(m-w)/O+(m<w?6:0);break;case m:E=(w-y)/O+2;break;case w:E=(y-m)/O+4;break;default:break}E/=6}return{h:E,s:T,l:C}}function hue2rgb(y,m,w){if(w<0)w+=1;if(w>1)w-=1;if(w<1/6)return y+(m-y)*(6*w);if(w<.5)return m;if(w<2/3)return y+(m-y)*(2/3-w)*6;return y}function hslToRgb(y,m,w){var S;var P;var E;y=(0,x.sh)(y,360);m=(0,x.sh)(m,100);w=(0,x.sh)(w,100);if(0===m){P=w;E=w;S=w}else{var T=w<.5?w*(1+m):w+m-w*m;var C=2*w-T;S=hue2rgb(C,T,y+1/3);P=hue2rgb(C,T,y);E=hue2rgb(C,T,y-1/3)}return{r:255*S,g:255*P,b:255*E}}function rgbToHsv(y,m,w){y=(0,x.sh)(y,255);m=(0,x.sh)(m,255);w=(0,x.sh)(w,255);var S=Math.max(y,m,w);var P=Math.min(y,m,w);var E=0;var T=S;var C=S-P;var O=0===S?0:C/S;if(S===P)E=0;else{switch(S){case y:E=(m-w)/C+(m<w?6:0);break;case m:E=(w-y)/C+2;break;case w:E=(y-m)/C+4;break;default:break}E/=6}return{h:E,s:O,v:T}}function hsvToRgb(y,m,w){y=6*(0,x.sh)(y,360);m=(0,x.sh)(m,100);w=(0,x.sh)(w,100);var S=Math.floor(y);var P=y-S;var E=w*(1-m);var T=w*(1-P*m);var C=w*(1-(1-P)*m);var O=S%6;var A=[w,T,E,E,C,w][O];var R=[C,w,w,T,E,E][O];var I=[E,E,C,w,w,T][O];return{r:255*A,g:255*R,b:255*I}}function rgbToHex(y,m,w,S){var P=[(0,x.FZ)(Math.round(y).toString(16)),(0,x.FZ)(Math.round(m).toString(16)),(0,x.FZ)(Math.round(w).toString(16))];if(S&&P[0].startsWith(P[0].charAt(1))&&P[1].startsWith(P[1].charAt(1))&&P[2].startsWith(P[2].charAt(1)))return P[0].charAt(0)+P[1].charAt(0)+P[2].charAt(0);return P.join("")}function rgbaToHex(y,m,w,S,P){var E=[(0,x.FZ)(Math.round(y).toString(16)),(0,x.FZ)(Math.round(m).toString(16)),(0,x.FZ)(Math.round(w).toString(16)),(0,x.FZ)(convertDecimalToHex(S))];if(P&&E[0].startsWith(E[0].charAt(1))&&E[1].startsWith(E[1].charAt(1))&&E[2].startsWith(E[2].charAt(1))&&E[3].startsWith(E[3].charAt(1)))return E[0].charAt(0)+E[1].charAt(0)+E[2].charAt(0)+E[3].charAt(0);return E.join("")}function convertDecimalToHex(y){return Math.round(255*parseFloat(y)).toString(16)}function convertHexToDecimal(y){return parseIntFromHex(y)/255}function parseIntFromHex(y){return parseInt(y,16)}function numberInputToObject(y){return{r:y>>16,g:(65280&y)>>8,b:255&y}}},34633:(y,m,w)=>{"use strict";w.d(m,{uA:()=>inputToRGB});var x=w(23997);var S=w(8182);var P=w(44705);function inputToRGB(y){var m={r:0,g:0,b:0};var w=1;var S=null;var E=null;var T=null;var C=false;var O=false;if("string"==typeof y)y=stringInputToObject(y);if("object"==typeof y){if(isValidCSSUnit(y.r)&&isValidCSSUnit(y.g)&&isValidCSSUnit(y.b)){m=(0,x.rW)(y.r,y.g,y.b);C=true;O="%"===String(y.r).substr(-1)?"prgb":"rgb"}else if(isValidCSSUnit(y.h)&&isValidCSSUnit(y.s)&&isValidCSSUnit(y.v)){S=(0,P.JX)(y.s);E=(0,P.JX)(y.v);m=(0,x.WE)(y.h,S,E);C=true;O="hsv"}else if(isValidCSSUnit(y.h)&&isValidCSSUnit(y.s)&&isValidCSSUnit(y.l)){S=(0,P.JX)(y.s);T=(0,P.JX)(y.l);m=(0,x.ve)(y.h,S,T);C=true;O="hsl"}if(Object.prototype.hasOwnProperty.call(y,"a"))w=y.a}w=(0,P.Yq)(w);return{ok:C,format:y.format||O,r:Math.min(255,Math.max(m.r,0)),g:Math.min(255,Math.max(m.g,0)),b:Math.min(255,Math.max(m.b,0)),a:w}}var E="[-\\+]?\\d+%?";var T="[-\\+]?\\d*\\.\\d+%?";var C="(?:"+T+")|(?:"+E+")";var O="[\\s|\\(]+("+C+")[,|\\s]+("+C+")[,|\\s]+("+C+")\\s*\\)?";var A="[\\s|\\(]+("+C+")[,|\\s]+("+C+")[,|\\s]+("+C+")[,|\\s]+("+C+")\\s*\\)?";var R={CSS_UNIT:new RegExp(C),rgb:new RegExp("rgb"+O),rgba:new RegExp("rgba"+A),hsl:new RegExp("hsl"+O),hsla:new RegExp("hsla"+A),hsv:new RegExp("hsv"+O),hsva:new RegExp("hsva"+A),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(y){y=y.trim().toLowerCase();if(0===y.length)return false;var m=false;if(S.R[y]){y=S.R[y];m=true}else if("transparent"===y)return{r:0,g:0,b:0,a:0,format:"name"};var w=R.rgb.exec(y);if(w)return{r:w[1],g:w[2],b:w[3]};w=R.rgba.exec(y);if(w)return{r:w[1],g:w[2],b:w[3],a:w[4]};w=R.hsl.exec(y);if(w)return{h:w[1],s:w[2],l:w[3]};w=R.hsla.exec(y);if(w)return{h:w[1],s:w[2],l:w[3],a:w[4]};w=R.hsv.exec(y);if(w)return{h:w[1],s:w[2],v:w[3]};w=R.hsva.exec(y);if(w)return{h:w[1],s:w[2],v:w[3],a:w[4]};w=R.hex8.exec(y);if(w)return{r:(0,x.VD)(w[1]),g:(0,x.VD)(w[2]),b:(0,x.VD)(w[3]),a:(0,x.T6)(w[4]),format:m?"name":"hex8"};w=R.hex6.exec(y);if(w)return{r:(0,x.VD)(w[1]),g:(0,x.VD)(w[2]),b:(0,x.VD)(w[3]),format:m?"name":"hex"};w=R.hex4.exec(y);if(w)return{r:(0,x.VD)(w[1]+w[1]),g:(0,x.VD)(w[2]+w[2]),b:(0,x.VD)(w[3]+w[3]),a:(0,x.T6)(w[4]+w[4]),format:m?"name":"hex8"};w=R.hex3.exec(y);if(w)return{r:(0,x.VD)(w[1]+w[1]),g:(0,x.VD)(w[2]+w[2]),b:(0,x.VD)(w[3]+w[3]),format:m?"name":"hex"};return false}function isValidCSSUnit(y){return Boolean(R.CSS_UNIT.exec(String(y)))}},3957:(y,m,w)=>{"use strict";w.d(m,{C:()=>T});var x=w(23997);var S=w(8182);var P=w(34633);var E=w(44705);var T=function(){function TinyColor(y,m){if(void 0===y)y="";if(void 0===m)m={};var w;if(y instanceof TinyColor)return y;if("number"==typeof y)y=(0,x.Yt)(y);this.originalInput=y;var S=(0,P.uA)(y);this.originalInput=y;this.r=S.r;this.g=S.g;this.b=S.b;this.a=S.a;this.roundA=Math.round(100*this.a)/100;this.format=null!==(w=m.format)&&void 0!==w?w:S.format;this.gradientType=m.gradientType;if(this.r<1)this.r=Math.round(this.r);if(this.g<1)this.g=Math.round(this.g);if(this.b<1)this.b=Math.round(this.b);this.isValid=S.ok}TinyColor.prototype.isDark=function(){return this.getBrightness()<128};TinyColor.prototype.isLight=function(){return!this.isDark()};TinyColor.prototype.getBrightness=function(){var y=this.toRgb();return(299*y.r+587*y.g+114*y.b)/1e3};TinyColor.prototype.getLuminance=function(){var y=this.toRgb();var m;var w;var x;var S=y.r/255;var P=y.g/255;var E=y.b/255;m=S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4);w=P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4);x=E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4);return .2126*m+.7152*w+.0722*x};TinyColor.prototype.getAlpha=function(){return this.a};TinyColor.prototype.setAlpha=function(y){this.a=(0,E.Yq)(y);this.roundA=Math.round(100*this.a)/100;return this};TinyColor.prototype.toHsv=function(){var y=(0,x.py)(this.r,this.g,this.b);return{h:360*y.h,s:y.s,v:y.v,a:this.a}};TinyColor.prototype.toHsvString=function(){var y=(0,x.py)(this.r,this.g,this.b);var m=Math.round(360*y.h);var w=Math.round(100*y.s);var S=Math.round(100*y.v);return 1===this.a?"hsv("+m+", "+w+"%, "+S+"%)":"hsva("+m+", "+w+"%, "+S+"%, "+this.roundA+")"};TinyColor.prototype.toHsl=function(){var y=(0,x.lC)(this.r,this.g,this.b);return{h:360*y.h,s:y.s,l:y.l,a:this.a}};TinyColor.prototype.toHslString=function(){var y=(0,x.lC)(this.r,this.g,this.b);var m=Math.round(360*y.h);var w=Math.round(100*y.s);var S=Math.round(100*y.l);return 1===this.a?"hsl("+m+", "+w+"%, "+S+"%)":"hsla("+m+", "+w+"%, "+S+"%, "+this.roundA+")"};TinyColor.prototype.toHex=function(y){if(void 0===y)y=false;return(0,x.vq)(this.r,this.g,this.b,y)};TinyColor.prototype.toHexString=function(y){if(void 0===y)y=false;return"#"+this.toHex(y)};TinyColor.prototype.toHex8=function(y){if(void 0===y)y=false;return(0,x.s)(this.r,this.g,this.b,this.a,y)};TinyColor.prototype.toHex8String=function(y){if(void 0===y)y=false;return"#"+this.toHex8(y)};TinyColor.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}};TinyColor.prototype.toRgbString=function(){var y=Math.round(this.r);var m=Math.round(this.g);var w=Math.round(this.b);return 1===this.a?"rgb("+y+", "+m+", "+w+")":"rgba("+y+", "+m+", "+w+", "+this.roundA+")"};TinyColor.prototype.toPercentageRgb=function(){var fmt=function(y){return Math.round(100*(0,E.sh)(y,255))+"%"};return{r:fmt(this.r),g:fmt(this.g),b:fmt(this.b),a:this.a}};TinyColor.prototype.toPercentageRgbString=function(){var rnd=function(y){return Math.round(100*(0,E.sh)(y,255))};return 1===this.a?"rgb("+rnd(this.r)+"%, "+rnd(this.g)+"%, "+rnd(this.b)+"%)":"rgba("+rnd(this.r)+"%, "+rnd(this.g)+"%, "+rnd(this.b)+"%, "+this.roundA+")"};TinyColor.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return false;var y="#"+(0,x.vq)(this.r,this.g,this.b,false);for(var m=0,w=Object.entries(S.R);m<w.length;m++){var P=w[m],E=P[0],T=P[1];if(y===T)return E}return false};TinyColor.prototype.toString=function(y){var m=Boolean(y);y=null!=y?y:this.format;var w=false;var x=this.a<1&&this.a>=0;var S=!m&&x&&(y.startsWith("hex")||"name"===y);if(S){if("name"===y&&0===this.a)return this.toName();return this.toRgbString()}if("rgb"===y)w=this.toRgbString();if("prgb"===y)w=this.toPercentageRgbString();if("hex"===y||"hex6"===y)w=this.toHexString();if("hex3"===y)w=this.toHexString(true);if("hex4"===y)w=this.toHex8String(true);if("hex8"===y)w=this.toHex8String();if("name"===y)w=this.toName();if("hsl"===y)w=this.toHslString();if("hsv"===y)w=this.toHsvString();return w||this.toHexString()};TinyColor.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)};TinyColor.prototype.clone=function(){return new TinyColor(this.toString())};TinyColor.prototype.lighten=function(y){if(void 0===y)y=10;var m=this.toHsl();m.l+=y/100;m.l=(0,E.V2)(m.l);return new TinyColor(m)};TinyColor.prototype.brighten=function(y){if(void 0===y)y=10;var m=this.toRgb();m.r=Math.max(0,Math.min(255,m.r-Math.round(255*-(y/100))));m.g=Math.max(0,Math.min(255,m.g-Math.round(255*-(y/100))));m.b=Math.max(0,Math.min(255,m.b-Math.round(255*-(y/100))));return new TinyColor(m)};TinyColor.prototype.darken=function(y){if(void 0===y)y=10;var m=this.toHsl();m.l-=y/100;m.l=(0,E.V2)(m.l);return new TinyColor(m)};TinyColor.prototype.tint=function(y){if(void 0===y)y=10;return this.mix("white",y)};TinyColor.prototype.shade=function(y){if(void 0===y)y=10;return this.mix("black",y)};TinyColor.prototype.desaturate=function(y){if(void 0===y)y=10;var m=this.toHsl();m.s-=y/100;m.s=(0,E.V2)(m.s);return new TinyColor(m)};TinyColor.prototype.saturate=function(y){if(void 0===y)y=10;var m=this.toHsl();m.s+=y/100;m.s=(0,E.V2)(m.s);return new TinyColor(m)};TinyColor.prototype.greyscale=function(){return this.desaturate(100)};TinyColor.prototype.spin=function(y){var m=this.toHsl();var w=(m.h+y)%360;m.h=w<0?360+w:w;return new TinyColor(m)};TinyColor.prototype.mix=function(y,m){if(void 0===m)m=50;var w=this.toRgb();var x=new TinyColor(y).toRgb();var S=m/100;var P={r:(x.r-w.r)*S+w.r,g:(x.g-w.g)*S+w.g,b:(x.b-w.b)*S+w.b,a:(x.a-w.a)*S+w.a};return new TinyColor(P)};TinyColor.prototype.analogous=function(y,m){if(void 0===y)y=6;if(void 0===m)m=30;var w=this.toHsl();var x=360/m;var S=[this];for(w.h=(w.h-(x*y>>1)+720)%360;--y;){w.h=(w.h+x)%360;S.push(new TinyColor(w))}return S};TinyColor.prototype.complement=function(){var y=this.toHsl();y.h=(y.h+180)%360;return new TinyColor(y)};TinyColor.prototype.monochromatic=function(y){if(void 0===y)y=6;var m=this.toHsv();var w=m.h;var x=m.s;var S=m.v;var P=[];var E=1/y;while(y--){P.push(new TinyColor({h:w,s:x,v:S}));S=(S+E)%1}return P};TinyColor.prototype.splitcomplement=function(){var y=this.toHsl();var m=y.h;return[this,new TinyColor({h:(m+72)%360,s:y.s,l:y.l}),new TinyColor({h:(m+216)%360,s:y.s,l:y.l})]};TinyColor.prototype.onBackground=function(y){var m=this.toRgb();var w=new TinyColor(y).toRgb();return new TinyColor({r:w.r+(m.r-w.r)*m.a,g:w.g+(m.g-w.g)*m.a,b:w.b+(m.b-w.b)*m.a})};TinyColor.prototype.triad=function(){return this.polyad(3)};TinyColor.prototype.tetrad=function(){return this.polyad(4)};TinyColor.prototype.polyad=function(y){var m=this.toHsl();var w=m.h;var x=[this];var S=360/y;for(var P=1;P<y;P++)x.push(new TinyColor({h:(w+P*S)%360,s:m.s,l:m.l}));return x};TinyColor.prototype.equals=function(y){return this.toRgbString()===new TinyColor(y).toRgbString()};return TinyColor}()},50235:(y,m,w)=>{"use strict";w.d(m,{_:()=>P});var x=w(2784);var S=null;var P=x.createContext({})},75356:(y,m,w)=>{"use strict";w.d(m,{CSSMotionList:()=>S.Z,default:()=>E});var x=w(27594);var S=w(98188);var P=w(50235);const E=x.Z},15646:(y,m,w)=>{"use strict";w.d(m,{Z:()=>E});var x=w(82609);var S=w.n(x);var P=S()(function(y){return y[1]});P.push([y.id,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n',""]);const E=P},33207:function(y,m,w){(function(y,x){x(m,w(59590),w(2784))})(0,function(y,m,w){"use strict";function _interopDefaultLegacy(y){return y&&"object"==typeof y&&"default"in y?y:{default:y}}var x=_interopDefaultLegacy(w);/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */ var __assign=function(){__assign=Object.assign||function(y){for(var m,w=1,x=arguments.length;w<x;w++){m=arguments[w];for(var S in m)if(Object.prototype.hasOwnProperty.call(m,S))y[S]=m[S]}return y};return __assign.apply(this,arguments)};var S=x["default"].useDebugValue,P=x["default"].useEffect,E=x["default"].useState;function useSubscription(y){var m=y.getCurrentValue,w=y.subscribe;var x=E(function(){return{getCurrentValue:m,subscribe:w,value:m(),error:null}}),T=x[0],C=x[1];if(T.error)throw T.error;var O=T.value;if(T.getCurrentValue!==m||T.subscribe!==w){O=m();C({getCurrentValue:m,subscribe:w,value:O,error:null})}S(O);P(function(){var y=false;var checkForUpdates=function(){if(y)return;var x=m();C(function(y){if(y.getCurrentValue!==m||y.subscribe!==w)return y;if(y.value===x)return y;return __assign(__assign({},y),{value:x})})};var x=w(checkForUpdates,function(y){return C(function(m){return __assign(__assign({},m),{error:y})})});checkForUpdates();return function(){y=true;x()}},[m,w]);return O}function useLiveQuery(y,w,S){var P=x["default"].useState(S),E=P[0],T=P[1];var C=x["default"].useMemo(function(){var w=E;var x=m.liveQuery(y);return{getCurrentValue:function(){return w},subscribe:function(y,m){var S=x.subscribe(function(m){w=m;T(m);y(m)},m);return S.unsubscribe.bind(S)}}},w||[]);var O=useSubscription(C);return O}y.useLiveQuery=useLiveQuery;Object.defineProperty(y,"__esModule",{value:true})})},17547:(y,m,w)=>{"use strict";w.d(m,{Ep:()=>createPath,Hp:()=>locationsAreEqual,PP:()=>createMemoryHistory,lX:()=>createBrowserHistory,ob:()=>createLocation,q_:()=>createHashHistory});var x=w(7896);var S=w(57613);var P=w(60838);var E=w(61898);function addLeadingSlash(y){return"/"===y.charAt(0)?y:"/"+y}function stripLeadingSlash(y){return"/"===y.charAt(0)?y.substr(1):y}function hasBasename(y,m){return 0===y.toLowerCase().indexOf(m.toLowerCase())&&-1!=="/?#".indexOf(y.charAt(m.length))}function stripBasename(y,m){return hasBasename(y,m)?y.substr(m.length):y}function stripTrailingSlash(y){return"/"===y.charAt(y.length-1)?y.slice(0,-1):y}function parsePath(y){var m=y||"/";var w="";var x="";var S=m.indexOf("#");if(-1!==S){x=m.substr(S);m=m.substr(0,S)}var P=m.indexOf("?");if(-1!==P){w=m.substr(P);m=m.substr(0,P)}return{pathname:m,search:"?"===w?"":w,hash:"#"===x?"":x}}function createPath(y){var m=y.pathname,w=y.search,x=y.hash;var S=m||"/";if(w&&"?"!==w)S+="?"===w.charAt(0)?w:"?"+w;if(x&&"#"!==x)S+="#"===x.charAt(0)?x:"#"+x;return S}function createLocation(y,m,w,P){var E;if("string"==typeof y){E=parsePath(y);E.state=m}else{E=(0,x.Z)({},y);if(void 0===E.pathname)E.pathname="";if(E.search){if("?"!==E.search.charAt(0))E.search="?"+E.search}else E.search="";if(E.hash){if("#"!==E.hash.charAt(0))E.hash="#"+E.hash}else E.hash="";if(void 0!==m&&void 0===E.state)E.state=m}try{E.pathname=decodeURI(E.pathname)}catch(T){if(T instanceof URIError)throw new URIError('Pathname "'+E.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.');throw T}if(w)E.key=w;if(P)if(E.pathname){if("/"!==E.pathname.charAt(0))E.pathname=(0,S.Z)(E.pathname,P.pathname)}else E.pathname=P.pathname;else if(!E.pathname)E.pathname="/";return E}function locationsAreEqual(y,m){return y.pathname===m.pathname&&y.search===m.search&&y.hash===m.hash&&y.key===m.key&&(0,P.Z)(y.state,m.state)}function createTransitionManager(){var y=null;function setPrompt(m){y=m;return function(){if(y===m)y=null}}function confirmTransitionTo(m,w,x,S){if(null!=y){var P="function"==typeof y?y(m,w):y;if("string"==typeof P)if("function"==typeof x)x(P,S);else S(true);else S(false!==P)}else S(true)}var m=[];function appendListener(y){var w=true;function listener(){if(w)y.apply(void 0,arguments)}m.push(listener);return function(){w=false;m=m.filter(function(y){return y!==listener})}}function notifyListeners(){for(var y=arguments.length,w=new Array(y),x=0;x<y;x++)w[x]=arguments[x];m.forEach(function(y){return y.apply(void 0,w)})}return{setPrompt:setPrompt,confirmTransitionTo:confirmTransitionTo,appendListener:appendListener,notifyListeners:notifyListeners}}var T=!!("undefined"!=typeof window&&window.document&&window.document.createElement);function getConfirmation(y,m){m(window.confirm(y))}function supportsHistory(){var y=window.navigator.userAgent;if((-1!==y.indexOf("Android 2.")||-1!==y.indexOf("Android 4.0"))&&-1!==y.indexOf("Mobile Safari")&&-1===y.indexOf("Chrome")&&-1===y.indexOf("Windows Phone"))return false;return window.history&&"pushState"in window.history}function supportsPopStateOnHashChange(){return -1===window.navigator.userAgent.indexOf("Trident")}function supportsGoWithoutReloadUsingHash(){return -1===window.navigator.userAgent.indexOf("Firefox")}function isExtraneousPopstateEvent(y){return void 0===y.state&&-1===navigator.userAgent.indexOf("CriOS")}var C="popstate";var O="hashchange";function getHistoryState(){try{return window.history.state||{}}catch(y){return{}}}function createBrowserHistory(y){if(void 0===y)y={};T||(0,E.Z)(false);var m=window.history;var w=supportsHistory();var S=!supportsPopStateOnHashChange();var P=y,A=P.forceRefresh,R=void 0!==A&&A,I=P.getUserConfirmation,M=void 0===I?getConfirmation:I,D=P.keyLength,j=void 0===D?6:D;var $=y.basename?stripTrailingSlash(addLeadingSlash(y.basename)):"";function getDOMLocation(y){var m=y||{},w=m.key,x=m.state;var S=window.location,P=S.pathname,E=S.search,T=S.hash;var C=P+E+T;if($)C=stripBasename(C,$);return createLocation(C,x,w)}function createKey(){return Math.random().toString(36).substr(2,j)}var N=createTransitionManager();function setState(y){(0,x.Z)(ei,y);ei.length=m.length;N.notifyListeners(ei.location,ei.action)}function handlePopState(y){if(isExtraneousPopstateEvent(y))return;handlePop(getDOMLocation(y.state))}function handleHashChange(){handlePop(getDOMLocation(getHistoryState()))}var q=false;function handlePop(y){if(q){q=false;setState()}else{var m="POP";N.confirmTransitionTo(y,m,M,function(w){if(w)setState({action:m,location:y});else revertPop(y)})}}function revertPop(y){var m=ei.location;var w=et.indexOf(m.key);if(-1===w)w=0;var x=et.indexOf(y.key);if(-1===x)x=0;var S=w-x;if(S){q=true;go(S)}}var V=getDOMLocation(getHistoryState());var et=[V.key];function createHref(y){return $+createPath(y)}function push(y,x){var S="PUSH";var P=createLocation(y,x,createKey(),ei.location);N.confirmTransitionTo(P,S,M,function(y){if(!y)return;var x=createHref(P);var E=P.key,T=P.state;if(w){m.pushState({key:E,state:T},null,x);if(R)window.location.href=x;else{var C=et.indexOf(ei.location.key);var O=et.slice(0,C+1);O.push(P.key);et=O;setState({action:S,location:P})}}else window.location.href=x})}function replace(y,x){var S="REPLACE";var P=createLocation(y,x,createKey(),ei.location);N.confirmTransitionTo(P,S,M,function(y){if(!y)return;var x=createHref(P);var E=P.key,T=P.state;if(w){m.replaceState({key:E,state:T},null,x);if(R)window.location.replace(x);else{var C=et.indexOf(ei.location.key);if(-1!==C)et[C]=P.key;setState({action:S,location:P})}}else window.location.replace(x)})}function go(y){m.go(y)}function goBack(){go(-1)}function goForward(){go(1)}var en=0;function checkDOMListeners(y){en+=y;if(1===en&&1===y){window.addEventListener(C,handlePopState);if(S)window.addEventListener(O,handleHashChange)}else if(0===en){window.removeEventListener(C,handlePopState);if(S)window.removeEventListener(O,handleHashChange)}}var er=false;function block(y){if(void 0===y)y=false;var m=N.setPrompt(y);if(!er){checkDOMListeners(1);er=true}return function(){if(er){er=false;checkDOMListeners(-1)}return m()}}function listen(y){var m=N.appendListener(y);checkDOMListeners(1);return function(){checkDOMListeners(-1);m()}}var ei={length:m.length,action:"POP",location:V,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,block:block,listen:listen};return ei}var A="hashchange";var R={hashbang:{encodePath:function(y){return"!"===y.charAt(0)?y:"!/"+stripLeadingSlash(y)},decodePath:function(y){return"!"===y.charAt(0)?y.substr(1):y}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function stripHash(y){var m=y.indexOf("#");return -1===m?y:y.slice(0,m)}function getHashPath(){var y=window.location.href;var m=y.indexOf("#");return -1===m?"":y.substring(m+1)}function pushHashPath(y){window.location.hash=y}function replaceHashPath(y){window.location.replace(stripHash(window.location.href)+"#"+y)}function createHashHistory(y){if(void 0===y)y={};T||(0,E.Z)(false);var m=window.history;supportsGoWithoutReloadUsingHash();var w=y,S=w.getUserConfirmation,P=void 0===S?getConfirmation:S,C=w.hashType,O=void 0===C?"slash":C;var I=y.basename?stripTrailingSlash(addLeadingSlash(y.basename)):"";var M=R[O],D=M.encodePath,j=M.decodePath;function getDOMLocation(){var y=j(getHashPath());if(I)y=stripBasename(y,I);return createLocation(y)}var $=createTransitionManager();function setState(y){(0,x.Z)(es,y);es.length=m.length;$.notifyListeners(es.location,es.action)}var N=false;var q=null;function locationsAreEqual$$1(y,m){return y.pathname===m.pathname&&y.search===m.search&&y.hash===m.hash}function handleHashChange(){var y=getHashPath();var m=D(y);if(y!==m)replaceHashPath(m);else{var w=getDOMLocation();var x=es.location;if(!N&&locationsAreEqual$$1(x,w))return;if(q===createPath(w))return;q=null;handlePop(w)}}function handlePop(y){if(N){N=false;setState()}else{var m="POP";$.confirmTransitionTo(y,m,P,function(w){if(w)setState({action:m,location:y});else revertPop(y)})}}function revertPop(y){var m=es.location;var w=er.lastIndexOf(createPath(m));if(-1===w)w=0;var x=er.lastIndexOf(createPath(y));if(-1===x)x=0;var S=w-x;if(S){N=true;go(S)}}var V=getHashPath();var et=D(V);if(V!==et)replaceHashPath(et);var en=getDOMLocation();var er=[createPath(en)];function createHref(y){var m=document.querySelector("base");var w="";if(m&&m.getAttribute("href"))w=stripHash(window.location.href);return w+"#"+D(I+createPath(y))}function push(y,m){var w="PUSH";var x=createLocation(y,void 0,void 0,es.location);$.confirmTransitionTo(x,w,P,function(y){if(!y)return;var m=createPath(x);var S=D(I+m);var P=getHashPath()!==S;if(P){q=m;pushHashPath(S);var E=er.lastIndexOf(createPath(es.location));var T=er.slice(0,E+1);T.push(m);er=T;setState({action:w,location:x})}else setState()})}function replace(y,m){var w="REPLACE";var x=createLocation(y,void 0,void 0,es.location);$.confirmTransitionTo(x,w,P,function(y){if(!y)return;var m=createPath(x);var S=D(I+m);var P=getHashPath()!==S;if(P){q=m;replaceHashPath(S)}var E=er.indexOf(createPath(es.location));if(-1!==E)er[E]=m;setState({action:w,location:x})})}function go(y){m.go(y)}function goBack(){go(-1)}function goForward(){go(1)}var ei=0;function checkDOMListeners(y){ei+=y;if(1===ei&&1===y)window.addEventListener(A,handleHashChange);else if(0===ei)window.removeEventListener(A,handleHashChange)}var eo=false;function block(y){if(void 0===y)y=false;var m=$.setPrompt(y);if(!eo){checkDOMListeners(1);eo=true}return function(){if(eo){eo=false;checkDOMListeners(-1)}return m()}}function listen(y){var m=$.appendListener(y);checkDOMListeners(1);return function(){checkDOMListeners(-1);m()}}var es={length:m.length,action:"POP",location:en,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,block:block,listen:listen};return es}function clamp(y,m,w){return Math.min(Math.max(y,m),w)}function createMemoryHistory(y){if(void 0===y)y={};var m=y,w=m.getUserConfirmation,S=m.initialEntries,P=void 0===S?["/"]:S,E=m.initialIndex,T=void 0===E?0:E,C=m.keyLength,O=void 0===C?6:C;var A=createTransitionManager();function setState(y){(0,x.Z)(D,y);D.length=D.entries.length;A.notifyListeners(D.location,D.action)}function createKey(){return Math.random().toString(36).substr(2,O)}var R=clamp(T,0,P.length-1);var I=P.map(function(y){return"string"==typeof y?createLocation(y,void 0,createKey()):createLocation(y,void 0,y.key||createKey())});var M=createPath;function push(y,m){var x="PUSH";var S=createLocation(y,m,createKey(),D.location);A.confirmTransitionTo(S,x,w,function(y){if(!y)return;var m=D.index;var w=m+1;var P=D.entries.slice(0);if(P.length>w)P.splice(w,P.length-w,S);else P.push(S);setState({action:x,location:S,index:w,entries:P})})}function replace(y,m){var x="REPLACE";var S=createLocation(y,m,createKey(),D.location);A.confirmTransitionTo(S,x,w,function(y){if(!y)return;D.entries[D.index]=S;setState({action:x,location:S})})}function go(y){var m=clamp(D.index+y,0,D.entries.length-1);var x="POP";var S=D.entries[m];A.confirmTransitionTo(S,x,w,function(y){y?setState({action:x,location:S,index:m}):setState()})}function goBack(){go(-1)}function goForward(){go(1)}function canGo(y){var m=D.index+y;return m>=0&&m<D.entries.length}function block(y){if(void 0===y)y=false;return A.setPrompt(y)}function listen(y){return A.appendListener(y)}var D={length:I.length,action:"POP",location:I[R],index:R,entries:I,createHref:M,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,canGo:canGo,block:block,listen:listen};return D}},74930:(y,m,w)=>{var x=w(66188);var S=0;function uniqueId(y){var m=++S;return x(y)+m}y.exports=uniqueId},13982:(y,m,w)=>{"use strict";var x=w(48834)["Buffer"];/**
 * A Node.js wrapper for the Matomo (http://matomo.org) tracking HTTP API
 * https://github.com/matomo-org/matomo-nodejs-tracker
 *
 * @author  Frederic Hemberger, Matomo Team
 * @license MIT
 */ const S=w(71696);const P=w(22699);const E=w(43335);const T=w(56642);const C=w(883);function MatomoTracker(y,m,x){if(!(this instanceof MatomoTracker))return new MatomoTracker(y,m,x);P.EventEmitter.call(this);S.ok(y&&("number"==typeof y||"string"==typeof y),"Matomo siteId required.");S.ok(m&&"string"==typeof m,"Matomo tracker URL required, e.g. http://example.com/matomo.php");if(!x)S.ok(m.endsWith("matomo.php")||m.endsWith("piwik.php"),'A tracker URL must end with "matomo.php" or "piwik.php"');this.siteId=y;this.trackerUrl=m;this.agent=w(m.startsWith("https")?62621:23439)}E.inherits(MatomoTracker,P.EventEmitter);MatomoTracker.prototype.track=function(y){var m=this.listeners("error").length;if("string"==typeof y)y={url:y};y=y||{};y.idsite=this.siteId;y.rec=1;S.ok(y.url,"URL to be tracked must be specified.");var w=this.trackerUrl+"?"+T.stringify(y);var x=this;var P=this.agent.get(w,function(y){if(!/^(20[04]|30[12478])$/.test(y.statusCode)){if(m)x.emit("error",y.statusCode)}});P.on("error",function(y){m&&x.emit("error",y.message)});P.end()};MatomoTracker.prototype.trackBulk=function(y,m){var w=this.listeners("error").length;S.ok(y&&y.length>0,"Events require at least one.");S.ok(void 0!==this.siteId&&null!==this.siteId,"siteId must be specified.");var P=JSON.stringify({requests:y.map(y=>{y.idsite=this.siteId;y.rec=1;return"?"+T.stringify(y)})});var E=C.parse(this.trackerUrl);const O={protocol:E.protocol,hostname:E.hostname,port:E.port,path:E.path,method:"POST",headers:{"Content-Type":"application/json","Content-Length":x.byteLength(P)}};const A=this.agent.request(O,y=>{if(!/^(20[04]|30[12478])$/.test(y.statusCode)){if(w)this.emit("error",y.statusCode)}let S=[];y.on("data",y=>{S.push(y)});y.on("end",()=>{S=x.concat(S).toString();"function"==typeof m&&m(S)})});A.on("error",y=>{w&&this.emit("error",y.message)});A.write(P);A.end()};y.exports=MatomoTracker},33426:(y,m,w)=>{y.exports=w(34831)},34831:(y,m,w)=>{var x=w(78169);m.operation=function(y){var w=m.timeouts(y);return new x(w,{forever:y&&(y.forever||y.retries===1/0),unref:y&&y.unref,maxRetryTime:y&&y.maxRetryTime})};m.timeouts=function(y){if(y instanceof Array)return[].concat(y);var m={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:false};for(var w in y)m[w]=y[w];if(m.minTimeout>m.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");var x=[];for(var S=0;S<m.retries;S++)x.push(this.createTimeout(S,m));if(y&&y.forever&&!x.length)x.push(this.createTimeout(S,m));x.sort(function(y,m){return y-m});return x};m.createTimeout=function(y,m){var w=m.randomize?Math.random()+1:1;var x=Math.round(w*Math.max(m.minTimeout,1)*Math.pow(m.factor,y));x=Math.min(x,m.maxTimeout);return x};m.wrap=function(y,w,x){if(w instanceof Array){x=w;w=null}if(!x){x=[];for(var S in y)if("function"==typeof y[S])x.push(S)}for(var P=0;P<x.length;P++){var E=x[P];var T=y[E];y[E]=(function(x){var S=m.operation(w);var P=Array.prototype.slice.call(arguments,1);var E=P.pop();P.push(function(y){if(S.retry(y))return;if(y)arguments[0]=S.mainError();E.apply(this,arguments)});S.attempt(function(){x.apply(y,P)})}).bind(y,T);y[E].options=w}}},78169:y=>{function RetryOperation(y,m){if("boolean"==typeof m)m={forever:m};this._originalTimeouts=JSON.parse(JSON.stringify(y));this._timeouts=y;this._options=m||{};this._maxRetryTime=m&&m.maxRetryTime||1/0;this._fn=null;this._errors=[];this._attempts=1;this._operationTimeout=null;this._operationTimeoutCb=null;this._timeout=null;this._operationStart=null;this._timer=null;if(this._options.forever)this._cachedTimeouts=this._timeouts.slice(0)}y.exports=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1;this._timeouts=this._originalTimeouts.slice(0)};RetryOperation.prototype.stop=function(){if(this._timeout)clearTimeout(this._timeout);if(this._timer)clearTimeout(this._timer);this._timeouts=[];this._cachedTimeouts=null};RetryOperation.prototype.retry=function(y){if(this._timeout)clearTimeout(this._timeout);if(!y)return false;var m=new Date().getTime();if(y&&m-this._operationStart>=this._maxRetryTime){this._errors.push(y);this._errors.unshift(new Error("RetryOperation timeout occurred"));return false}this._errors.push(y);var w=this._timeouts.shift();if(void 0===w){if(!this._cachedTimeouts)return false;this._errors.splice(0,this._errors.length-1);w=this._cachedTimeouts.slice(-1)}var x=this;this._timer=setTimeout(function(){x._attempts++;if(x._operationTimeoutCb){x._timeout=setTimeout(function(){x._operationTimeoutCb(x._attempts)},x._operationTimeout);if(x._options.unref)x._timeout.unref()}x._fn(x._attempts)},w);if(this._options.unref)this._timer.unref();return true};RetryOperation.prototype.attempt=function(y,m){this._fn=y;if(m){if(m.timeout)this._operationTimeout=m.timeout;if(m.cb)this._operationTimeoutCb=m.cb}var w=this;if(this._operationTimeoutCb)this._timeout=setTimeout(function(){w._operationTimeoutCb()},w._operationTimeout);this._operationStart=new Date().getTime();this._fn(this._attempts)};RetryOperation.prototype.try=function(y){console.log("Using RetryOperation.try() is deprecated");this.attempt(y)};RetryOperation.prototype.start=function(y){console.log("Using RetryOperation.start() is deprecated");this.attempt(y)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(0===this._errors.length)return null;var y={};var m=null;var w=0;for(var x=0;x<this._errors.length;x++){var S=this._errors[x];var P=S.message;var E=(y[P]||0)+1;y[P]=E;if(E>=w){m=S;w=E}}return m}},96615:(y,m,w)=>{"use strict";w.d(m,{ZP:()=>t6});function e(y,m){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);m&&(x=x.filter(function(m){return Object.getOwnPropertyDescriptor(y,m).enumerable})),w.push.apply(w,x)}return w}function t(y){for(var m=1;m<arguments.length;m++){var w=null!=arguments[m]?arguments[m]:{};m%2?e(Object(w),!0).forEach(function(m){s(y,m,w[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):e(Object(w)).forEach(function(m){Object.defineProperty(y,m,Object.getOwnPropertyDescriptor(w,m))})}return y}function n(y){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},n(y)}function r(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}function i(y,m){for(var w=0;w<m.length;w++){var x=m[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}function o(y,m,w){return m&&i(y.prototype,m),w&&i(y,w),Object.defineProperty(y,"prototype",{writable:!1}),y}function s(y,m,w){return m in y?Object.defineProperty(y,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[m]=w,y}function a(y,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),m&&u(y,m)}function c(y){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},c(y)}function u(y,m){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,m){return y.__proto__=m,y},u(y,m)}function l(y,m){if(null==y)return{};var w,x,S=function(y,m){if(null==y)return{};var w,x,S={},P=Object.keys(y);for(x=0;x<P.length;x++)w=P[x],m.indexOf(w)>=0||(S[w]=y[w]);return S}(y,m);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(y);for(x=0;x<P.length;x++)w=P[x],m.indexOf(w)>=0||Object.prototype.propertyIsEnumerable.call(y,w)&&(S[w]=y[w])}return S}function d(y,m){if(m&&("object"==typeof m||"function"==typeof m))return m;if(void 0!==m)throw new TypeError("Derived constructors may only return object or undefined");return function(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(y)}function f(y){var m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}();return function(){var w,x=c(y);if(m){var S=c(this).constructor;w=Reflect.construct(x,arguments,S)}else w=x.apply(this,arguments);return d(this,w)}}function p(y,m){return function(y){if(Array.isArray(y))return y}(y)||function(y,m){var w=null==y?null:"undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(null==w)return;var x,S,P=[],E=!0,T=!1;try{for(w=w.call(y);!(E=(x=w.next()).done)&&(P.push(x.value),!m||P.length!==m);E=!0);}catch(C){T=!0,S=C}finally{try{E||null==w.return||w.return()}finally{if(T)throw S}}return P}(y,m)||_(y,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(y){return function(y){if(Array.isArray(y))return g(y)}(y)||function(y){if("undefined"!=typeof Symbol&&null!=y[Symbol.iterator]||null!=y["@@iterator"])return Array.from(y)}(y)||_(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(y,m){if(y){if("string"==typeof y)return g(y,m);var w=Object.prototype.toString.call(y).slice(8,-1);return"Object"===w&&y.constructor&&(w=y.constructor.name),"Map"===w||"Set"===w?Array.from(y):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?g(y,m):void 0}}function g(y,m){(null==m||m>y.length)&&(m=y.length);for(var w=0,x=new Array(m);w<m;w++)x[w]=y[w];return x}function v(y,m){var w="undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(!w){if(Array.isArray(y)||(w=_(y))||m&&y&&"number"==typeof y.length){w&&(y=w);var x=0,i=function(){};return{s:i,n:function(){return x>=y.length?{done:!0}:{done:!1,value:y[x++]}},e:function(y){throw y},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var S,P=!0,E=!1;return{s:function(){w=w.call(y)},n:function(){var y=w.next();return P=y.done,y},e:function(y){E=!0,S=y},f:function(){try{P||null==w.return||w.return()}finally{if(E)throw S}}}}var x={DEBUG:!1,LIB_VERSION:"1.68.4"};/**
 * uuidv7: An experimental implementation of the proposed UUID Version 7
 *
 * @license Apache-2.0
 * @copyright 2021-2023 LiosK
 * @packageDocumentation
 *
 * from https://github.com/LiosK/uuidv7/blob/e501462ea3d23241de13192ceae726956f9b3b7d/src/index.ts
 */ Math.trunc||(Math.trunc=function(y){return y<0?Math.ceil(y):Math.floor(y)}),Number.isInteger||(Number.isInteger=function(y){return"number"==typeof y&&isFinite(y)&&Math.floor(y)===y});var S="0123456789abcdef",P=function(){function e(y){if(r(this,e),this.bytes=y,16!==y.length)throw new TypeError("not 128-bit length")}return o(e,[{key:"toString",value:function(){for(var y="",m=0;m<this.bytes.length;m++)y+=S.charAt(this.bytes[m]>>>4),y+=S.charAt(15&this.bytes[m]),3!==m&&5!==m&&7!==m&&9!==m||(y+="-");return y}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(y){return 0===this.compareTo(y)}},{key:"compareTo",value:function(y){for(var m=0;m<16;m++){var w=this.bytes[m]-y.bytes[m];if(0!==w)return Math.sign(w)}return 0}}],[{key:"fromFieldsV7",value:function(y,m,w,x){if(!Number.isInteger(y)||!Number.isInteger(m)||!Number.isInteger(w)||!Number.isInteger(x)||y<0||m<0||w<0||x<0||y>0xffffffffffff||m>4095||w>1073741823||x>4294967295)throw new RangeError("invalid field value");var S=new Uint8Array(16);return S[0]=y/Math.pow(2,40),S[1]=y/Math.pow(2,32),S[2]=y/Math.pow(2,24),S[3]=y/Math.pow(2,16),S[4]=y/Math.pow(2,8),S[5]=y,S[6]=112|m>>>8,S[7]=m,S[8]=128|w>>>24,S[9]=w>>>16,S[10]=w>>>8,S[11]=w,S[12]=x>>>24,S[13]=x>>>16,S[14]=x>>>8,S[15]=x,new e(S)}}]),e}(),E=function(){function e(){r(this,e),s(this,"timestamp",0),s(this,"counter",0),s(this,"random",new C)}return o(e,[{key:"generate",value:function(){var y=this.generateOrAbort();if(void 0!==y)return y;this.timestamp=0;var m=this.generateOrAbort();if(void 0===m)throw new Error("Could not generate UUID after timestamp reset");return m}},{key:"generateOrAbort",value:function(){var y=Date.now();if(y>this.timestamp)this.timestamp=y,this.resetCounter();else{if(!(y+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return P.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e}(),k=function(y){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var m=0;m<y.length;m++)y[m]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return y};"undefined"!=typeof crypto&&crypto.getRandomValues&&(k=function(y){return crypto.getRandomValues(y)});var T,C=function(){function e(){r(this,e),s(this,"buffer",new Uint32Array(8)),s(this,"cursor",1/0)}return o(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(k(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e}(),F=function(){return(T||(T=new E)).generate()},O=Array.prototype,A=Object.prototype,R=A.toString,I=A.hasOwnProperty,M="undefined"!=typeof window?window:{},D=M.navigator||{userAgent:""},j=M.document||{},$=D.userAgent,N=["localhost","127.0.0.1"],q=O.forEach,V=O.indexOf,et=Array.isArray,en={},er={log:function(){if(x.DEBUG&&!Q(window.console)&&window.console){for(var y=("__rrweb_original__"in window.console.log)?window.console.log.__rrweb_original__:window.console.log,m=arguments.length,w=new Array(m),S=0;S<m;S++)w[S]=arguments[S];try{y.apply(window.console,w)}catch(P){H(w,function(m){y(m)})}}},error:function(){if(x.DEBUG&&!Q(window.console)&&window.console){for(var y=arguments.length,m=new Array(y),w=0;w<y;w++)m[w]=arguments[w];var S=["PostHog error:"].concat(m),P="__rrweb_original__"in window.console.error?window.console.error.__rrweb_original__:window.console.error;try{P.apply(window.console,S)}catch(E){H(S,function(y){P(y)})}}},critical:function(){if(!Q(window.console)&&window.console){for(var y=arguments.length,m=new Array(y),w=0;w<y;w++)m[w]=arguments[w];var x=["PostHog error:"].concat(m),S="__rrweb_original__"in window.console.error?window.console.error.__rrweb_original__:window.console.error;try{S.apply(window.console,x)}catch(P){H(x,function(y){S(y)})}}}},B=function(y){return y.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function H(y,m,w){if(Array.isArray(y)){if(q&&y.forEach===q)y.forEach(m,w);else if("length"in y&&y.length===+y.length){for(var x=0,S=y.length;x<S;x++)if(x in y&&m.call(w,y[x],x)===en)return}}}function L(y,m,w){if(null!=y){if(Array.isArray(y))return H(y,m,w);for(var x in y)if(I.call(y,x)&&m.call(w,y[x],x)===en)return}}var U=function(y){for(var m=arguments.length,w=new Array(m>1?m-1:0),x=1;x<m;x++)w[x-1]=arguments[x];return H(w,function(m){for(var w in m)void 0!==m[w]&&(y[w]=m[w])}),y},ei=et||function(y){return"[object Array]"===R.call(y)},G=function(y){try{return/^\s*\bfunction\b/.test(y)}catch(m){return!1}};function W(y,m){return -1!==y.indexOf(m)}var z=function(y){return y===Object(y)&&!ei(y)},Q=function(y){return void 0===y},J=function(y){return"[object String]"==R.call(y)},X=function(y){return"[object Number]"==R.call(y)},Y=function e(y){return L(y,function(m,w){(function(y){return"[object Date]"==R.call(y)})(m)?y[w]=Z(m):z(m)&&(y[w]=e(m))}),y},Z=function(y){function t(y){return y<10?"0"+y:y}return y.getUTCFullYear()+"-"+t(y.getUTCMonth()+1)+"-"+t(y.getUTCDate())+"T"+t(y.getUTCHours())+":"+t(y.getUTCMinutes())+":"+t(y.getUTCSeconds())},K=function(y){return function(){try{for(var m=arguments.length,w=new Array(m),x=0;x<m;x++)w[x]=arguments[x];return y.apply(this,w)}catch(S){er.critical("Implementation error. Please turn on debug and contact support@posthog.com."),er.critical(S)}}},ee=function(y){var m={};return L(y,function(y,w){J(y)&&y.length>0&&(m[w]=y)}),m};var eo=["$performance_raw"];function ne(y,m){return w=y,x=function(y,w){return w&&eo.indexOf(w)>-1?y:"string"==typeof y&&null!==m?y.slice(0,m):y},S=new Set,function e(y,m){return y!==Object(y)?x?x(y,m):y:S.has(y)?void 0:(S.add(y),ei(y)?(w=[],H(y,function(y){w.push(e(y))})):(w={},L(y,function(y,m){S.has(y)||(w[m]=e(y,m))})),w);var w}(w);var w,x,S}function re(y){var m,w,x,S,P,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",T=0,C=0,O="",A=[];if(!y)return y;y=oe(y);do m=(P=y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<8|y.charCodeAt(T++))>>18&63,w=P>>12&63,x=P>>6&63,S=63&P,A[C++]=E.charAt(m)+E.charAt(w)+E.charAt(x)+E.charAt(S);while(T<y.length)switch(O=A.join(""),y.length%3){case 1:O=O.slice(0,-2)+"==";break;case 2:O=O.slice(0,-1)+"="}return O}var es,oe=function(y){var m,w,x,S,P="";for(m=w=0,x=(y=(y+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,S=0;S<x;S++){var E=y.charCodeAt(S),T=null;E<128?w++:T=E>127&&E<2048?String.fromCharCode(E>>6|192,63&E|128):String.fromCharCode(E>>12|224,E>>6&63|128,63&E|128),null!==T&&(w>m&&(P+=y.substring(m,w)),P+=T,m=w=S+1)}return w>m&&(P+=y.substring(m,y.length)),P},ea=(es=function(){for(var y=(new Date).valueOf(),m=0;y==(new Date).valueOf();)m++;return y.toString(16)+m.toString(16)},function(y){if("v7"===y)return F().toString();var m="undefined"!=typeof window?(window.screen.height*window.screen.width).toString(16):"0";return es()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var y,m,w=$,x=0,S=[];function o(y,m){var w,x=0;for(w=0;w<m.length;w++)x|=S[w]<<8*w;return y^x}for(y=0;y<w.length;y++)m=w.charCodeAt(y),S.unshift(255&m),S.length>=4&&(x=o(x,S),S=[]);return S.length>0&&(x=o(x,S)),x.toString(16)}()+"-"+m+"-"+es()}),ae=function(y){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp|ahrefsbot|facebookexternalhit|facebookcatalog|applebot|semrushbot|duckduckbot|twitterbot|rogerbot|linkedinbot|mj12bot|sitebulb|bot.htm|bot.php|hubspot|crawler|prerender)/i.test(y)},ce=function(y,m){var w=m.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),x=new RegExp("[\\?&]"+w+"=([^&#]*)").exec(y);if(null===x||x&&"string"!=typeof x[1]&&x[1].length)return"";var S=x[1];try{S=decodeURIComponent(S)}catch(P){er.error("Skipping decoding for malformed query param: "+S)}return S.replace(/\+/g," ")},ue=function(y,m){var w=y.match(new RegExp(m+"=([^&]*)"));return w?w[1]:null},ec=function(){function e(y){return y&&(y.preventDefault=e.preventDefault,y.stopPropagation=e.stopPropagation),y}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(y,m,w,x,S){if(y)if(y.addEventListener&&!x)y.addEventListener(m,w,!!S);else{var P="on"+m,E=y[P];y[P]=function(y,m,w){return function(x){if(x=x||e(window.event)){var S,P=!0;G(w)&&(S=w(x));var E=m.call(y,x);return!1!==S&&!1!==E||(P=!1),P}}}(y,w,E)}else er.error("No valid element provided to register_event")}}();function de(y,m){var n=function(){var w=j.createElement("script");w.type="text/javascript",w.src=y,w.onload=function(y){return m(void 0,y)},w.onerror=function(y){return m(y)};var x,S=j.querySelectorAll("body > script");S.length>0?null===(x=S[0].parentNode)||void 0===x||x.insertBefore(w,S[0]):j.body.appendChild(w)};j.body?n():j.addEventListener("DOMContentLoaded",n)}var eu={campaignParams:function(y){var m=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","fbclid","msclkid"].concat(y||[]),w={};return L(m,function(y){var m=ce(j.URL,y);m.length&&(w[y]=m)}),w},searchEngine:function(){var y=j.referrer;return y?0===y.search("https?://(.*)google.([^/?]*)")?"google":0===y.search("https?://(.*)bing.com")?"bing":0===y.search("https?://(.*)yahoo.com")?"yahoo":0===y.search("https?://(.*)duckduckgo.com")?"duckduckgo":null:null},searchInfo:function(){var y=eu.searchEngine(),m="yahoo"!=y?"q":"p",w={};if(null!==y){w.$search_engine=y;var x=ce(j.referrer,m);x.length&&(w.ph_keyword=x)}return w},browser:function(y,m,w){return m=m||"",w||W(y," OPR/")?W(y,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(y)?"BlackBerry":W(y,"IEMobile")||W(y,"WPDesktop")?"Internet Explorer Mobile":W(y,"SamsungBrowser/")?"Samsung Internet":W(y,"Edge")||W(y,"Edg/")?"Microsoft Edge":W(y,"FBIOS")?"Facebook Mobile":W(y,"Chrome")?"Chrome":W(y,"CriOS")?"Chrome iOS":W(y,"UCWEB")||W(y,"UCBrowser")?"UC Browser":W(y,"FxiOS")?"Firefox iOS":W(m,"Apple")?W(y,"Mobile")?"Mobile Safari":"Safari":W(y,"Android")?"Android Mobile":W(y,"Konqueror")?"Konqueror":W(y,"Firefox")?"Firefox":W(y,"MSIE")||W(y,"Trident/")?"Internet Explorer":W(y,"Gecko")?"Mozilla":""},browserVersion:function(y,m,w){var x={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[eu.browser(y,m,w)];if(void 0===x)return null;var S=y.match(x);return S?parseFloat(S[S.length-2]):null},browserLanguage:function(){return D.language||D.userLanguage},os:function(y){if(/Windows/i.test(y)){if(/Phone/.test(y)||/WPDesktop/.test(y))return{os_name:"Windows Phone",os_version:""};var m=/Windows NT ([0-9.]+)/i.exec(y);return m&&m[1]?{os_name:"Windows",os_version:m[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(y)){var w=/OS (\d+)_(\d+)_?(\d+)?/i.exec(y);return w&&w[1]?{os_name:"iOS",os_version:[w[1],w[2],w[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(y)){var x=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(y);return x&&x[1]?{os_name:"Android",os_version:[x[1],x[2],x[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(y))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(y)){var S=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(y);return S&&S[1]?{os_name:"Mac OS X",os_version:[S[1],S[2],S[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(y)?{os_name:"Linux",os_version:""}:/CrOS/.test(y)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(y){return/Windows Phone/i.test(y)||/WPDesktop/.test(y)?"Windows Phone":/iPad/.test(y)?"iPad":/iPod/.test(y)?"iPod Touch":/iPhone/.test(y)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(y)?"BlackBerry":/Android/.test(y)&&!/Mobile/.test(y)?"Android Tablet":/Android/.test(y)?"Android":""},deviceType:function(y){var m=this.device(y);return"iPad"===m||"Android Tablet"===m?"Tablet":m?"Mobile":"Desktop"},referrer:function(){return j.referrer||"$direct"},referringDomain:function(){if(!j.referrer)return"$direct";var y=j.createElement("a");return y.href=j.referrer,y.host},properties:function(){var y=eu.os($),m=y.os_name,w=y.os_version;return U(ee({$os:m,$os_version:w,$browser:eu.browser($,D.vendor,M.opera),$device:eu.device($),$device_type:eu.deviceType($)}),{$current_url:null==M?void 0:M.location.href,$host:null==M?void 0:M.location.host,$pathname:null==M?void 0:M.location.pathname,$browser_version:eu.browserVersion($,D.vendor,M.opera),$browser_language:eu.browserLanguage(),$screen_height:null==M?void 0:M.screen.height,$screen_width:null==M?void 0:M.screen.width,$viewport_height:null==M?void 0:M.innerHeight,$viewport_width:null==M?void 0:M.innerWidth,$lib:"web",$lib_version:x.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:(Date.now=Date.now||function(){return+new Date},Date.now()/1e3)})},people_properties:function(){var y=eu.os($),m=y.os_name,w=y.os_version;return U(ee({$os:m,$os_version:w,$browser:eu.browser($,D.vendor,M.opera)}),{$browser_version:eu.browserVersion($,D.vendor,M.opera)})}};function pe(y){switch(n(y.className)){case"string":return y.className;case"object":return("baseVal"in y.className?y.className.baseVal:null)||y.getAttribute("class")||"";default:return""}}function he(y){var m="";return be(y)&&!we(y)&&y.childNodes&&y.childNodes.length&&L(y.childNodes,function(y){ve(y)&&y.textContent&&(m+=B(y.textContent).split(/(\s+)/).filter(ke).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),B(m)}function _e(y){return!!y&&1===y.nodeType}function ge(y,m){return!!y&&!!y.tagName&&y.tagName.toLowerCase()===m.toLowerCase()}function ve(y){return!!y&&3===y.nodeType}function ye(y){return!!y&&11===y.nodeType}var el=["a","button","form","input","select","textarea","label"];function be(y){for(var m=y;m.parentNode&&!ge(m,"body");m=m.parentNode){var w=pe(m).split(" ");if(W(w,"ph-sensitive")||W(w,"ph-no-capture"))return!1}if(W(pe(y).split(" "),"ph-include"))return!0;var x=y.type||"";if("string"==typeof x)switch(x.toLowerCase()){case"hidden":case"password":return!1}var S=y.name||y.id||"";if("string"==typeof S){if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(S.replace(/[^a-zA-Z0-9]/g,"")))return!1}return!0}function we(y){return!!(ge(y,"input")&&!["button","checkbox","submit","reset"].includes(y.type)||ge(y,"select")||ge(y,"textarea")||"true"===y.getAttribute("contenteditable"))}function ke(y){if(null===y||Q(y))return!1;if("string"==typeof y){y=B(y);if(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((y||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(y))return!1}return!0}function Se(y){var m=he(y);return ke(m="".concat(m," ").concat(Ee(y)).trim())?m:""}function Ee(y){var m="";return y&&y.childNodes&&y.childNodes.length&&L(y.childNodes,function(y){var w;if(y&&"span"===(null===(w=y.tagName)||void 0===w?void 0:w.toLowerCase()))try{var x=he(y);m="".concat(m," ").concat(x).trim(),y.childNodes&&y.childNodes.length&&(m="".concat(m," ").concat(Ee(y)).trim())}catch(S){console.error(S)}}),m}var eh=function(){function e(y){r(this,e),this.clicks=[],this.enabled=y}return o(e,[{key:"isRageClick",value:function(y,m,w){if(!this.enabled)return!1;var x=this.clicks[this.clicks.length-1];if(x&&Math.abs(y-x.x)+Math.abs(m-x.y)<30&&w-x.timestamp<1e3){if(this.clicks.push({x:y,y:m,timestamp:w}),3===this.clicks.length)return!0}else this.clicks=[{x:y,y:m,timestamp:w}];return!1}}]),e}(),ed=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,ef={is_supported:function(){return!0},error:function(y){er.error("cookieStore error: "+y)},get:function(y){try{for(var m=y+"=",w=document.cookie.split(";"),x=0;x<w.length;x++){for(var S=w[x];" "==S.charAt(0);)S=S.substring(1,S.length);if(0===S.indexOf(m))return decodeURIComponent(S.substring(m.length,S.length))}}catch(P){}return null},parse:function(y){var m;try{m=JSON.parse(ef.get(y))||{}}catch(w){}return m},set:function(y,m,w,x,S){try{var P="",E="",T="";if(x){var C=document.location.hostname.match(ed),O=C?C[0]:"";P=O?"; domain=."+O:""}if(w){var A=new Date;A.setTime(A.getTime()+24*w*36e5),E="; expires="+A.toUTCString()}S&&(T="; secure");var R=y+"="+encodeURIComponent(JSON.stringify(m))+E+"; SameSite=Lax; path=/"+P+T;return document.cookie=R,R}catch(I){return}},remove:function(y,m){try{ef.set(y,"",-1,m)}catch(w){return}}},ep=null,eg={is_supported:function(){if(null!==ep)return ep;var y=!0;if("undefined"!=typeof window)try{var m="__mplssupport__";eg.set(m,"xyz"),'"xyz"'!==eg.get(m)&&(y=!1),eg.remove(m)}catch(w){y=!1}else y=!1;return y||er.error("localStorage unsupported; falling back to cookie store"),ep=y,y},error:function(y){er.error("localStorage error: "+y)},get:function(y){try{return window.localStorage.getItem(y)}catch(m){eg.error(m)}return null},parse:function(y){try{return JSON.parse(eg.get(y))||{}}catch(m){}return null},set:function(y,m){try{window.localStorage.setItem(y,JSON.stringify(m))}catch(w){eg.error(w)}},remove:function(y){try{window.localStorage.removeItem(y)}catch(m){eg.error(m)}}},ev=t(t({},eg),{},{parse:function(y){try{var m={};try{(m=ef.parse(y)||{}).distinct_id&&ef.set(y,{distinct_id:m.distinct_id})}catch(w){}var x=U(m,JSON.parse(eg.get(y)||"{}"));return eg.set(y,x),x}catch(S){}return null},set:function(y,m,w,x,S){try{eg.set(y,m),m.distinct_id&&ef.set(y,{distinct_id:m.distinct_id},w,x,S)}catch(P){eg.error(P)}},remove:function(y,m){try{window.localStorage.removeItem(y),ef.remove(y,m)}catch(w){eg.error(w)}}}),ey={},em={is_supported:function(){return!0},error:function(y){er.error("memoryStorage error: "+y)},get:function(y){return ey[y]||null},parse:function(y){return ey[y]||null},set:function(y,m){ey[y]=m},remove:function(y){delete ey[y]}},e_=null,eb={is_supported:function(){if(null!==e_)return e_;if(e_=!0,"undefined"!=typeof window)try{var y="__support__";eb.set(y,"xyz"),'"xyz"'!==eb.get(y)&&(e_=!1),eb.remove(y)}catch(m){e_=!1}else e_=!1;return e_},error:function(y){x.DEBUG&&er.error("sessionStorage error: ",y)},get:function(y){try{return window.sessionStorage.getItem(y)}catch(m){eb.error(m)}return null},parse:function(y){try{return JSON.parse(eb.get(y))||null}catch(m){}return null},set:function(y,m){try{window.sessionStorage.setItem(y,JSON.stringify(m))}catch(w){eb.error(w)}},remove:function(y){try{window.sessionStorage.removeItem(y)}catch(m){eb.error(m)}}},ew="$people_distinct_id",ek="__alias",ex="__timers",eS="$autocapture_disabled_server_side",eP="$session_recording_enabled_server_side",eE="$console_log_recording_enabled_server_side",eT="$session_recording_recorder_version_server_side",eC="$sesid",eO="$enabled_feature_flags",eA="$early_access_features",eR="$stored_person_properties",eI="$stored_group_properties",eF="$surveys",eM="$flag_call_reported",eD="$user_state",ej=[ew,ek,"__cmpns",ex,eP,eC,eO,eD,eA,eI,eR,eF,eM],eB=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],e$=function(){function e(y){r(this,e);var m="";y.token&&(m=y.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=y.custom_campaign_params||[],y.persistence_name?this.name="ph_"+y.persistence_name:this.name="ph_"+m+"_posthog",-1===eB.indexOf(y.persistence.toLowerCase())&&(er.critical("Unknown persistence type "+y.persistence+"; falling back to cookie"),y.persistence="cookie");var w=y.persistence.toLowerCase();"localstorage"===w&&eg.is_supported()?this.storage=eg:"localstorage+cookie"===w&&ev.is_supported()?this.storage=ev:"sessionstorage"===w&&eb.is_supported()?this.storage=eb:this.storage="memory"===w?em:ef,this.user_state="anonymous",this.load(),this.update_config(y),this.save()}return o(e,[{key:"properties",value:function(){var y={};return L(this.props,function(m,w){if(w===eO&&"object"===n(m))for(var x=Object.keys(m),S=0;S<x.length;S++)y["$feature/".concat(x[S])]=m[x[S]];else E=w,T=!1,(null===(P=ej)?T:V&&P.indexOf===V?-1!=P.indexOf(E):(L(P,function(y){if(T||(T=y===E))return en}),T))||(y[w]=m);var P,E,T}),y}},{key:"load",value:function(){if(!this.disabled){var y=this.storage.parse(this.name);y&&(this.props=U({},y))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(y,m,w){var x=this;if(z(y)){void 0===m&&(m="None"),this.expire_days=void 0===w?this.default_expiry:w;var S=!1;if(L(y,function(y,w){x.props.hasOwnProperty(w)&&x.props[w]!==m||(x.props[w]=y,S=!0)}),S)return this.save(),!0}return!1}},{key:"register",value:function(y,m){var w=this;if(z(y)){this.expire_days=void 0===m?this.default_expiry:m;var x=!1;if(L(y,function(m,S){y.hasOwnProperty(S)&&w.props[S]!==m&&(w.props[S]=m,x=!0)}),x)return this.save(),!0}return!1}},{key:"unregister",value:function(y){y in this.props&&(delete this.props[y],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(eu.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(eu.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||eu.referrer(),$referring_domain:this.props.$referring_domain||eu.referringDomain()})}},{key:"get_referrer_info",value:function(){return ee({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(y){return L(this.props,function(m,w){w in y||(y[w]=m)}),y}},{key:"update_config",value:function(y){this.default_expiry=this.expire_days=y.cookie_expiration,this.set_disabled(y.disable_persistence),this.set_cross_subdomain(y.cross_subdomain_cookie),this.set_secure(y.secure_cookie)}},{key:"set_disabled",value:function(y){this.disabled=y,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(y){y!==this.cross_subdomain&&(this.cross_subdomain=y,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(y){y!==this.secure&&(this.secure=y,this.remove(),this.save())}},{key:"set_event_timer",value:function(y,m){var w=this.props[ex]||{};w[y]=m,this.props[ex]=w,this.save()}},{key:"remove_event_timer",value:function(y){var m=(this.props[ex]||{})[y];return Q(m)||(delete this.props[ex][y],this.save()),m}},{key:"get_user_state",value:function(){return this.props[eD]||"anonymous"}},{key:"set_user_state",value:function(y){this.props[eD]=y,this.save()}}]),e}(),eL={_initializedTokens:[],_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(y){var m=!!y.get_property(eS),w=!!y.get_config("autocapture");this._isAutocaptureEnabled=w&&!m},_previousElementSibling:function(y){if(y.previousElementSibling)return y.previousElementSibling;var m=y;do m=m.previousSibling;while(m&&!_e(m))return m},_getAugmentPropertiesFromElement:function(y){if(!be(y))return{};var m={};return L(y.attributes,function(y){if(0===y.name.indexOf("data-ph-capture-attribute")){var w=y.name.replace("data-ph-capture-attribute-",""),x=y.value;w&&x&&ke(x)&&(m[w]=x)}}),m},_getPropertiesFromElement:function(y,m,w){var x=y.tagName.toLowerCase(),S={tag_name:x};el.indexOf(x)>-1&&!w&&("a"===x.toLowerCase()||"button"===x.toLowerCase()?S.$el_text=Se(y):S.$el_text=he(y));var P=pe(y);P.length>0&&(S.classes=P.split(" ").filter(function(y){return""!==y})),L(y.attributes,function(w){var x;we(y)&&-1===["name","id","class"].indexOf(w.name)||!m&&ke(w.value)&&("string"!=typeof(x=w.name)||"_ngcontent"!==x.substring(0,10)&&"_nghost"!==x.substring(0,7))&&(S["attr__"+w.name]=w.value)});for(var E=1,T=1,C=y;C=this._previousElementSibling(C);)E++,C.tagName===y.tagName&&T++;return S.nth_child=E,S.nth_of_type=T,S},_getDefaultProperties:function(y){return{$event_type:y,$ce_version:1}},_extractCustomPropertyValue:function(y){var m=[];return L(document.querySelectorAll(y.css_selector),function(y){var w;["input","select"].indexOf(y.tagName.toLowerCase())>-1?w=y.value:y.textContent&&(w=y.textContent),ke(w)&&m.push(w)}),m.join(", ")},_getCustomProperties:function(y){var m=this,w={};return L(this._customProperties,function(x){L(x.event_selectors,function(S){L(document.querySelectorAll(S),function(S){W(y,S)&&be(S)&&(w[x.name]=m._extractCustomPropertyValue(x))})})}),w},_getEventTarget:function(y){return void 0===y.target?y.srcElement||null:null!==(m=y.target)&&void 0!==m&&m.shadowRoot?y.composedPath()[0]||null:y.target||null;var m},_captureEvent:function(y,m){var w,x=this,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$autocapture",P=this._getEventTarget(y);ve(P)&&(P=P.parentNode||null),"$autocapture"===S&&"click"===y.type&&y instanceof MouseEvent&&null!==(w=this.rageclicks)&&void 0!==w&&w.isRageClick(y.clientX,y.clientY,(new Date).getTime())&&this._captureEvent(y,m,"$rageclick");if(P&&function(y,m){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!y||ge(y,"html")||!_e(y))return!1;if(null!=w&&w.url_allowlist){var x=window.location.href,S=w.url_allowlist;if(S&&!S.some(function(y){return x.match(y)}))return!1}if(null!=w&&w.dom_event_allowlist){var P=w.dom_event_allowlist;if(P&&!P.some(function(y){return m.type===y}))return!1}if(null!=w&&w.element_allowlist){var E=w.element_allowlist;if(E&&!E.some(function(m){return y.tagName.toLowerCase()===m}))return!1}if(null!=w&&w.css_selector_allowlist){var T=w.css_selector_allowlist;if(T&&!T.some(function(m){return y.matches(m)}))return!1}for(var C=!1,O=[y],A=!0,R=y;R.parentNode&&!ge(R,"body");)if(ye(R.parentNode))O.push(R.parentNode.host),R=R.parentNode.host;else{if(!(A=R.parentNode||!1))break;if(el.indexOf(A.tagName.toLowerCase())>-1)C=!0;else{var I=window.getComputedStyle(A);I&&"pointer"===I.getPropertyValue("cursor")&&(C=!0)}O.push(A),R=A}var M=window.getComputedStyle(y);if(M&&"pointer"===M.getPropertyValue("cursor")&&"click"===m.type)return!0;var D=y.tagName.toLowerCase();switch(D){case"html":return!1;case"form":return"submit"===m.type;case"input":case"select":case"textarea":return"change"===m.type||"click"===m.type;default:return C?"click"===m.type:"click"===m.type&&(el.indexOf(D)>-1||"true"===y.getAttribute("contenteditable"))}}(P,y,this.config)){for(var E=[P],T=P;T.parentNode&&!ge(T,"body");)ye(T.parentNode)?(E.push(T.parentNode.host),T=T.parentNode.host):(E.push(T.parentNode),T=T.parentNode);var C,O=[],A={},R=!1;if(L(E,function(y){var w=be(y);"a"===y.tagName.toLowerCase()&&(C=y.getAttribute("href"),C=w&&ke(C)&&C),W(pe(y).split(" "),"ph-no-capture")&&(R=!0),O.push(x._getPropertiesFromElement(y,m.get_config("mask_all_element_attributes"),m.get_config("mask_all_text")));var S=x._getAugmentPropertiesFromElement(y);U(A,S)}),m.get_config("mask_all_text")||("a"===P.tagName.toLowerCase()||"button"===P.tagName.toLowerCase()?O[0].$el_text=Se(P):O[0].$el_text=he(P)),C&&(O[0].attr__href=C),R)return!1;var I=U(this._getDefaultProperties(y.type),{$elements:O},this._getCustomProperties(E),A);return m.capture(S,I),!0}},_navigate:function(y){window.location.href=y},_addDomEventHandlers:function(y){var m=this,n=function(w){w=w||window.event,m._captureEvent(w,y)};ec(document,"submit",n,!1,!0),ec(document,"change",n,!1,!0),ec(document,"click",n,!1,!0)},_customProperties:[],rageclicks:null,config:void 0,init:function(y){var m;"boolean"!=typeof y.__autocapture&&(this.config=y.__autocapture),null!==(m=this.config)&&void 0!==m&&m.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(y){return new RegExp(y)})),this.rageclicks=new eh(y.get_config("rageclick"))},afterDecideResponse:function(y,m){this._setIsAutocaptureEnabled(m);var w=m.get_config("token");this._initializedTokens.indexOf(w)>-1?er.log('autocapture already initialized for token "'+w+'"'):(m.persistence&&m.persistence.register(s({},eS,!!y.autocapture_opt_out)),this._initializedTokens.push(w),y&&y.config&&y.config.enable_collect_everything&&this._isAutocaptureEnabled?(y.custom_properties&&(this._customProperties=y.custom_properties),this._addDomEventHandlers(m)):m.__autocapture=!1)},enabledForProject:function(y,m,w){if(!y)return!0;m=Q(m)?10:m,w=Q(w)?10:w;for(var x=0,S=0;S<y.length;S++)x+=y.charCodeAt(S);return x%m<w},isBrowserSupported:function(){return G(document.querySelectorAll)}};(function(y){for(var m in y)"function"==typeof y[m]&&(y[m]=y[m].bind(y))})(eL),function(y){for(var m in y)"function"==typeof y[m]&&(y[m]=K(y[m]))}(eL);var eN="__ph_opt_in_out_";function tt(y,m){ut(!0,y,m)}function nt(y,m){ut(!1,y,m)}function rt(y,m){return"1"===ct(y,m)}function it(y,m){return!!function(y){if(y&&y.respectDnt){var m=y&&y.window||M,w=m.navigator||{},x=!1;return L([w.doNotTrack,w.msDoNotTrack,m.doNotTrack],function(y){W([!0,1,"1","yes"],y)&&(x=!0)}),x}return!1}(m)||"0"===ct(y,m)}function ot(y,m){st(m=m||{}).remove(at(y,m),!!m.crossSubdomainCookie)}function st(y){return"localStorage"===(y=y||{}).persistenceType?eg:"localStorage+cookie"===y.persistenceType?ev:ef}function at(y,m){return((m=m||{}).persistencePrefix||eN)+y}function ct(y,m){return st(m).get(at(y,m))}function ut(y,m,w){J(m)&&m.length?(st(w=w||{}).set(at(m,w),y?1:0,X(w.cookieExpiration)?w.cookieExpiration:null,w.crossSubdomainCookie,w.secureCookie),w.capture&&y&&w.capture(w.captureEventName||"$opt_in",w.captureProperties||{},{send_instantly:!0})):console.error("gdpr."+(y?"optIn":"optOut")+" called with an invalid token")}function lt(y,m){var w=!1;try{var x=y.get_config("token"),S=y.get_config("respect_dnt"),P=y.get_config("opt_out_capturing_persistence_type"),E=y.get_config("opt_out_capturing_cookie_prefix")||void 0,T=y.get_config("window");x&&(w=it(x,{respectDnt:S,persistenceType:P,persistencePrefix:E,window:T}))}catch(C){m||console.error("Unexpected error when checking capturing opt-out status: "+C)}return w}function dt(y,m,w){return function(){for(var x=lt(y,w),S=arguments.length,P=new Array(S),E=0;E<S;E++)P[E]=arguments[E];if(!x)return m.apply(this,P);var T=P[P.length-1];"function"==typeof T&&T(0)}}var eH="$set",eK=function(){function e(y){var m=this;r(this,e),this._posthog=y,this.set=dt(y,function(y,w,x){var S=m.set_action(y,w);return m._posthog.setPersonPropertiesForFlags(S.$set||{}),z(y)&&(x=w),m._get_config("save_referrer")&&m._posthog.sessionPersistence.update_referrer_info(),S[eH]=U({},eu.people_properties(),m._posthog.sessionPersistence.get_referrer_info(),S[eH]),m._send_request(S,x)}),this.set_once=dt(y,function(y,w,x){var S=m.set_once_action(y,w);return z(y)&&(x=w),m._send_request(S,x)})}return o(e,[{key:"toString",value:function(){return this._posthog.toString()+".people"}},{key:"_send_request",value:function(y,m){y.$token=this._get_config("token"),y.$distinct_id=this._posthog.get_distinct_id();var w=this._posthog.get_property("$device_id"),x=this._posthog.get_property("$user_id"),S=this._posthog.get_property("$had_persisted_distinct_id");w&&(y.$device_id=w),x&&(y.$user_id=x),S&&(y.$had_persisted_distinct_id=S);var P=Y(y),E=ne(P,this._get_config("properties_string_max_length")),T=re(JSON.stringify(P));return this._posthog._send_request(this._get_config("api_host")+"/engage/",{data:T},{},this._posthog._prepare_callback(m,E)),E}},{key:"_get_config",value:function(y){return this._posthog.get_config(y)}},{key:"_is_reserved_property",value:function(y){return"$distinct_id"===y||"$token"===y||"$device_id"===y||"$user_id"===y||"$had_persisted_distinct_id"===y}},{key:"set_action",value:function(y,m){return this.apiActionParser(eH,y,m)}},{key:"set_once_action",value:function(y,m){return this.apiActionParser("$set_once",y,m)}},{key:"apiActionParser",value:function(y,m,w){var x=this,S={},P={};return z(m)?L(m,function(y,m){x._is_reserved_property(m)||(P[m]=y)}):P[m]=w,S[y]=P,S}}]),e}(),eq="$active_feature_flags",eU="$override_feature_flags",eW="$feature_flag_payloads",vt=function(y){var m,w={},x=v(function(y){for(var m=Object.keys(y),w=m.length,x=new Array(w);w--;)x[w]=[m[w],y[m[w]]];return x}(y||{}));try{for(x.s();!(m=x.n()).done;){var S=p(m.value,2),P=S[0],E=S[1];E&&(w[P]=E)}}catch(T){x.e(T)}finally{x.f()}return w},eV=function(){function e(y){r(this,e),this.instance=y,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return o(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var y=this.instance.get_property(eO),m=this.instance.get_property(eU);if(!m)return y||{};for(var w=U({},y),x=Object.keys(m),S=0;S<x.length;S++)!1===m[x[S]]?delete w[x[S]]:w[x[S]]=m[x[S]];return this._override_warning||(console.warn("[PostHog] Overriding feature flags!",{enabledFlags:y,overriddenFlags:m,finalFlags:w}),this._override_warning=!0),w}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(eW)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(y){this.$anon_distinct_id=y}},{key:"setReloadingPaused",value:function(y){this.reloadFeatureFlagsInAction=y}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var y=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!y.reloadFeatureFlagsInAction&&y.reloadFeatureFlagsQueued&&(y.reloadFeatureFlagsQueued=!1,y._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var y=this;this.setReloadingPaused(!0);var m=this.instance.get_config("token"),w=this.instance.get_property(eR),x=this.instance.get_property(eI),S=re(JSON.stringify({token:m,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:w,group_properties:x}));this.instance._send_request(this.instance.get_config("api_host")+"/decide/?v=3",{data:S},{method:"POST"},this.instance._prepare_callback(function(m){y.$anon_distinct_id=void 0,y.receivedFeatureFlags(m),y.setReloadingPaused(!1),y._startReloadTimer()}))}},{key:"getFeatureFlag",value:function(y){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.getFlags()&&0!==this.getFlags().length){var w=this.getFlagVariants()[y],x="".concat(w),S=this.instance.get_property(eM)||{};return!m.send_event&&"send_event"in m||y in S&&S[y].includes(x)||(Array.isArray(S[y])?S[y].push(x):S[y]=[x],this.instance.persistence.register(s({},eM,S)),this.instance.capture("$feature_flag_called",{$feature_flag:y,$feature_flag_response:w})),w}console.warn('getFeatureFlag for key "'+y+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(y){return this.getFlagPayloads()[y]}},{key:"isFeatureEnabled",value:function(y){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.getFlags()&&0!==this.getFlags().length)return!!this.getFeatureFlag(y,m);console.warn('isFeatureEnabled for key "'+y+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(y){this.featureFlagEventHandlers.push(y)}},{key:"removeFeatureFlagsHandler",value:function(y){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(m){return m!==y})}},{key:"receivedFeatureFlags",value:function(y){this.instance.decideEndpointWasHit=!0;var m=this.getFlagVariants(),w=this.getFlagPayloads();(function(y,m){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},S=y.featureFlags,P=y.featureFlagPayloads;if(S)if(Array.isArray(S)){var E,T={};if(S)for(var C=0;C<S.length;C++)T[S[C]]=!0;m&&m.register((s(E={},eq,S),s(E,eO,T),E))}else{var O,A=S,R=P;y.errorsWhileComputingFlags&&(A=t(t({},w),A),R=t(t({},x),R)),m&&m.register((s(O={},eq,Object.keys(vt(A))),s(O,eO,A||{}),s(O,eW,R||{}),O))}})(y,this.instance.persistence,m,w),this._fireFeatureFlagsCallbacks()}},{key:"override",value:function(y){if(this._override_warning=!1,!1===y)this.instance.persistence.unregister(eU);else if(Array.isArray(y)){for(var m={},w=0;w<y.length;w++)m[y[w]]=!0;this.instance.persistence.register(s({},eU,m))}else this.instance.persistence.register(s({},eU,y))}},{key:"onFeatureFlags",value:function(y){var m=this;if(this.addFeatureFlagsHandler(y),this.instance.decideEndpointWasHit){var w=this._prepareFeatureFlagsForCallbacks(),x=w.flags,S=w.flagVariants;y(x,S)}return function(){return m.removeFeatureFlagsHandler(y)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(y,m){var w,x=s({},"$feature_enrollment/".concat(y),m);this.instance.capture("$feature_enrollment_update",{$feature_flag:y,$feature_enrollment:m,$set:x}),this.setPersonPropertiesForFlags(x,!1);var S=t(t({},this.getFlagVariants()),{},s({},y,m));this.instance.persistence.register((s(w={},eq,Object.keys(vt(S))),s(w,eO,S),w)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(y){var m=this,w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=this.instance.get_property(eA);if(x&&!w)return y(x);this.instance._send_request("".concat(this.instance.get_config("api_host"),"/api/early_access_features/?token=").concat(this.instance.get_config("token")),{},{method:"GET"},function(w){var x=w.earlyAccessFeatures;return m.instance.persistence.register(s({},eA,x)),y(x)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var y=this.getFlags(),m=this.getFlagVariants();return{flags:y.filter(function(y){return m[y]}),flagVariants:Object.keys(m).filter(function(y){return m[y]}).reduce(function(y,w){return y[w]=m[w],y},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var y=this._prepareFeatureFlagsForCallbacks(),m=y.flags,w=y.flagVariants;this.featureFlagEventHandlers.forEach(function(y){return y(m,w)})}},{key:"setPersonPropertiesForFlags",value:function(y){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],w=this.instance.get_property(eR)||{};this.instance.register(s({},eR,t(t({},w),y))),m&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(eR)}},{key:"setGroupPropertiesForFlags",value:function(y){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],w=this.instance.get_property(eI)||{};0!==Object.keys(w).length&&Object.keys(w).forEach(function(m){w[m]=t(t({},w[m]),y[m]),delete y[m]}),this.instance.register(s({},eI,t(t({},w),y))),m&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(y){if(y){var m=this.instance.get_property(eI)||{};this.instance.register(s({},eI,t(t({},m),{},s({},y,{}))))}else this.instance.unregister(eI)}}]),e}(),ez="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg==",eG=2,eQ=4,eZ=6,eJ=5e6;var eX="rrweb/console@1";var eY,e0="/s/";!function(y){y[y.Mutation=0]="Mutation",y[y.MouseMove=1]="MouseMove",y[y.MouseInteraction=2]="MouseInteraction",y[y.Scroll=3]="Scroll",y[y.ViewportResize=4]="ViewportResize",y[y.Input=5]="Input",y[y.TouchMove=6]="TouchMove",y[y.MediaInteraction=7]="MediaInteraction",y[y.StyleSheetRule=8]="StyleSheetRule",y[y.CanvasMutation=9]="CanvasMutation",y[y.Font=10]="Font",y[y.Log=11]="Log",y[y.Drag=12]="Drag",y[y.StyleDeclaration=13]="StyleDeclaration",y[y.Selection=14]="Selection",y[y.AdoptedStyleSheet=15]="AdoptedStyleSheet"}(eY||(eY={}));var e1=[eY.MouseMove,eY.MouseInteraction,eY.Scroll,eY.ViewportResize,eY.Input,eY.TouchMove,eY.MediaInteraction,eY.Drag],e2=function(){function e(y){var m=this;r(this,e),s(this,"lastActivityTimestamp",Date.now()),s(this,"isIdle",!1),this.instance=y,this.captureStarted=!1,this.snapshots=[],this.emit=!1,this.endpoint=e0,this.stopRrweb=void 0,this.windowId=null,this.sessionId=null,this.receivedDecide=!1,window.addEventListener("beforeunload",function(){m._flushBuffer()})}return o(e,[{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled()?this.startCaptureAndTrySendingQueuedSnapshots():this.stopRecording()}},{key:"started",value:function(){return this.captureStarted}},{key:"stopRecording",value:function(){this.captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this.captureStarted=!1)}},{key:"isRecordingEnabled",value:function(){var y=!!this.instance.get_property(eP),m=!this.instance.get_config("disable_session_recording");return y&&m}},{key:"isConsoleLogCaptureEnabled",value:function(){var y=!!this.instance.get_property(eE),m=this.instance.get_config("enable_recording_console_log");return null!=m?m:y}},{key:"getRecordingVersion",value:function(){var y,m=this.instance.get_property(eT);return(null===(y=this.instance.get_config("session_recording"))||void 0===y?void 0:y.recorderVersion)||m||"v1"}},{key:"afterDecideResponse",value:function(y){var m,w,x,S,P,E;this.receivedDecide=!0,this.instance.persistence&&this.instance.persistence.register((s(P={},eP,!!y.sessionRecording),s(P,eE,null===(x=y.sessionRecording)||void 0===x?void 0:x.consoleLogRecordingEnabled),s(P,eT,null===(S=y.sessionRecording)||void 0===S?void 0:S.recorderVersion),P));null!==(m=y.sessionRecording)&&void 0!==m&&m.endpoint&&(this.endpoint=null===(E=y.sessionRecording)||void 0===E?void 0:E.endpoint);null!==(w=y.sessionRecording)&&void 0!==w&&w.recorderVersion&&(this.recorderVersion=y.sessionRecording.recorderVersion),this.startRecordingIfEnabled()}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){var y=this;this.receivedDecide&&(this.emit=!0,this.snapshots.forEach(function(m){return y._captureSnapshotBuffered(m)})),this._startCapture()}},{key:"_startCapture",value:function(){var y=this;if(void 0!==Object.assign&&!this.captureStarted&&!this.instance.get_config("disable_session_recording")){this.captureStarted=!0,this.instance.sessionManager.checkAndGetSessionAndWindowId();var m="v2"===this.getRecordingVersion()?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.getRecordingVersion()?de(this.instance.get_config("api_host")+"/static/".concat(m,"?v=").concat(x.LIB_VERSION),function(w){if(w)return er.error("Could not load ".concat(m),w);y._onScriptLoaded()}):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(y){var m;return 3===y.type&&-1!==e1.indexOf(null===(m=y.data)||void 0===m?void 0:m.source)}},{key:"_updateWindowAndSessionIds",value:function(y){var m=this._isInteractiveEvent(y);if(m||this.isIdle||y.timestamp-this.lastActivityTimestamp>3e5&&(this.isIdle=!0),m&&(this.lastActivityTimestamp=y.timestamp,this.isIdle&&(this.isIdle=!1,this._tryTakeFullSnapshot())),!this.isIdle){var w=this.instance.sessionManager.checkAndGetSessionAndWindowId(!m,y.timestamp),x=w.windowId,S=w.sessionId;-1!==[eG,eQ].indexOf(y.type)||this.windowId===x&&this.sessionId===S||this._tryTakeFullSnapshot(),this.windowId=x,this.sessionId=S}}},{key:"_tryTakeFullSnapshot",value:function(){if(!this.captureStarted)return!1;try{var y;return null===(y=this.rrwebRecord)||void 0===y||y.takeFullSnapshot(),!0}catch(m){return er.error("Error taking full snapshot.",m),!1}}},{key:"_onScriptLoaded",value:function(){var y=this,m={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=window.rrweb?window.rrweb.record:window.rrwebRecord;for(var w=this.instance.get_config("session_recording"),x=0,S=Object.entries(w||{});x<S.length;x++){var P=p(S[x],2),E=P[0],T=P[1];E in m&&(m[E]=T)}this.rrwebRecord?(this.stopRrweb=this.rrwebRecord(t({emit:function(m){y.onRRwebEmit(m)},plugins:window.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled()?[window.rrwebConsoleRecord.getRecordConsolePlugin()]:[]},m)),this.instance._addCaptureHook(function(m){try{var w;if("$pageview"===m)null===(w=y.rrwebRecord)||void 0===w||w.addCustomEvent("$pageview",{href:window.location.href})}catch(x){er.error("Could not add $pageview to rrweb session",x)}}),this.lastActivityTimestamp=Date.now(),this.isIdle=!1):er.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"onRRwebEmit",value:function(y){if(y&&"object"===n(y)){var m=function(y){var m=JSON.stringify(y);if(m.length>eJ){var w,x=v(m.matchAll(/data:([\w\/\-\.]+);(\w+),([^)"]*)/gim));try{for(x.s();!(w=x.n()).done;){var S=w.value;m="image/"===S[1].toLocaleLowerCase().slice(0,6)?m.replace(S[0],ez):m.replace(S[0],"")}}catch(P){x.e(P)}finally{x.f()}}return{event:JSON.parse(m),size:m.length}}(function(y){var m=y;if(m&&"object"===n(m)&&m.type===eZ&&"object"===n(m.data)&&m.data.plugin===eX){m.data.payload.payload.length>10&&(m.data.payload.payload=m.data.payload.payload.slice(0,10),m.data.payload.payload.push("...[truncated]"));for(var w=[],x=0;x<m.data.payload.payload.length;x++)m.data.payload.payload[x]&&m.data.payload.payload[x].length>2e3?w.push(m.data.payload.payload[x].slice(0,2e3)+"...[truncated]"):w.push(m.data.payload.payload[x]);return m.data.payload.payload=w,y}return y}(y)),w=m.event,x=m.size;if(this._updateWindowAndSessionIds(w),!this.isIdle){var S={$snapshot_bytes:x,$snapshot_data:w,$session_id:this.sessionId,$window_id:this.windowId};this.instance._captureMetrics.incr("rrweb-record"),this.instance._captureMetrics.incr("rrweb-record-".concat(w.type)),this.emit?this._captureSnapshotBuffered(S):this.snapshots.push(S)}}}},{key:"_flushBuffer",value:function(){return this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0),this.buffer&&0!==this.buffer.data.length&&this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_captureSnapshotBuffered",value:function(y){var m,w=this,x=2+((null===(m=this.buffer)||void 0===m?void 0:m.data.length)||0);(!this.buffer||this.buffer.size+y.$snapshot_bytes+x>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=y.$snapshot_bytes,this.buffer.data.push(y.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){w._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(y){this.instance.capture("$snapshot",y,{transport:"XHR",method:"POST",endpoint:this.endpoint,_noTruncate:!0,_batchKey:"sessionRecording",_metrics:{rrweb_full_snapshot:y.$snapshot_data.type===eG}})}}]),e}(),e3={entryType:0,timeOrigin:1,name:2,startTime:3,redirectStart:4,redirectEnd:5,workerStart:6,fetchStart:7,domainLookupStart:8,domainLookupEnd:9,connectStart:10,secureConnectionStart:11,connectEnd:12,requestStart:13,responseStart:14,responseEnd:15,decodedBodySize:16,encodedBodySize:17,initiatorType:18,nextHopProtocol:19,renderBlockingStatus:20,responseStatus:21,transferSize:22,element:23,renderTime:24,loadTime:25,size:26,id:27,url:28,domComplete:29,domContentLoadedEvent:30,domInteractive:31,loadEventEnd:32,loadEventStart:33,redirectCount:34,navigationType:35,unloadEventEnd:36,unloadEventStart:37,duration:39,timestamp:40},e5=["first-input","navigation","paint","resource"],e6=["/s/","/e/"],e4=function(){function e(y){r(this,e),s(this,"_forceAllowLocalhost",!1),this.instance=y}return o(e,[{key:"startObservingIfEnabled",value:function(){this.isEnabled()?this.startObserving():this.stopObserving()}},{key:"startObserving",value:function(){var y,m,w=this;if(!this.observer)if(void 0!==(null===(y=window)||void 0===y||null===(m=y.PerformanceObserver)||void 0===m?void 0:m.supportedEntryTypes))if(!N.includes(location.hostname)||this._forceAllowLocalhost)try{this.observer=new PerformanceObserver(function(y){y.getEntries().forEach(function(y){w._capturePerformanceEvent(y)})});var x=PerformanceObserver.supportedEntryTypes.filter(function(y){return e5.includes(y)});x.forEach(function(y){var m;null===(m=w.observer)||void 0===m||m.observe({type:y,buffered:!0})})}catch(S){console.error("PostHog failed to start performance observer",S),this.stopObserving()}else er.log("PostHog Peformance observer not started because we are on localhost.");else er.log("PostHog Performance observer not started because PerformanceObserver is not supported by this browser.")}},{key:"stopObserving",value:function(){this.observer&&(this.observer.disconnect(),this.observer=void 0)}},{key:"isObserving",value:function(){return!!this.observer}},{key:"isEnabled",value:function(){var y,m;return null!==(y=null!==(m=this.instance.get_config("capture_performance"))&&void 0!==m?m:this.remoteEnabled)&&void 0!==y&&y}},{key:"afterDecideResponse",value:function(y){this.remoteEnabled=y.capturePerformance||!1,this.isEnabled()&&this.startObserving()}},{key:"_capturePerformanceEvent",value:function(y){if(0===y.name.indexOf(this.instance.get_config("api_host"))){var m=y.name.replace(this.instance.get_config("api_host"),"");if(e6.find(function(y){return 0===m.indexOf(y)}))return}var w={url:y.name},x=this.instance.get_config("session_recording");if(x.maskNetworkRequestFn&&(w=x.maskNetworkRequestFn(w)),w){var S=y.toJSON();S.name=w.url;var P={},E=Math.floor(Date.now()-performance.now());for(var T in P[e3.timeOrigin]=E,P[e3.timestamp]=Math.floor(E+y.startTime),e3)void 0!==S[T]&&(P[e3[T]]=S[T]);if(this.capturePerformanceEvent(P),At(y)){var C,O=v(y.serverTiming||[]);try{for(O.s();!(C=O.n()).done;){var A,R=C.value;this.capturePerformanceEvent((s(A={},e3.timeOrigin,E),s(A,e3.timestamp,Math.floor(E+y.startTime)),s(A,e3.name,R.name),s(A,e3.duration,R.duration),s(A,e3.entryType,"serverTiming"),A))}}catch(I){O.e(I)}finally{O.f()}}}}},{key:"capturePerformanceEvent",value:function(y){var m,w=y[e3.timestamp];null===(m=this.instance.sessionRecording)||void 0===m||m.onRRwebEmit({type:6,data:{plugin:"posthog/network@1",payload:y},timestamp:w})}}]),e}(),At=function(y){return"navigation"===y.entryType||"resource"===y.entryType},e8=function(){function e(y){r(this,e),this.instance=y,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return o(e,[{key:"call",value:function(){var y=this,m=re(JSON.stringify({token:this.instance.get_config("token"),distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(eR),group_properties:this.instance.get_property(eI)}));this.instance._send_request("".concat(this.instance.get_config("api_host"),"/decide/?v=3"),{data:m,verbose:!0},{method:"POST"},function(m){return y.parseDecideResponse(m)})}},{key:"parseDecideResponse",value:function(y){var m,w,x,S=this;if(0!==(null==y?void 0:y.status)){if(this.instance.decideEndpointWasHit=!0,!document||!document.body)return console.log("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){S.parseDecideResponse(y)},500);if(this.instance.toolbar.afterDecideResponse(y),null===(m=this.instance.sessionRecording)||void 0===m||m.afterDecideResponse(y),eL.afterDecideResponse(y,this.instance),null===(w=this.instance.webPerformance)||void 0===w||w.afterDecideResponse(y),null===(x=this.instance.exceptionAutocapture)||void 0===x||x.afterDecideResponse(y),this.instance.featureFlags.receivedFeatureFlags(y),this.instance.compression={},y.supportedCompression&&!this.instance.get_config("disable_compression")){var P,E={},T=v(y.supportedCompression);try{for(T.s();!(P=T.n()).done;)E[P.value]=!0}catch(C){T.e(C)}finally{T.f()}this.instance.compression=E}if(y.siteApps)if(this.instance.get_config("opt_in_site_apps")){var O,A=this.instance.get_config("api_host"),R=v(y.siteApps);try{var d=function(){var y=O.value,m=y.id,w=y.url,x=[A,"/"===A[A.length-1]&&"/"===w[0]?w.substring(1):w].join("");window["__$$ph_site_app_".concat(m)]=S.instance,de(x,function(y){y&&console.error("Error while initializing PostHog app with config id ".concat(m),y)})};for(R.s();!(O=R.n()).done;)d()}catch(I){R.e(I)}finally{R.f()}}else y.siteApps.length>0&&console.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}else console.error("Failed to fetch feature flags from PostHog.")}}]),e}(),e9=["https://app.posthog.com","https://eu.posthog.com"],e7=["source"],te=function(){function e(y){r(this,e),this.instance=y}return o(e,[{key:"afterDecideResponse",value:function(y){var m=y.toolbarParams||y.editorParams||(y.toolbarVersion?{toolbarVersion:y.toolbarVersion}:{});y.isAuthenticated&&m.toolbarVersion&&0===m.toolbarVersion.indexOf("toolbar")&&this.loadToolbar(t({},m))}},{key:"maybeLoadToolbar",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.history;try{if(!m){try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test")}catch(x){return!1}m=window.localStorage}var S,P=ue(y.hash,"__posthog")||ue(y.hash,"state"),E=P?JSON.parse(decodeURIComponent(P)):null;return E&&"ph_authorize"===E.action?((S=E).source="url",S&&Object.keys(S).length>0&&(E.desiredHash?y.hash=E.desiredHash:w?w.replaceState("",document.title,y.pathname+y.search):y.hash="")):((S=JSON.parse(m.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete S.userIntent),!(!S.token||this.instance.get_config("token")!==S.token)&&(this.loadToolbar(S),!0)}catch(T){return!1}}},{key:"loadToolbar",value:function(y){var m=this;if(window._postHogToolbarLoaded)return!1;window._postHogToolbarLoaded=!0;var w=this.instance.get_config("api_host"),x=3e4*Math.floor(Date.now()/3e4),S="".concat(w).concat(w.endsWith("/")?"":"/","static/toolbar.js?_ts=").concat(x),P=!e9.includes(this.instance.get_config("api_host"))&&this.instance.get_config("advanced_disable_toolbar_metrics"),E=t(t({token:this.instance.get_config("token")},y),{},{apiURL:w},P?{instrument:!1}:{});E.source;var T=l(E,e7);return window.localStorage.setItem("_postHogToolbarParams",JSON.stringify(T)),de(S,function(y){y?er.error("Failed to load toolbar",y):(window.ph_load_toolbar||window.ph_load_editor)(E,m.instance)}),ec(window,"turbolinks:load",function(){window._postHogToolbarLoaded=!1,m.loadToolbar(E)}),!0}},{key:"_loadEditor",value:function(y){return this.loadToolbar(y)}},{key:"maybeLoadEditor",value:function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.history;return this.maybeLoadToolbar(y,m,w)}}]),e}(),tr=function(){function e(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;r(this,e),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=y}return o(e,[{key:"setPollInterval",value:function(y){this._pollInterval=y,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return(new Date).getTime()}}]),e}(),ti=function(y){a(i,tr);var m=f(i);function i(y,w){var x,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;return r(this,i),(x=m.call(this,S)).handlePollRequest=w,x.captureMetrics=y,x}return o(i,[{key:"enqueue",value:function(y,m,w){this.captureMetrics.incr("batch-enqueue"),this._event_queue.push({url:y,data:m,options:w}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var y=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(y._event_queue.length>0){var m=y.formatQueue(),n=function(w){var x=m[w],S=x.url,P=x.data,E=x.options;L(P,function(m,w){P[w].offset=Math.abs(P[w].timestamp-y.getTime()),delete P[w].timestamp}),y.handlePollRequest(S,P,E),y.captureMetrics.incr("batch-requests"),y.captureMetrics.incr("batch-requests-".concat(S.slice(S.length-2))),y.captureMetrics.incr("batch-handle",P.length),y.captureMetrics.incr("batch-handle-".concat(S.slice(S.length-2)),P.length)};for(var w in m)n(w);y._event_queue.length=0,y._empty_queue_count=0}else y._empty_queue_count++;y._empty_queue_count>4&&(y.isPolling=!1,y._empty_queue_count=0),y.isPolling&&y.poll()},this._pollInterval)}},{key:"updateUnloadMetrics",value:function(){var y=this.formatQueue();for(var m in y){var w=y[m],x=w.url,S=w.data;this.captureMetrics.incr("batch-unload-requests"),this.captureMetrics.incr("batch-unload-requests-".concat(x.slice(x.length-2))),this.captureMetrics.incr("batch-unload",S.length),this.captureMetrics.incr("batch-unload-".concat(x.slice(x.length-2)),S.length)}}},{key:"unload",value:function(){var y=this;clearTimeout(this._poller);var m=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var w=Object.values(m);[].concat(h(w.filter(function(y){return 0===y.url.indexOf("/e")})),h(w.filter(function(y){return 0!==y.url.indexOf("/e")}))).map(function(m){var w=m.url,x=m.data,S=m.options;y.handlePollRequest(w,x,t(t({},S),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var y={};return L(this._event_queue,function(m){var w=m.url,x=m.data,S=m.options,P=(S?S._batchKey:null)||w;void 0===y[P]&&(y[P]={data:[],url:w,options:S}),S&&y[P].options&&y[P].options._metrics&&!y[P].options._metrics.rrweb_full_snapshot&&(y[P].options._metrics.rrweb_full_snapshot=S._metrics.rrweb_full_snapshot),y[P].data.push(x)}),y}}]),i}(),to=function(){function e(y){r(this,e),this.enabled=y,this.metrics={}}return o(e,[{key:"incr",value:function(y){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.enabled&&(y="phjs-".concat(y),this.metrics[y]=(this.metrics[y]||0)+m)}},{key:"decr",value:function(y){this.enabled&&(y="phjs-".concat(y),this.metrics[y]=(this.metrics[y]||0)-1)}}]),e}(),ts=Uint8Array,ta=Uint16Array,tc=Uint32Array,tu=new ts([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tl=new ts([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),th=new ts([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zt=function(y,m){for(var w=new ta(31),x=0;x<31;++x)w[x]=m+=1<<y[x-1];var S=new tc(w[30]);for(x=1;x<30;++x)for(var P=w[x];P<w[x+1];++P)S[P]=P-w[x]<<5|x;return[w,S]},td=zt(tu,2),tf=td[0],tp=td[1];tf[28]=258,tp[258]=28;for(var tg=zt(tl,0)[1],tv=new ta(32768),ty=0;ty<32768;++ty){var tm=(43690&ty)>>>1|(21845&ty)<<1;tm=(61680&(tm=(52428&tm)>>>2|(13107&tm)<<2))>>>4|(3855&tm)<<4,tv[ty]=((65280&tm)>>>8|(255&tm)<<8)>>>1}var tn=function(y,m,w){for(var x=y.length,S=0,P=new ta(m);S<x;++S)++P[y[S]-1];var E,T=new ta(m);for(S=0;S<m;++S)T[S]=T[S-1]+P[S-1]<<1;if(w){E=new ta(1<<m);var C=15-m;for(S=0;S<x;++S)if(y[S])for(var O=S<<4|y[S],A=m-y[S],R=T[y[S]-1]++<<A,I=R|(1<<A)-1;R<=I;++R)E[tv[R]>>>C]=O}else for(E=new ta(x),S=0;S<x;++S)E[S]=tv[T[y[S]-1]++]>>>15-y[S];return E},t_=new ts(288);for(ty=0;ty<144;++ty)t_[ty]=8;for(ty=144;ty<256;++ty)t_[ty]=9;for(ty=256;ty<280;++ty)t_[ty]=7;for(ty=280;ty<288;++ty)t_[ty]=8;var tb=new ts(32);for(ty=0;ty<32;++ty)tb[ty]=5;var tw,tk,tx,tS=tn(t_,9,0),tP=tn(tb,5,0),ln=function(y){return(y/8>>0)+(7&y&&1)},dn=function(y,m,w){(null==m||m<0)&&(m=0),(null==w||w>y.length)&&(w=y.length);var x=new(y instanceof ta?ta:y instanceof tc?tc:ts)(w-m);return x.set(y.subarray(m,w)),x},fn=function(y,m,w){w<<=7&m;var x=m/8>>0;y[x]|=w,y[x+1]|=w>>>8},pn=function(y,m,w){w<<=7&m;var x=m/8>>0;y[x]|=w,y[x+1]|=w>>>8,y[x+2]|=w>>>16},hn=function(y,m){for(var w=[],x=0;x<y.length;++x)y[x]&&w.push({s:x,f:y[x]});var S=w.length,P=w.slice();if(!S)return[new ts(0),0];if(1==S){var E=new ts(w[0].s+1);return E[w[0].s]=1,[E,1]}w.sort(function(y,m){return y.f-m.f}),w.push({s:-1,f:25001});var T=w[0],C=w[1],O=0,A=1,R=2;for(w[0]={s:-1,f:T.f+C.f,l:T,r:C};A!=S-1;)T=w[w[O].f<w[R].f?O++:R++],C=w[O!=A&&w[O].f<w[R].f?O++:R++],w[A++]={s:-1,f:T.f+C.f,l:T,r:C};var I=P[0].s;for(x=1;x<S;++x)P[x].s>I&&(I=P[x].s);var M=new ta(I+1),D=_n(w[A-1],M,0);if(D>m){x=0;var j=0,$=D-m,N=1<<$;for(P.sort(function(y,m){return M[m.s]-M[y.s]||y.f-m.f});x<S;++x){var q=P[x].s;if(!(M[q]>m))break;j+=N-(1<<D-M[q]),M[q]=m}for(j>>>=$;j>0;){var V=P[x].s;M[V]<m?j-=1<<m-M[V]++-1:++x}for(;x>=0&&j;--x){var et=P[x].s;M[et]==m&&(--M[et],++j)}D=m}return[new ts(M),D]},_n=function e(y,m,w){return -1==y.s?Math.max(e(y.l,m,w+1),e(y.r,m,w+1)):m[y.s]=w},gn=function(y){for(var m=y.length;m&&!y[--m];);for(var w=new ta(++m),x=0,S=y[0],P=1,s=function(y){w[x++]=y},E=1;E<=m;++E)if(y[E]==S&&E!=m)++P;else{if(!S&&P>2){for(;P>138;P-=138)s(32754);P>2&&(s(P>10?P-11<<5|28690:P-3<<5|12305),P=0)}else if(P>3){for(s(S),--P;P>6;P-=6)s(8304);P>2&&(s(P-3<<5|8208),P=0)}for(;P--;)s(S);P=1,S=y[E]}return[w.subarray(0,x),m]},vn=function(y,m){for(var w=0,x=0;x<m.length;++x)w+=y[x]*m[x];return w},yn=function(y,m,w){var x=w.length,S=ln(m+2);y[S]=255&x,y[S+1]=x>>>8,y[S+2]=255^y[S],y[S+3]=255^y[S+1];for(var P=0;P<x;++P)y[S+P+4]=w[P];return 8*(S+4+x)},mn=function(y,m,w,x,S,P,E,T,C,O,A){fn(m,A++,w),++S[256];for(var R=hn(S,15),I=R[0],M=R[1],D=hn(P,15),j=D[0],$=D[1],N=gn(I),q=N[0],V=N[1],et=gn(j),en=et[0],er=et[1],ei=new ta(19),eo=0;eo<q.length;++eo)ei[31&q[eo]]++;for(eo=0;eo<en.length;++eo)ei[31&en[eo]]++;for(var es=hn(ei,7),ea=es[0],ec=es[1],eu=19;eu>4&&!ea[th[eu-1]];--eu);var el,eh,ed,ef,ep=O+5<<3,eg=vn(S,t_)+vn(P,tb)+E,ev=vn(S,I)+vn(P,j)+E+14+3*eu+vn(ei,ea)+(2*ei[16]+3*ei[17]+7*ei[18]);if(ep<=eg&&ep<=ev)return yn(m,A,y.subarray(C,C+O));if(fn(m,A,1+(ev<eg)),A+=2,ev<eg){el=tn(I,M,0),eh=I,ed=tn(j,$,0),ef=j;var ey=tn(ea,ec,0);fn(m,A,V-257),fn(m,A+5,er-1),fn(m,A+10,eu-4),A+=14;for(eo=0;eo<eu;++eo)fn(m,A+3*eo,ea[th[eo]]);A+=3*eu;for(var em=[q,en],e_=0;e_<2;++e_){var eb=em[e_];for(eo=0;eo<eb.length;++eo){var ew=31&eb[eo];fn(m,A,ey[ew]),A+=ea[ew],ew>15&&(fn(m,A,eb[eo]>>>5&127),A+=eb[eo]>>>12)}}}else el=tS,eh=t_,ed=tP,ef=tb;for(eo=0;eo<T;++eo)if(x[eo]>255){ew=x[eo]>>>18&31;pn(m,A,el[ew+257]),A+=eh[ew+257],ew>7&&(fn(m,A,x[eo]>>>23&31),A+=tu[ew]);var ek=31&x[eo];pn(m,A,ed[ek]),A+=ef[ek],ek>3&&(pn(m,A,x[eo]>>>5&8191),A+=tl[ek])}else pn(m,A,el[x[eo]]),A+=eh[x[eo]];return pn(m,A,el[256]),A+eh[256]},tE=new tc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tT=new ts(0),tC=function(){for(var y=new tc(256),m=0;m<256;++m){for(var w=m,x=9;--x;)w=(1&w&&3988292384)^w>>>1;y[m]=w}return y}(),Sn=function(){var y=4294967295;return{p:function(m){for(var w=y,x=0;x<m.length;++x)w=tC[255&w^m[x]]^w>>>8;y=w},d:function(){return 4294967295^y}}},En=function(y,m,w,x,S){return function(y,m,w,x,S,P){var E=y.length,T=new ts(x+E+5*(1+Math.floor(E/7e3))+S),C=T.subarray(x,T.length-S),O=0;if(!m||E<8)for(var A=0;A<=E;A+=65535){var R=A+65535;R<E?O=yn(C,O,y.subarray(A,R)):(C[A]=P,O=yn(C,O,y.subarray(A,E)))}else{for(var I=tE[m-1],M=I>>>13,D=8191&I,j=(1<<w)-1,$=new ta(32768),N=new ta(j+1),q=Math.ceil(w/3),V=2*q,b=function(m){return(y[m]^y[m+1]<<q^y[m+2]<<V)&j},et=new tc(25e3),en=new ta(288),er=new ta(32),ei=0,eo=0,es=(A=0,0),ea=0,ec=0;A<E;++A){var eu=b(A),el=32767&A,eh=N[eu];if($[el]=eh,N[eu]=el,ea<=A){var ed=E-A;if((ei>7e3||es>24576)&&ed>423){O=mn(y,C,0,et,en,er,eo,es,ec,A-ec,O),es=ei=eo=0,ec=A;for(var ef=0;ef<286;++ef)en[ef]=0;for(ef=0;ef<30;++ef)er[ef]=0}var ep=2,eg=0,ev=D,ey=el-eh&32767;if(ed>2&&eu==b(A-ey))for(var em=Math.min(M,ed)-1,e_=Math.min(32767,A),eb=Math.min(258,ed);ey<=e_&&--ev&&el!=eh;){if(y[A+ep]==y[A+ep-ey]){for(var ew=0;ew<eb&&y[A+ew]==y[A+ew-ey];++ew);if(ew>ep){if(ep=ew,eg=ey,ew>em)break;var ek=Math.min(ey,ew-2),ex=0;for(ef=0;ef<ek;++ef){var eS=A-ey+ef+32768&32767,eP=eS-$[eS]+32768&32767;eP>ex&&(ex=eP,eh=eS)}}}ey+=(el=eh)-(eh=$[el])+32768&32767}if(eg){et[es++]=268435456|tp[ep]<<18|tg[eg];var eE=31&tp[ep],eT=31&tg[eg];eo+=tu[eE]+tl[eT],++en[257+eE],++er[eT],ea=A+ep,++ei}else et[es++]=y[A],++en[y[A]]}}O=mn(y,C,P,et,en,er,eo,es,ec,A-ec,O),P||(O=yn(C,O,tT))}return dn(T,0,x+ln(O)+S)}(y,null==m.level?6:m.level,null==m.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(y.length)))):12+m.mem,w,x,!S)},Fn=function(y,m,w){for(;w;++m)y[m]=w,w>>>=8},xn=function(y,m){var w=m.filename;if(y[0]=31,y[1]=139,y[2]=8,y[8]=m.level<2?4:9==m.level?2:0,y[9]=3,0!=m.mtime&&Fn(y,4,Math.floor(new Date(m.mtime||Date.now())/1e3)),w){y[3]=8;for(var x=0;x<=w.length;++x)y[x+10]=w.charCodeAt(x)}},Pn=function(y){return 10+(y.filename&&y.filename.length+1||0)};function On(y,m){void 0===m&&(m={});var w=Sn(),x=y.length;w.p(y);var S=En(y,m,Pn(m),8),P=S.length;return xn(S,m),Fn(S,P-8,w.d()),Fn(S,P-4,x),S}function In(y,m){var w=y.length;if(!m&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);for(var x=new ts(y.length+(y.length>>>1)),S=0,o=function(y){x[S++]=y},P=0;P<w;++P){if(S+5>x.length){var E=new ts(S+8+(w-P<<1));E.set(x),x=E}var T=y.charCodeAt(P);T<128||m?o(T):T<2048?(o(192|T>>>6),o(128|63&T)):T>55295&&T<57344?(o(240|(T=65536+(1047552&T)|1023&y.charCodeAt(++P))>>>18),o(128|T>>>12&63),o(128|T>>>6&63),o(128|63&T)):(o(224|T>>>12),o(128|T>>>6&63),o(128|63&T))}return dn(x,0,S)}(function(y){y.GZipJS="gzip-js",y.Base64="base64"})(tw||(tw={})),function(y){y.Popover="Popover",y.Button="Button",y.Email="Email",y.FullScreen="Fullscreen"}(tk||(tk={})),function(y){y.Open="open",y.MultipleChoiceSingle="multiple_single",y.MultipleChoiceMulti="multiple_multi",y.NPS="nps",y.Rating="rating",y.Link="link"}(tx||(tx={}));var $n=function(y,m,w){var S=m||{};S.ip=w.ip?1:0,S._=(new Date).getTime().toString(),S.ver=x.LIB_VERSION;var P=y.split("?");if(P.length>1){var E,T=v(P[1].split("&"));try{for(T.s();!(E=T.n()).done;){var C=E.value.split("=")[0];S[C]&&delete S[C]}}catch(O){T.e(O)}finally{T.f()}}var A=y.indexOf("?")>-1?"&":"?";return y+A+function(y){var m,w,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",S=[];return L(y,function(y,x){m=encodeURIComponent(y.toString()),w=encodeURIComponent(x),S[S.length]=w+"="+m}),S.join(x)}(S)},Tn=function e(y,m){if(m.blob&&y.buffer)return new Blob([y.buffer],{type:"text/plain"});if(m.sendBeacon||m.blob){var w=e(y,{method:"POST"});return new Blob([w],{type:"application/x-www-form-urlencoded"})}if("POST"!==m.method)return null;var x,S;return x=Array.isArray(y)||(S=y,"[object Uint8Array]"===Object.prototype.toString.call(S))?"data="+encodeURIComponent(y):"data="+encodeURIComponent(y.data),"compression"in y&&y.compression&&(x+="&compression="+y.compression),x},Mn=function(y){var m=y.url,w=y.data,x=y.headers,S=y.options,P=y.captureMetrics,E=y.callback,T=y.retriesPerformedSoFar,C=y.retryQueue,O=y.onXHRError,A=y.timeout,R=void 0===A?1e4:A,I=new XMLHttpRequest;I.open(S.method||"GET",m,!0);var M=Tn(w,S);P.incr("_send_request"),P.incr("_send_request_inflight"),L(x,function(y,m){I.setRequestHeader(m,y)}),"POST"!==S.method||S.blob||I.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),I.timeout=R,I.withCredentials=!0,I.onreadystatechange=function(){if(4===I.readyState)if(P.incr("xhr-response"),P.incr("xhr-response-".concat(I.status)),P.decr("_send_request_inflight"),200===I.status){if(E){var y;try{y=JSON.parse(I.responseText)}catch(A){return void er.error(A)}E(y)}}else"function"==typeof O&&O(I),[401,403,404,500].indexOf(I.status)<0&&C.enqueue({url:m,data:w,options:S,headers:x,retriesPerformedSoFar:(T||0)+1,callback:E}),E&&E({status:0})},I.send(M)},tO=18e5;var tA=function(y){a(i,tr);var m=f(i);function i(y,w){var x;return r(this,i),(x=m.call(this)).captureMetrics=y,x.isPolling=!1,x.queue=[],x.areWeOnline=!0,x.onXHRError=w,"undefined"!=typeof window&&"onLine"in window.navigator&&(x.areWeOnline=window.navigator.onLine,window.addEventListener("online",function(){x._handleWeAreNowOnline()}),window.addEventListener("offline",function(){x.areWeOnline=!1})),x}return o(i,[{key:"enqueue",value:function(y){var m=y.retriesPerformedSoFar||0;if(!(m>=10)){var w=function(y){var m=3e3*Math.pow(2,y),w=m/2,x=Math.min(tO,m),S=(Math.random()-.5)*(x-w);return Math.ceil(x+S)}(m),x=new Date(Date.now()+w);this.queue.push({retryAt:x,requestData:y}),console.warn("Enqueued failed request for retry in ".concat(w)),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var y=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){y.areWeOnline&&y.queue.length>0&&y.flush(),y.poll()},this._pollInterval)}},{key:"flush",value:function(){var y=new Date(Date.now()),m=this.queue.filter(function(m){return m.retryAt<y});if(m.length>0){this.queue=this.queue.filter(function(m){return m.retryAt>=y});var w,x=v(m);try{for(x.s();!(w=x.n()).done;){var S=w.value.requestData;this._executeXhrRequest(S)}}catch(P){x.e(P)}finally{x.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var y,m=v(this.queue);try{for(m.s();!(y=m.n()).done;){var w=y.value.requestData,S=w.url,P=w.data,E=w.options;try{window.navigator.sendBeacon(S,Tn(P,t(t({},E),{},{sendBeacon:!0})))}catch(T){x.DEBUG&&console.error(T)}}}catch(C){m.e(C)}finally{m.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(y){var m=y.url,w=y.data,x=y.options,S=y.headers,P=y.callback,E=y.retriesPerformedSoFar;Mn({url:m,data:w||{},options:x||{},headers:S||{},retriesPerformedSoFar:E||0,callback:P,captureMetrics:this.captureMetrics,retryQueue:this,onXHRError:this.onXHRError})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),i}(),tR=1800,tI=60,tF=864e5,tM=function(){function e(y,m){r(this,e),this.config=y,this.persistence=m,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null;var w=y.persistence_name||y.token,x=y.session_idle_timeout_seconds||tR;if("number"!=typeof x?(console.warn("[PostHog] session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),x=tR):x>tR?console.warn("[PostHog] session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):x<tI&&console.warn("[PostHog] session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."),this._sessionTimeoutMs=1e3*Math.min(Math.max(x,tI),tR),this._window_id_storage_key="ph_"+w+"_window_id",this._primary_window_exists_storage_key="ph_"+w+"_primary_window_exists",this._canUseSessionStorage()){var S=eb.parse(this._window_id_storage_key),P=eb.parse(this._primary_window_exists_storage_key);S&&!P?this._windowId=S:eb.remove(this._window_id_storage_key),eb.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return o(e,[{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&eb.is_supported()}},{key:"_setWindowId",value:function(y){y!==this._windowId&&(this._windowId=y,this._canUseSessionStorage()&&eb.set(this._window_id_storage_key,y))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?eb.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(y,m,w){y===this._sessionId&&m===this._sessionActivityTimestamp&&w===this._sessionStartTimestamp||(this._sessionStartTimestamp=w,this._sessionActivityTimestamp=m,this._sessionId=y,this.persistence.register(s({},eC,[m,y,w])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var y=this.persistence.props[eC];return Array.isArray(y)&&2===y.length&&y.push(y[0]),y||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var y=this;window.addEventListener("beforeunload",function(){y._canUseSessionStorage()&&eb.remove(y._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var y=arguments.length>0&&void 0!==arguments[0]&&arguments[0],m=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),w=p(this._getSessionId(),3),x=w[0],S=w[1],P=w[2],E=this._getWindowId(),T=P&&P>0&&Math.abs(m-P)>tF;!S||!y&&Math.abs(m-x)>this._sessionTimeoutMs||T?(S=ea(),E=ea(),P=m):E||(E=ea());var C=0===x||!y||T?m:x,O=0===P?(new Date).getTime():P;return this._setWindowId(E),this._setSessionId(S,C,O),{sessionId:S,windowId:E,sessionStartTimestamp:O}}}]),e}(),tD=o(function e(y,m,w,x){r(this,e),this.name="posthog-js",this.setupOnce=function(S){S(function(S){var P,E,T,C,O;if("error"!==S.level||!y.__loaded)return S;S.tags||(S.tags={});var A=y.config.ui_host||y.config.api_host;S.tags["PostHog Person URL"]=A+"/person/"+y.get_distinct_id(),y.sessionRecordingStarted()&&(S.tags["PostHog Recording URL"]=y.get_session_replay_url({withTimestamp:!0}));var R=(null===(P=S.exception)||void 0===P?void 0:P.values)||[],I={$exception_message:null===(E=R[0])||void 0===E?void 0:E.value,$exception_type:null===(T=R[0])||void 0===T?void 0:T.type,$exception_personURL:A+"/person/"+y.get_distinct_id(),$sentry_event_id:S.event_id,$sentry_exception:S.exception,$sentry_exception_message:null===(C=R[0])||void 0===C?void 0:C.value,$sentry_exception_type:null===(O=R[0])||void 0===O?void 0:O.type,$sentry_tags:S.tags};return m&&w&&(I.$sentry_url=(x||"https://sentry.io/organizations/")+m+"/issues/?project="+w+"&query="+S.event_id),y.capture("$exception",I),S})}}),Bn=function(y){Promise&&Promise.resolve||console.warn("This browser does not have Promise support, and can not use the segment integration");var t=function(m,w){m.event.userId||m.event.anonymousId===y.get_distinct_id()||y.reset(),m.event.userId&&m.event.userId!==y.get_distinct_id()&&(y.register({distinct_id:m.event.userId}),y.reloadFeatureFlags());var x=y._calculate_event_properties(w,m.event.properties);return m.event.properties=Object.assign({},x,m.event.properties),m};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(y){return t(y,y.event.event)},page:function(y){return t(y,"$pageview")},identify:function(y){return t(y,"$identify")},screen:function(y){return t(y,"$screen")}}},tj=function(){function e(){r(this,e),s(this,"_seenFirstPageView",!1)}return o(e,[{key:"onPageview",value:function(){this._seenFirstPageView&&(this._pageViewId=ea()),this._seenFirstPageView=!0}},{key:"getPageViewId",value:function(){return this._pageViewId||(this._pageViewId=ea()),this._pageViewId}}]),e}();function Ln(y){return"undefined"!=typeof Event&&Un(y,Event)}function Un(y,m){try{return y instanceof m}catch(w){return!1}}function Vn(y){return null===y||"object"!==n(y)&&"function"!=typeof y}function Gn(y,m){return Object.prototype.toString.call(y)==="[object ".concat(m,"]")}function Wn(y){return Gn(y,"DOMError")}var tB=/\(error: (.*)\)/,t$=50,tL="?";function Xn(y,m,w,x){var S={filename:y,function:m,in_app:!0};return void 0!==w&&(S.lineno=w),void 0!==x&&(S.colno=x),S}var tN=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,tH=/\((\S*)(?::(\d+))(?::(\d+))\)/,tK=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tq=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,tU=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var tW=(function(){for(var y=arguments.length,m=new Array(y),w=0;w<y;w++)m[w]=arguments[w];var x=m.sort(function(y,m){return y[0]-m[0]}).map(function(y){return y[1]});return function(y){for(var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,w=[],S=y.split("\n"),P=m;P<S.length;P++){var E=S[P];if(!(E.length>1024)){var T=tB.test(E)?E.replace(tB,"$1"):E;if(!T.match(/\S*Error: /)){var C,O=v(x);try{for(O.s();!(C=O.n()).done;){var A=(0,C.value)(T);if(A){w.push(A);break}}}catch(R){O.e(R)}finally{O.f()}if(w.length>=t$)break}}}return function(y){if(!y.length)return[];var m=y.slice(0,t$);return m.reverse(),m.map(function(y){return t(t({},y),{},{filename:y.filename||m[m.length-1].filename,function:y.function||"?"})})}(w)}}).apply(void 0,[[30,function(y){var m=tN.exec(y);if(m){if(m[2]&&0===m[2].indexOf("eval")){var w=tH.exec(m[2]);w&&(m[2]=w[1],m[3]=w[2],m[4]=w[3])}var x=p(rr(m[1]||tL,m[2]),2),S=x[0];return Xn(x[1],S,m[3]?+m[3]:void 0,m[4]?+m[4]:void 0)}}],[50,function(y){var m=tK.exec(y);if(m){if(m[3]&&m[3].indexOf(" > eval")>-1){var w=tq.exec(m[3]);w&&(m[1]=m[1]||"eval",m[3]=w[1],m[4]=w[2],m[5]="")}var x=m[3],S=m[1]||tL,P=p(rr(S,x),2);return S=P[0],Xn(x=P[1],S,m[4]?+m[4]:void 0,m[5]?+m[5]:void 0)}}],[40,function(y){var m=tU.exec(y);return m?Xn(m[2],m[1]||tL,+m[3],m[4]?+m[4]:void 0):void 0}]]),rr=function(y,m){var w=-1!==y.indexOf("safari-extension"),x=-1!==y.indexOf("safari-web-extension");return w||x?[-1!==y.indexOf("@")?y.split("@")[0]:tL,w?"safari-extension:".concat(m):"safari-web-extension:".concat(m)]:[y,m]},tV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,tz=/Minified React error #\d+;/i;function sr(y){var m=y.stacktrace||y.stack||"",w=function(y){if(y){if("number"==typeof y.framesToPop)return y.framesToPop;if(tz.test(y.message))return 1}return 0}(y);try{return tW(m,w)}catch(x){}return[]}function ar(y){var m=sr(y);return{$exception_type:y.name,$exception_message:y.message,$exception_stack_trace_raw:JSON.stringify(m)}}function cr(y){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,w=Object.keys(y);if(w.sort(),!w.length)return"[object has no keys]";for(var x=w.length;x>0;x--){var S=w.slice(0,x).join(", ");if(!(S.length>m))return x===w.length||S.length<=m?S:"".concat(S.slice(0,m),"...")}return""}function ur(y){var m=p(y,5),w=m[0],x=m[1],S=m[2],P=m[3],E=m[4],T={};if(void 0===E&&"string"==typeof w){var C="Error",O=w,A=w.match(tV);A&&(C=A[1],O=A[2]),T={$exception_type:C,$exception_message:O}}var R=E||w;if(Wn(R)||function(y){return Gn(y,"DOMException")}(R)){var I=R;if(function(y){return"stack"in y}(R))T=ar(R);else{var M=I.name||(Wn(I)?"DOMError":"DOMException"),D=I.message?"".concat(M,": ").concat(I.message):M;T=function(y){return{$exception_type:"Error",$exception_message:y}}(D),T.$exception_type=Wn(I)?"DOMError":"DOMException",T.$exception_message=T.$exception_message||D}"code"in I&&(T.$exception_DOMException_code="".concat(I.code))}else if(function(y){return Gn(y,"ErrorEvent")}(R)&&R.error)T=ar(R.error);else if(function(y){switch(Object.prototype.toString.call(y)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Un(y,Error)}}(R))T=ar(R);else if(function(y){return Gn(y,"Object")}(R)||Ln(R))T=function(y){return{$exception_type:Ln(y)?y.constructor.name:"Error",$exception_message:"Non-Error ".concat("exception"," captured with keys: ",cr(y))}}(R),T.$exception_is_synthetic=!0;else T.$exception_type=T.$exception_type||"Error",T.$exception_message=T.$exception_message||R,T.$exception_is_synthetic=!0;return t(t(t(t({},T),{},{$exception_type:T.$exception_type||"UnknownErrorType",$exception_message:T.$exception_message||""},x?{$exception_source:x}:{}),S?{$exception_lineno:S}:{}),P?{$exception_colno:P}:{})}var tG,tQ,tZ,tJ=function(){function e(y){r(this,e),s(this,"originalOnErrorHandler",void 0),s(this,"originalOnUnhandledRejectionHandler",void 0),s(this,"errorsToIgnore",[]),this.instance=y}return o(e,[{key:"debugLog",value:function(){if(this.instance.get_config("debug")){for(var y,m=arguments.length,w=new Array(m),x=0;x<m;x++)w[x]=arguments[x];(y=console).log.apply(y,["PostHog.js [PostHog.ExceptionObserver]"].concat(w))}}},{key:"startCapturing",value:function(){var y;if(this.isEnabled()&&(null===(y=M.onerror)||void 0===y||!y.__POSTHOG_INSTRUMENTED__))try{this.originalOnErrorHandler=M.onerror,M.onerror=(function(){for(var y=arguments.length,m=new Array(y),w=0;w<y;w++)m[w]=arguments[w];return this.captureException(m),!!this.originalOnErrorHandler&&this.originalOnErrorHandler.apply(this,m)}).bind(this),M.onerror.__POSTHOG_INSTRUMENTED__=!0,this.originalOnUnhandledRejectionHandler=M.onunhandledrejection,M.onunhandledrejection=(function(){for(var y=arguments.length,m=new Array(y),w=0;w<y;w++)m[w]=arguments[w];var x=function(y){var m=p(y,1)[0],w=m;try{"reason"in m?w=m.reason:"detail"in m&&"reason"in m.detail&&(w=m.detail.reason)}catch(x){}var S={};return(S=Vn(w)?{$exception_message:"Non-Error promise rejection captured with value: ".concat(String(w))}:ur([w])).$exception_handled=!1,t(t({},S),{},{$exception_type:S.$exception_type="UnhandledRejection",$exception_message:S.$exception_message=S.$exception_message||m.reason||String(w)})}(m);return this.sendExceptionEvent(x),!this.originalOnUnhandledRejectionHandler||this.originalOnUnhandledRejectionHandler.apply(M,m)}).bind(this),M.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0}catch(m){console.error("PostHog failed to start exception autocapture",m),this.stopCapturing()}}},{key:"stopCapturing",value:function(){var y,m;void 0!==this.originalOnErrorHandler&&(M.onerror=this.originalOnErrorHandler,this.originalOnErrorHandler=null),null===(y=M.onerror)||void 0===y||delete y.__POSTHOG_INSTRUMENTED__,void 0!==this.originalOnUnhandledRejectionHandler&&(M.onunhandledrejection=this.originalOnUnhandledRejectionHandler,this.originalOnUnhandledRejectionHandler=null),null===(m=M.onunhandledrejection)||void 0===m||delete m.__POSTHOG_INSTRUMENTED__}},{key:"isCapturing",value:function(){var y;return!(null===(y=M.onerror)||void 0===y||!y.__POSTHOG_INSTRUMENTED__)}},{key:"isEnabled",value:function(){var y;return null!==(y=this.remoteEnabled)&&void 0!==y&&y}},{key:"afterDecideResponse",value:function(y){var m=y.autocaptureExceptions;if(this.remoteEnabled=!!m||!1,!Vn(m)&&"errors_to_ignore"in m&&Array.isArray(m.errors_to_ignore)){var w=m.errors_to_ignore;this.errorsToIgnore=w.map(function(y){return new RegExp(y)})}this.isEnabled()?(this.startCapturing(),this.debugLog("Remote config for exception autocapture is enabled, starting",m)):this.debugLog("Remote config for exception autocapture is disabled, not starting",m)}},{key:"captureException",value:function(y,m){var w=ur(y);if(this.errorsToIgnore.some(function(y){return y.test(w.$exception_message||"")}))this.debugLog("Ignoring exception based on remote config",w);else{var x=t(t({},m),w),S=this.instance.get_config("ui_host")||this.instance.get_config("api_host");w.$exception_personURL=S+"/person/"+this.instance.get_distinct_id(),this.sendExceptionEvent(x)}}},{key:"sendExceptionEvent",value:function(y){this.instance.capture("$exception",y,{transport:"XHR",method:"POST",endpoint:"/e/",_noTruncate:!0,_batchKey:"exceptionEvent"})}}]),e}(),tX=function(){function e(y){r(this,e),this.instance=y}return o(e,[{key:"getSurveys",value:function(y){var m=this,w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=this.instance.get_property(eF);if(x&&!w)return y(x);this.instance._send_request("".concat(this.instance.get_config("api_host"),"/api/surveys/?token=").concat(this.instance.get_config("token")),{},{method:"GET"},function(w){var x=w.surveys;return m.instance.persistence.register(s({},eF,x)),y(x)})}},{key:"getActiveMatchingSurveys",value:function(y){var m=this,w=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys(function(w){var x=w.filter(function(y){return!(!y.start_date||y.end_date)}).filter(function(y){var m,w;if(!y.conditions)return!0;var x=null===(m=y.conditions)||void 0===m||!m.url||window.location.href.indexOf(y.conditions.url)>-1,S=null===(w=y.conditions)||void 0===w||!w.selector||document.querySelector(y.conditions.selector);return x&&S}).filter(function(y){if(!y.linked_flag_key&&!y.targeting_flag_key)return!0;var w=!y.linked_flag_key||m.instance.featureFlags.isFeatureEnabled(y.linked_flag_key),x=!y.targeting_flag_key||m.instance.featureFlags.isFeatureEnabled(y.targeting_flag_key);return w&&x});return y(x)},w)}}]),e}();!function(y){y[y.INIT_MODULE=0]="INIT_MODULE",y[y.INIT_SNIPPET=1]="INIT_SNIPPET"}(tG||(tG={}));var _r=function(){},tY={},t0="posthog",t1=M.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,t2=!t1&&-1===$.indexOf("MSIE")&&-1===$.indexOf("Mozilla"),br=function(){var y,m,w;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:-1===(null==j||null===(y=j.location)||void 0===y||null===(m=y.hostname)||void 0===m?void 0:m.indexOf("herokuapp.com")),persistence:"cookie",persistence_name:"",cookie_name:"",loaded:_r,store_google:!0,custom_campaign_params:[],save_referrer:!0,test:!1,verbose:!1,capture_pageview:!0,capture_pageleave:!0,debug:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==M||null===(w=M.location)||void 0===w?void 0:w.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(y){var m="Bad HTTP status: "+y.status+" "+y.statusText;console.error(m)},get_device_id:function(y){return y},_onCapture:_r,_capture_metrics:!1,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},wr=function(y,m,w,S){var P,E=w!==t0&&tZ?w?tZ[w]:void 0:tZ,T={initComplete:!1,syncCode:!1},a=function(y){return function(m){T[y]||(T[y]=!0,T.initComplete&&T.syncCode&&(null==S||S(m)))}};if(E&&tQ===tG.INIT_MODULE)P=E;else{if(E&&!ei(E))return void console.error("You have already initialized "+w);P=new t3}if(P._init(y,m,w,a("initComplete")),P.toolbar.maybeLoadToolbar(),P.sessionRecording=new e2(P),P.sessionRecording.startRecordingIfEnabled(),P.webPerformance=new e4(P),P.webPerformance.startObservingIfEnabled(),P.exceptionAutocapture=new tJ(P),P.__autocapture=P.get_config("autocapture"),eL._setIsAutocaptureEnabled(P),eL._isAutocaptureEnabled){P.__autocapture=P.get_config("autocapture");eL.enabledForProject(P.get_config("token"),100,100)?eL.isBrowserSupported()?eL.init(P):(P.__autocapture=!1,er.log("Disabling Automatic Event Collection because this browser is not supported")):(P.__autocapture=!1,er.log("Not in active bucket: disabling Automatic Event Collection."))}return x.DEBUG=x.DEBUG||P.get_config("debug"),void 0!==E&&ei(E)&&(P._execute_array.call(P.people,E.people),P._execute_array(E)),a("syncCode")(P),P},t3=function(){function e(){var y=this;r(this,e),this.config=br(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=tD,this.segmentIntegration=function(){return Bn(y)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.people=new eK(this),this.featureFlags=new eV(this),this.toolbar=new te(this),this.pageViewIdManager=new tj,this.surveys=new tX(this),this._captureMetrics=void 0,this._requestQueue=void 0,this._retryQueue=void 0,this.persistence=void 0,this.sessionPersistence=void 0,this.sessionManager=void 0}return o(e,[{key:"init",value:function(y,m,w){if(Q(w))console.error("You must name your new library: init(token, config, name)");else{if(w!==t0){var x=wr(y,m,w,function(y){tZ[w]=y,y._loaded()});return tZ[w]=x,x}console.error("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(y){var m,w,x=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},P=arguments.length>2?arguments[2]:void 0,E=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var T,C={segmentRegister:!1,syncCode:!1},l=function(y){return function(){C[y]||(C[y]=!0,C.segmentRegister&&C.syncCode&&(null==E||E(x)))}};this.set_config(U({},br(),S,{name:P,token:y,callback_fn:(P===t0?P:t0+"."+P)+"._jsc"})),this._jsc=function(){},(null!=M&&null!==(m=M.rrweb)&&void 0!==m&&m.record||null!=M&&M.rrwebRecord)&&(this.__loaded_recorder_version=null==M||null===(T=M.rrweb)||void 0===T?void 0:T.version);if(this._captureMetrics=new to(this.get_config("_capture_metrics")),this._requestQueue=new ti(this._captureMetrics,this._handle_queued_event.bind(this)),this._retryQueue=new tA(this._captureMetrics,this.get_config("on_xhr_error")),this.__captureHooks=[],this.__request_queue=[],this.persistence=new e$(this.config),this.sessionManager=new tM(this.config,this.persistence),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new e$(t(t({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),S.segment?(this.config.get_device_id=function(){return S.segment.user().anonymousId()},S.segment.user().id()&&(this.register({distinct_id:S.segment.user().id()}),this.persistence.set_user_state("identified")),S.segment.register(this.segmentIntegration()).then(l("segmentRegister"))):l("segmentRegister")(),void 0!==(null===(w=S.bootstrap)||void 0===w?void 0:w.distinctID)){var O,A,R=this.get_config("get_device_id")(ea()),I=null!==(O=S.bootstrap)&&void 0!==O&&O.isIdentifiedID?R:S.bootstrap.distinctID;this.persistence.set_user_state(null!==(A=S.bootstrap)&&void 0!==A&&A.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:S.bootstrap.distinctID,$device_id:I})}if(this._hasBootstrappedFeatureFlags()){var D,j,$=Object.keys((null===(D=S.bootstrap)||void 0===D?void 0:D.featureFlags)||{}).filter(function(y){var m,w;return!(null===(m=S.bootstrap)||void 0===m||null===(w=m.featureFlags)||void 0===w||!w[y])}).reduce(function(y,m){var w,x;return y[m]=(null===(w=S.bootstrap)||void 0===w||null===(x=w.featureFlags)||void 0===x?void 0:x[m])||!1,y},{}),N=Object.keys((null===(j=S.bootstrap)||void 0===j?void 0:j.featureFlagPayloads)||{}).filter(function(y){return $[y]}).reduce(function(y,m){var w,x,P,E;null!==(w=S.bootstrap)&&void 0!==w&&null!==(x=w.featureFlagPayloads)&&void 0!==x&&x[m]&&(y[m]=null===(P=S.bootstrap)||void 0===P||null===(E=P.featureFlagPayloads)||void 0===E?void 0:E[m]);return y},{});this.featureFlags.receivedFeatureFlags({featureFlags:$,featureFlagPayloads:N})}if(!this.get_distinct_id()){var q=this.get_config("get_device_id")(ea());this.register_once({distinct_id:q,$device_id:q},""),this.persistence.set_user_state("anonymous")}M.addEventListener&&M.addEventListener("onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),l("syncCode")()}},{key:"_loaded",value:function(){this.featureFlags.setReloadingPaused(!0);try{this.get_config("loaded")(this)}catch(y){console.error("`loaded` function failed",y)}this._start_queue_if_opted_in(),this.get_config("capture_pageview")&&this.capture("$pageview",{},{send_instantly:!0}),this.get_config("advanced_disable_decide")||new e8(this).call(),this.featureFlags.resetRequestQueue(),this.featureFlags.setReloadingPaused(!1)}},{key:"_start_queue_if_opted_in",value:function(){this.has_opted_out_capturing()||this.get_config("request_batching")&&this._requestQueue.poll()}},{key:"_dom_loaded",value:function(){var y=this;this.has_opted_out_capturing()||H(this.__request_queue,function(m){y._send_request.apply(y,h(m))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(y,m){if(Q(y))return null;if(t1)return function(w){y(w,m)};var w=this._jsc,x=""+Math.floor(1e8*Math.random()),S=this.get_config("callback_fn")+"["+x+"]";return w[x]=function(S){delete w[x],y(S,m)},S}},{key:"_handle_unload",value:function(){this.get_config("request_batching")?(this.get_config("capture_pageview")&&this.get_config("capture_pageleave")&&this.capture("$pageleave"),this.get_config("_capture_metrics")&&(this._requestQueue.updateUnloadMetrics(),this.capture("$capture_metrics",this._captureMetrics.metrics)),this._requestQueue.unload(),this._retryQueue.unload()):this.get_config("capture_pageview")&&this.get_config("capture_pageleave")&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(y,m,w){var x=JSON.stringify(m);this.__compress_and_send_json_request(y,x,w||tY,_r)}},{key:"__compress_and_send_json_request",value:function(y,m,w,x){var S=function(y,m,w){return y===tw.GZipJS?[On(In(m),{mtime:0}),t(t({},w),{},{blob:!0,urlQueryArgs:{compression:tw.GZipJS}})]:[{data:re(m)},w]}(this.compression[tw.GZipJS]?tw.GZipJS:tw.Base64,m,w),P=p(S,2),E=P[0],T=P[1];this._send_request(y,E,T,x)}},{key:"_send_request",value:function(y,m,w,x){if(t2)this.__request_queue.push([y,m,w,x]);else{var S={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")};w=U(S,w||{}),t1||(w.method="GET");var P="sendBeacon"in M.navigator&&"sendBeacon"===w.transport;if(y=$n(y,w.urlQueryArgs||{},{ip:this.get_config("ip")}),P)try{M.navigator.sendBeacon(y,Tn(m,t(t({},w),{},{sendBeacon:!0})))}catch(E){this.get_config("debug")&&console.error(E)}else if(t1)try{Mn({url:y,data:m,headers:this.get_config("xhr_headers"),options:w,captureMetrics:this._captureMetrics,callback:x,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.get_config("on_xhr_error")})}catch(T){console.error(T)}else{var C,O=j.createElement("script");O.type="text/javascript",O.async=!0,O.defer=!0,O.src=y;var A=j.getElementsByTagName("script")[0];null===(C=A.parentNode)||void 0===C||C.insertBefore(O,A)}}}},{key:"_execute_array",value:function(y){var m,w=this,x=[],S=[],P=[];H(y,function(y){y&&(m=y[0],ei(m)?P.push(y):"function"==typeof y?y.call(w):ei(y)&&"alias"===m?x.push(y):ei(y)&&-1!==m.indexOf("capture")&&"function"==typeof w[m]?P.push(y):S.push(y))});var s=function(y,m){H(y,function(y){if(ei(y[0])){var w=m;L(y,function(y){w=w[y[0]].apply(w,y.slice(1))})}else this[y[0]].apply(this,y.slice(1))},m)};s(x,this),s(S,this),s(P,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var y,m;return(null===(y=this.config.bootstrap)||void 0===y?void 0:y.featureFlags)&&Object.keys(null===(m=this.config.bootstrap)||void 0===m?void 0:m.featureFlags).length>0||!1}},{key:"push",value:function(y){this._execute_array([y])}},{key:"captureException",value:function(y,m){var w;null===(w=this.exceptionAutocapture)||void 0===w||w.captureException([y.name,void 0,void 0,void 0,y],m)}},{key:"capture",value:function(y,m){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tY;if(this.__loaded&&!lt(this,!1)){this._captureMetrics.incr("capture"),"$snapshot"===y&&this._captureMetrics.incr("snapshot");var x=(w=w||tY).transport;if(x&&(w.transport=x),Q(y)||"string"!=typeof y)console.error("No event name provided to posthog.capture");else if(!ae($)){this.sessionPersistence.update_search_keyword(),this.get_config("store_google")&&this.sessionPersistence.update_campaign_params(),this.get_config("save_referrer")&&this.sessionPersistence.update_referrer_info();var S={uuid:ea("v7"),event:y,properties:this._calculate_event_properties(y,m||{})};"$identify"===y&&(S.$set=w.$set,S.$set_once=w.$set_once),(S=ne(S,w._noTruncate?null:this.get_config("properties_string_max_length"))).timestamp=w.timestamp||new Date,this.get_config("debug")&&er.log("PostHog.js send",S);var P=JSON.stringify(S),E=this.get_config("api_host")+(w.endpoint||"/e/"),T=w!==tY;return!this.get_config("request_batching")||T&&!w._batchKey||w.send_instantly?this.__compress_and_send_json_request(E,P,w):this._requestQueue.enqueue(E,S,w),this._invokeCaptureHooks(y,S),S}}}},{key:"_addCaptureHook",value:function(y){this.__captureHooks.push(y)}},{key:"_invokeCaptureHooks",value:function(y,m){this.config._onCapture(y,m),L(this.__captureHooks,function(m){return m(y)})}},{key:"_calculate_event_properties",value:function(y,m){var w,x=this.persistence.remove_event_timer(y),S=t({},m);if(S.token=this.get_config("token"),"$snapshot"===y){var P=t(t({},this.persistence.properties()),this.sessionPersistence.properties());return S.distinct_id=P.distinct_id,S}var E=eu.properties();if(this.sessionManager){var T=this.sessionManager.checkAndGetSessionAndWindowId(),C=T.sessionId,O=T.windowId;S.$session_id=C,S.$window_id=O}if(null!==(w=this.webPerformance)&&void 0!==w&&w.isEnabled&&("$pageview"===y&&this.pageViewIdManager.onPageview(),S=U(S,{$pageview_id:this.pageViewIdManager.getPageViewId()})),"$performance_event"===y){var A=this.persistence.properties();return S.distinct_id=A.distinct_id,S.$current_url=E.$current_url,S}if(void 0!==x){var R=(new Date).getTime()-x;S.$duration=parseFloat((R/1e3).toFixed(3))}S=U({},eu.properties(),this.persistence.properties(),this.sessionPersistence.properties(),S);var I=this.get_config("property_blacklist");ei(I)?L(I,function(y){delete S[y]}):console.error("Invalid value for property_blacklist config: "+I);var M=this.get_config("sanitize_properties");return M&&(S=M(S,y)),S}},{key:"register",value:function(y,m){this.persistence.register(y,m)}},{key:"register_once",value:function(y,m,w){this.persistence.register_once(y,m,w)}},{key:"register_for_session",value:function(y){this.sessionPersistence.register(y)}},{key:"unregister",value:function(y){this.persistence.unregister(y)}},{key:"unregister_for_session",value:function(y){this.sessionPersistence.unregister(y)}},{key:"_register_single",value:function(y,m){this.register(s({},y,m))}},{key:"getFeatureFlag",value:function(y,m){return this.featureFlags.getFeatureFlag(y,m)}},{key:"getFeatureFlagPayload",value:function(y){var m=this.featureFlags.getFeatureFlagPayload(y);try{return JSON.parse(m)}catch(w){return m}}},{key:"isFeatureEnabled",value:function(y,m){return this.featureFlags.isFeatureEnabled(y,m)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(y,m){this.featureFlags.updateEarlyAccessFeatureEnrollment(y,m)}},{key:"getEarlyAccessFeatures",value:function(y){var m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(y,m)}},{key:"onFeatureFlags",value:function(y){return this.featureFlags.onFeatureFlags(y)}},{key:"getSurveys",value:function(y){var m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(y,m)}},{key:"getActiveMatchingSurveys",value:function(y){var m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(y,m)}},{key:"identify",value:function(y,m,w){if(y){this._captureMetrics.incr("identify");var x=this.get_distinct_id();if(this.register({$user_id:y}),!this.get_property("$device_id")){var S=x;this.register_once({$had_persisted_distinct_id:!0,$device_id:S},"")}y!==x&&y!==this.get_property(ek)&&(this.unregister(ek),this.register({distinct_id:y}));var P="anonymous"===this.persistence.get_user_state();y!==x&&P?(this.persistence.set_user_state("identified"),this.capture("$identify",{distinct_id:y,$anon_distinct_id:x},{$set:m||{},$set_once:w||{}}),this.featureFlags.setAnonymousDistinctId(x)):(m&&this.people.set(m),w&&this.people.set_once(w)),y!==x&&(this.reloadFeatureFlags(),this.unregister(eM))}else console.error("Unique user id has not been set in posthog.identify")}},{key:"group",value:function(y,m,w){if(y&&m){this._captureMetrics.incr("group");var x=this.getGroups();x[y]!==m&&this.resetGroupPropertiesForFlags(y),this.register({$groups:t(t({},x),{},s({},y,m))}),w&&(this.capture("$groupidentify",{$group_type:y,$group_key:m,$group_set:w}),this.setGroupPropertiesForFlags(s({},y,w))),x[y]===m||w||this.reloadFeatureFlags()}else console.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(y){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setPersonPropertiesForFlags(y,m)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(y){var m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setGroupPropertiesForFlags(y,m)}},{key:"resetGroupPropertiesForFlags",value:function(y){this.featureFlags.resetGroupPropertiesForFlags(y)}},{key:"reset",value:function(y){var m=this.get_property("$device_id");this.persistence.clear(),this.sessionPersistence.clear(),this.persistence.set_user_state("anonymous"),this.sessionManager.resetSessionId();var w=this.get_config("get_device_id")(ea());this.register_once({distinct_id:w,$device_id:y?w:m},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){return this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionId}},{key:"get_session_replay_url",value:function(y){var m=this.config.ui_host||this.config.api_host,w=this.sessionManager.checkAndGetSessionAndWindowId(!0),x=w.sessionId,S=w.sessionStartTimestamp,P=m+"/replay/"+x;if(null!=y&&y.withTimestamp&&S){var E,T=null!==(E=y.timestampLookBack)&&void 0!==E?E:10;if(!S)return P;var C=Math.max(Math.floor(((new Date).getTime()-S)/1e3)-T,0);P+="?t=".concat(C)}return P}},{key:"alias",value:function(y,m){return y===this.get_property(ew)?(er.critical("Attempting to create alias for existing People user - aborting."),-2):(Q(m)&&(m=this.get_distinct_id()),y!==m?(this._register_single(ek,y),this.capture("$create_alias",{alias:y,distinct_id:m})):(console.error("alias matches current distinct_id - skipping api call."),this.identify(y),-1))}},{key:"set_config",value:function(y){var m=t({},this.config);z(y)&&(U(this.config,y),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),this.sessionPersistence&&this.sessionPersistence.update_config(this.config),eg.is_supported()&&"true"===eg.get("ph_debug")&&(this.config.debug=!0),this.get_config("debug")&&(x.DEBUG=!0),this.sessionRecording&&void 0!==y.disable_session_recording&&m.disable_session_recording!==y.disable_session_recording&&(y.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var y;return!(null===(y=this.sessionRecording)||void 0===y||!y.started())}},{key:"loadToolbar",value:function(y){return this.toolbar.loadToolbar(y)}},{key:"get_config",value:function(y){var m;return null===(m=this.config)||void 0===m?void 0:m[y]}},{key:"get_property",value:function(y){return this.persistence.props[y]}},{key:"getSessionProperty",value:function(y){return this.sessionPersistence.props[y]}},{key:"toString",value:function(){var y,m=null!==(y=this.get_config("name"))&&void 0!==y?y:t0;return m!==t0&&(m=t0+"."+m),m}},{key:"_gdpr_init",value:function(){"localStorage"===this.get_config("opt_out_capturing_persistence_type")&&eg.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_capturing()&&(this.get_config("opt_out_capturing_by_default")||ef.get("ph_optout"))&&(ef.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.get_config("opt_out_persistence_by_default")}))}},{key:"_gdpr_update_persistence",value:function(y){var m;if(y&&y.clear_persistence)m=!0;else{if(!y||!y.enable_persistence)return;m=!1}this.get_config("disable_persistence")||this.persistence.disabled===m||this.persistence.set_disabled(m),this.get_config("disable_persistence")||this.sessionPersistence.disabled===m||this.sessionPersistence.set_disabled(m)}},{key:"_gdpr_call_func",value:function(y,m){return m=U({capture:this.capture.bind(this),persistence_type:this.get_config("opt_out_capturing_persistence_type"),cookie_prefix:this.get_config("opt_out_capturing_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),secure_cookie:this.get_config("secure_cookie")},m||{}),eg.is_supported()||"localStorage"!==m.persistence_type||(m.persistence_type="cookie"),y(this.get_config("token"),{capture:m.capture,captureEventName:m.capture_event_name,captureProperties:m.capture_properties,persistenceType:m.persistence_type,persistencePrefix:m.cookie_prefix,cookieExpiration:m.cookie_expiration,crossSubdomainCookie:m.cross_subdomain_cookie,secureCookie:m.secure_cookie})}},{key:"opt_in_capturing",value:function(y){y=U({enable_persistence:!0},y||{}),this._gdpr_call_func(tt,y),this._gdpr_update_persistence(y)}},{key:"opt_out_capturing",value:function(y){var m=U({clear_persistence:!0},y||{});this._gdpr_call_func(nt,m),this._gdpr_update_persistence(m)}},{key:"has_opted_in_capturing",value:function(y){return this._gdpr_call_func(rt,y)}},{key:"has_opted_out_capturing",value:function(y){return this._gdpr_call_func(it,y)}},{key:"clear_opt_in_out_capturing",value:function(y){var m=U({enable_persistence:!0},null!=y?y:{});this._gdpr_call_func(ot,m),this._gdpr_update_persistence(m)}},{key:"debug",value:function(y){!1===y?(M.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(M.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),e}();!function(y,m){for(var w=0;w<m.length;w++)y.prototype[m[w]]=K(y.prototype[m[w]])}(t3,["identify"]);var t5={},Er=function(){tZ.init=function(y,m,w){if(w)return tZ[w]||(tZ[w]=t5[w]=wr(y||"",m||{},w,function(y){tZ[w]=t5[w]=y,y._loaded()})),tZ[w];var x=tZ;return t5[t0]?x=t5[t0]:y&&(x=wr(y,m||{},t0,function(y){t5[t0]=y,y._loaded()}),t5[t0]=x),tZ=x,tQ===tG.INIT_SNIPPET&&(M[t0]=tZ),L(t5,function(y,m){m!==t0&&(tZ[m]=y)}),x}},Fr=function(){function e(){e.done||(e.done=!0,t2=!1,L(t5,function(y){y._dom_loaded()}))}j.addEventListener&&("complete"===j.readyState?e():j.addEventListener("DOMContentLoaded",e,!1)),ec(M,"load",e,!0)};var t6=(tQ=tG.INIT_MODULE,tZ=new t3,Er(),tZ.init(),Fr(),tZ)},45454:(y,m,w)=>{"use strict";w.d(m,{Z:()=>R});var x=w(28082);var S=w(87710);var P=w(2784);var E=w(72779);var T=w.n(E);const C=P.memo(function(y){var m=y.children;return m},function(y,m){var w=m.shouldUpdate;return!w});var O={width:0,height:0,overflow:"hidden",outline:"none"};var A=P.forwardRef(function(y,m){var w=y.prefixCls,E=y.className,A=y.style,R=y.title,I=y.ariaId,M=y.footer,D=y.closable,j=y.closeIcon,$=y.onClose,N=y.children,q=y.bodyStyle,V=y.bodyProps,et=y.modalRender,en=y.onMouseDown,er=y.onMouseUp,ei=y.holderRef,eo=y.visible,es=y.forceRender,ea=y.width,ec=y.height;var eu=(0,P.useRef)();var el=(0,P.useRef)();P.useImperativeHandle(m,function(){return{focus:function(){var y;null===(y=eu.current)||void 0===y||y.focus()},changeActive:function(y){var m=document,w=m.activeElement;if(y&&w===el.current)eu.current.focus();else if(!y&&w===eu.current)el.current.focus()}}});var eh={};if(void 0!==ea)eh.width=ea;if(void 0!==ec)eh.height=ec;var ed;if(M)ed=P.createElement("div",{className:"".concat(w,"-footer")},M);var ef;if(R)ef=P.createElement("div",{className:"".concat(w,"-header")},P.createElement("div",{className:"".concat(w,"-title"),id:I},R));var ep;if(D)ep=P.createElement("button",{type:"button",onClick:$,"aria-label":"Close",className:"".concat(w,"-close")},j||P.createElement("span",{className:"".concat(w,"-close-x")}));var eg=P.createElement("div",{className:"".concat(w,"-content")},ep,ef,P.createElement("div",(0,S.Z)({className:"".concat(w,"-body"),style:q},V),N),ed);return P.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":R?I:null,"aria-modal":"true",ref:ei,style:(0,x.Z)((0,x.Z)({},A),eh),className:T()(w,E),onMouseDown:en,onMouseUp:er},P.createElement("div",{tabIndex:0,ref:eu,style:O,"aria-hidden":"true"}),P.createElement(C,{shouldUpdate:eo||es},et?et(eg):eg),P.createElement("div",{tabIndex:0,ref:el,style:O,"aria-hidden":"true"}))});const R=A},44060:(y,m,w)=>{"use strict";w.d(m,{default:()=>P});var x=w(55966);var S=w(45454);const P=x.Z},69957:(y,m,w)=>{"use strict";w.d(m,{Field:()=>S.Z,FieldContext:()=>O.Z,FormProvider:()=>C.R,List:()=>P.Z,ListContext:()=>A.Z,default:()=>D,useForm:()=>E.Z,useWatch:()=>R.Z});var x=w(2784);var S=w(66546);var P=w(43529);var E=w(18347);var T=w(6296);var C=w(49035);var O=w(50788);var A=w(53674);var R=w(55983);var I=x.forwardRef(T.Z);var M=I;M.FormProvider=C.R;M.Field=S.Z;M.List=P.Z;M.useForm=E.Z;M.useWatch=R.Z;const D=M},28603:(y,m,w)=>{"use strict";w.d(m,{default:()=>S});var x=w(49022);const S=x.Z},24254:(y,m,w)=>{"use strict";var x=w(46062);var S=w.n(x);var P=w(44036);var E=w.n(P);var T=w(96793);var C=w.n(T);var O=w(17892);var A=w.n(O);var R=w(11173);var I=w.n(R);var M=w(42464);var D=w.n(M);var j=w(15646);var $={};$.styleTagTransform=D();$.setAttributes=A();$.insert=C().bind(null,"head");$.domAPI=E();$.insertStyleElement=I();var N=S()(j.Z,$);var q=j.Z&&j.Z.locals?j.Z.locals:void 0},60838:(y,m,w)=>{"use strict";w.d(m,{Z:()=>x});function valueOf(y){return y.valueOf?y.valueOf():Object.prototype.valueOf.call(y)}function valueEqual(y,m){if(y===m)return true;if(null==y||null==m)return false;if(Array.isArray(y))return Array.isArray(m)&&y.length===m.length&&y.every(function(y,w){return valueEqual(y,m[w])});if("object"==typeof y||"object"==typeof m){var w=valueOf(y);var x=valueOf(m);if(w!==y||x!==m)return valueEqual(w,x);return Object.keys(Object.assign({},y,m)).every(function(w){return valueEqual(y[w],m[w])})}return false}const x=valueEqual},32414:(y,m,w)=>{"use strict";w.d(m,{Z:()=>shallow});function shallow(y,m){if(Object.is(y,m))return true;if("object"!=typeof y||null===y||"object"!=typeof m||null===m)return false;const w=Object.keys(y);if(w.length!==Object.keys(m).length)return false;for(let x=0;x<w.length;x++)if(!Object.prototype.hasOwnProperty.call(m,w[x])||!Object.is(y[w[x]],m[w[x]]))return false;return true}},59590:(y,m,w)=>{"use strict";w.r(m);w.d(m,{Dexie:()=>th,RangeSet:()=>RangeSet,default:()=>tm,liveQuery:()=>liveQuery,mergeRanges:()=>mergeRanges,rangesOverlap:()=>rangesOverlap});const x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global;const S=Object.keys;const P=Array.isArray;if("undefined"!=typeof Promise&&!x.Promise)x.Promise=Promise;function extend(y,m){if("object"!=typeof m)return y;S(m).forEach(function(w){y[w]=m[w]});return y}const E=Object.getPrototypeOf;const T={}.hasOwnProperty;function hasOwn(y,m){return T.call(y,m)}function props(y,m){if("function"==typeof m)m=m(E(y));("undefined"==typeof Reflect?S:Reflect.ownKeys)(m).forEach(w=>{setProp(y,w,m[w])})}const C=Object.defineProperty;function setProp(y,m,w,x){C(y,m,extend(w&&hasOwn(w,"get")&&"function"==typeof w.get?{get:w.get,set:w.set,configurable:true}:{value:w,configurable:true,writable:true},x))}function derive(y){return{from:function(m){y.prototype=Object.create(m.prototype);setProp(y.prototype,"constructor",y);return{extend:props.bind(null,y.prototype)}}}}const O=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(y,m){const w=O(y,m);let x;return w||(x=E(y))&&getPropertyDescriptor(x,m)}const A=[].slice;function slice(y,m,w){return A.call(y,m,w)}function override(y,m){return m(y)}function assert(y){if(!y)throw new Error("Assertion Failed")}function asap$1(y){if(x.setImmediate)setImmediate(y);else setTimeout(y,0)}function arrayToObject(y,m){return y.reduce((y,w,x)=>{var S=m(w,x);if(S)y[S[0]]=S[1];return y},{})}function tryCatch(y,m,w){try{y.apply(null,w)}catch(x){m&&m(x)}}function getByKeyPath(y,m){if(hasOwn(y,m))return y[m];if(!m)return y;if("string"!=typeof m){var w=[];for(var x=0,S=m.length;x<S;++x){var P=getByKeyPath(y,m[x]);w.push(P)}return w}var E=m.indexOf(".");if(-1!==E){var T=y[m.substr(0,E)];return void 0===T?void 0:getByKeyPath(T,m.substr(E+1))}return}function setByKeyPath(y,m,w){if(!y||void 0===m)return;if("isFrozen"in Object&&Object.isFrozen(y))return;if("string"!=typeof m&&"length"in m){assert("string"!=typeof w&&"length"in w);for(var x=0,S=m.length;x<S;++x)setByKeyPath(y,m[x],w[x])}else{var E=m.indexOf(".");if(-1!==E){var T=m.substr(0,E);var C=m.substr(E+1);if(""===C)if(void 0===w)if(P(y)&&!isNaN(parseInt(T)))y.splice(T,1);else delete y[T];else y[T]=w;else{var O=y[T];if(!O)O=y[T]={};setByKeyPath(O,C,w)}}else if(void 0===w)if(P(y)&&!isNaN(parseInt(m)))y.splice(m,1);else delete y[m];else y[m]=w}}function delByKeyPath(y,m){if("string"==typeof m)setByKeyPath(y,m,void 0);else if("length"in m)[].map.call(m,function(m){setByKeyPath(y,m,void 0)})}function shallowClone(y){var m={};for(var w in y)if(hasOwn(y,w))m[w]=y[w];return m}const R=[].concat;function flatten(y){return R.apply([],y)}const I="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(flatten([8,16,32,64].map(y=>["Int","Uint","Float"].map(m=>m+y+"Array")))).filter(y=>x[y]);const M=I.map(y=>x[y]);arrayToObject(I,y=>[y,true]);let D=null;function deepClone(y){D="undefined"!=typeof WeakMap&&new WeakMap;const m=innerDeepClone(y);D=null;return m}function innerDeepClone(y){if(!y||"object"!=typeof y)return y;let m=D&&D.get(y);if(m)return m;if(P(y)){m=[];D&&D.set(y,m);for(var w=0,x=y.length;w<x;++w)m.push(innerDeepClone(y[w]))}else if(M.indexOf(y.constructor)>=0)m=y;else{const S=E(y);m=S===Object.prototype?{}:Object.create(S);D&&D.set(y,m);for(var T in y)if(hasOwn(y,T))m[T]=innerDeepClone(y[T])}return m}const{toString:j}={};function toStringTag(y){return j.call(y).slice(8,-1)}const $="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";const N="symbol"==typeof $?function(y){var m;return null!=y&&(m=y[$])&&m.apply(y)}:function(){return null};const q={};function getArrayOf(y){var m,w,x,S;if(1===arguments.length){if(P(y))return y.slice();if(this===q&&"string"==typeof y)return[y];if(S=N(y)){w=[];while(x=S.next(),!x.done)w.push(x.value);return w}if(null==y)return[y];m=y.length;if("number"==typeof m){w=new Array(m);while(m--)w[m]=y[m];return w}return[y]}m=arguments.length;w=new Array(m);while(m--)w[m]=arguments[m];return w}const V="undefined"!=typeof Symbol?y=>"AsyncFunction"===y[Symbol.toStringTag]:()=>false;var et="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(y,m){et=y;libraryFilter=m}var libraryFilter=()=>true;const en=!new Error("").stack;function getErrorWithStack(){if(en)try{getErrorWithStack.arguments;throw new Error}catch(y){return y}return new Error}function prettyStack(y,m){var w=y.stack;if(!w)return"";m=m||0;if(0===w.indexOf(y.name))m+=(y.name+y.message).split("\n").length;return w.split("\n").slice(m).filter(libraryFilter).map(y=>"\n"+y).join("")}var er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var ei=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];var eo=er.concat(ei);var es={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function DexieError(y,m){this._e=getErrorWithStack();this.name=y;this.message=m}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}});function getMultiErrorMessage(y,m){return y+". Errors: "+Object.keys(m).map(y=>m[y].toString()).filter((y,m,w)=>w.indexOf(y)===m).join("\n")}function ModifyError(y,m,w,x){this._e=getErrorWithStack();this.failures=m;this.failedKeys=x;this.successCount=w;this.message=getMultiErrorMessage(y,m)}derive(ModifyError).from(DexieError);function BulkError(y,m){this._e=getErrorWithStack();this.name="BulkError";this.failures=Object.keys(m).map(y=>m[y]);this.failuresByPos=m;this.message=getMultiErrorMessage(y,m)}derive(BulkError).from(DexieError);var ea=eo.reduce((y,m)=>(y[m]=m+"Error",y),{});const ec=DexieError;var eu=eo.reduce((y,m)=>{var w=m+"Error";function DexieError(y,x){this._e=getErrorWithStack();this.name=w;if(y){if("string"==typeof y){this.message=`${y}${x?"\n "+x:""}`;this.inner=x||null}else if("object"==typeof y){this.message=`${y.name} ${y.message}`;this.inner=y}}else{this.message=es[m]||w;this.inner=null}}derive(DexieError).from(ec);y[m]=DexieError;return y},{});eu.Syntax=SyntaxError;eu.Type=TypeError;eu.Range=RangeError;var el=ei.reduce((y,m)=>{y[m+"Error"]=eu[m];return y},{});function mapError(y,m){if(!y||y instanceof DexieError||y instanceof TypeError||y instanceof SyntaxError||!y.name||!el[y.name])return y;var w=new el[y.name](m||y.message,y);if("stack"in y)setProp(w,"stack",{get:function(){return this.inner.stack}});return w}var eh=eo.reduce((y,m)=>{if(-1===["Syntax","Type","Range"].indexOf(m))y[m+"Error"]=eu[m];return y},{});eh.ModifyError=ModifyError;eh.DexieError=DexieError;eh.BulkError=BulkError;function nop(){}function mirror(y){return y}function pureFunctionChain(y,m){if(null==y||y===mirror)return m;return function(w){return m(y(w))}}function callBoth(y,m){return function(){y.apply(this,arguments);m.apply(this,arguments)}}function hookCreatingChain(y,m){if(y===nop)return m;return function(){var w=y.apply(this,arguments);if(void 0!==w)arguments[0]=w;var x=this.onsuccess,S=this.onerror;this.onsuccess=null;this.onerror=null;var P=m.apply(this,arguments);if(x)this.onsuccess=this.onsuccess?callBoth(x,this.onsuccess):x;if(S)this.onerror=this.onerror?callBoth(S,this.onerror):S;return void 0!==P?P:w}}function hookDeletingChain(y,m){if(y===nop)return m;return function(){y.apply(this,arguments);var w=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null;m.apply(this,arguments);if(w)this.onsuccess=this.onsuccess?callBoth(w,this.onsuccess):w;if(x)this.onerror=this.onerror?callBoth(x,this.onerror):x}}function hookUpdatingChain(y,m){if(y===nop)return m;return function(w){var x=y.apply(this,arguments);extend(w,x);var S=this.onsuccess,P=this.onerror;this.onsuccess=null;this.onerror=null;var E=m.apply(this,arguments);if(S)this.onsuccess=this.onsuccess?callBoth(S,this.onsuccess):S;if(P)this.onerror=this.onerror?callBoth(P,this.onerror):P;return void 0===x?void 0===E?void 0:E:extend(x,E)}}function reverseStoppableEventChain(y,m){if(y===nop)return m;return function(){if(false===m.apply(this,arguments))return false;return y.apply(this,arguments)}}function promisableChain(y,m){if(y===nop)return m;return function(){var w=y.apply(this,arguments);if(w&&"function"==typeof w.then){var x=this,S=arguments.length,P=new Array(S);while(S--)P[S]=arguments[S];return w.then(function(){return m.apply(x,P)})}return m.apply(this,arguments)}}var ed={};const ef=100,ep=20,eg=100,[ev,ey,em]="undefined"==typeof Promise?[]:(()=>{let y=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[y,E(y),y];const m=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[m,E(m),y]})(),e_=ey&&ey.then;const eb=ev&&ev.constructor;const ew=!!em;var ek=false;var ex=em?()=>{em.then(physicalTick)}:x.setImmediate?setImmediate.bind(null,physicalTick):x.MutationObserver?()=>{var y=document.createElement("div");new MutationObserver(()=>{physicalTick();y=null}).observe(y,{attributes:true});y.setAttribute("i","1")}:()=>{setTimeout(physicalTick,0)};var asap=function(y,m){eI.push([y,m]);if(eP){ex();eP=false}};var eS=true,eP=true,eE=[],eT=[],eC=null,eO=mirror;var eA={id:"global",global:true,ref:0,unhandleds:[],onunhandled:globalError,pgp:false,env:{},finalize:function(){this.unhandleds.forEach(y=>{try{globalError(y[0],y[1])}catch(m){}})}};var eR=eA;var eI=[];var eF=0;var eM=[];function DexiePromise(y){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=nop;this._lib=false;var m=this._PSD=eR;if(et){this._stackHolder=getErrorWithStack();this._prev=null;this._numPrev=0}if("function"!=typeof y){if(y!==ed)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];if(false===this._state)handleRejection(this,this._value);return}this._state=null;this._value=null;++m.ref;executePromiseTask(this,y)}const eD={get:function(){var y=eR,m=eN;function then(w,x){var S=!y.global&&(y!==eR||m!==eN);const P=S&&!decrementExpectedAwaits();var E=new DexiePromise((m,E)=>{propagateToListener(this,new Listener(nativeAwaitCompatibleWrap(w,y,S,P),nativeAwaitCompatibleWrap(x,y,S,P),m,E,y))});et&&linkToPreviousPromise(E,this);return E}then.prototype=ed;return then},set:function(y){setProp(this,"then",y&&y.prototype===ed?eD:{get:function(){return y},set:eD.set})}};props(DexiePromise.prototype,{then:eD,_then:function(y,m){propagateToListener(this,new Listener(null,null,y,m,eR))},catch:function(y){if(1===arguments.length)return this.then(null,y);var m=arguments[0],w=arguments[1];return"function"==typeof m?this.then(null,y=>y instanceof m?w(y):PromiseReject(y)):this.then(null,y=>y&&y.name===m?w(y):PromiseReject(y))},finally:function(y){return this.then(m=>{y();return m},m=>{y();return PromiseReject(m)})},stack:{get:function(){if(this._stack)return this._stack;try{ek=true;var y=getStack(this,[],ep);var m=y.join("\nFrom previous: ");if(null!==this._state)this._stack=m;return m}finally{ek=false}}},timeout:function(y,m){return y<1/0?new DexiePromise((w,x)=>{var S=setTimeout(()=>x(new eu.Timeout(m)),y);this.then(w,x).finally(clearTimeout.bind(null,S))}):this}});if("undefined"!=typeof Symbol&&Symbol.toStringTag)setProp(DexiePromise.prototype,Symbol.toStringTag,"Dexie.Promise");eA.env=snapShot();function Listener(y,m,w,x,S){this.onFulfilled="function"==typeof y?y:null;this.onRejected="function"==typeof m?m:null;this.resolve=w;this.reject=x;this.psd=S}props(DexiePromise,{all:function(){var y=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise(function(m,w){if(0===y.length)m([]);var x=y.length;y.forEach((S,P)=>DexiePromise.resolve(S).then(w=>{y[P]=w;if(!--x)m(y)},w))})},resolve:y=>{if(y instanceof DexiePromise)return y;if(y&&"function"==typeof y.then)return new DexiePromise((m,w)=>{y.then(m,w)});var m=new DexiePromise(ed,true,y);linkToPreviousPromise(m,eC);return m},reject:PromiseReject,race:function(){var y=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((m,w)=>{y.map(y=>DexiePromise.resolve(y).then(m,w))})},PSD:{get:()=>eR,set:y=>eR=y},totalEchoes:{get:()=>eN},newPSD:newScope,usePSD:usePSD,scheduler:{get:()=>asap,set:y=>{asap=y}},rejectionMapper:{get:()=>eO,set:y=>{eO=y}},follow:(y,m)=>{return new DexiePromise((w,x)=>{return newScope((m,w)=>{var x=eR;x.unhandleds=[];x.onunhandled=w;x.finalize=callBoth(function(){run_at_end_of_this_or_next_physical_tick(()=>{0===this.unhandleds.length?m():w(this.unhandleds[0])})},x.finalize);y()},m,w,x)})}});if(eb){if(eb.allSettled)setProp(DexiePromise,"allSettled",function(){const y=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise(m=>{if(0===y.length)m([]);let w=y.length;const x=new Array(w);y.forEach((y,S)=>DexiePromise.resolve(y).then(y=>x[S]={status:"fulfilled",value:y},y=>x[S]={status:"rejected",reason:y}).then(()=>--w||m(x)))})});if(eb.any&&"undefined"!=typeof AggregateError)setProp(DexiePromise,"any",function(){const y=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((m,w)=>{if(0===y.length)w(new AggregateError([]));let x=y.length;const S=new Array(x);y.forEach((y,P)=>DexiePromise.resolve(y).then(y=>m(y),y=>{S[P]=y;if(!--x)w(new AggregateError(S))}))})})}function executePromiseTask(y,m){try{m(m=>{if(null!==y._state)return;if(m===y)throw new TypeError("A promise cannot be resolved with itself.");var w=y._lib&&beginMicroTickScope();if(m&&"function"==typeof m.then)executePromiseTask(y,(y,w)=>{m instanceof DexiePromise?m._then(y,w):m.then(y,w)});else{y._state=true;y._value=m;propagateAllListeners(y)}if(w)endMicroTickScope()},handleRejection.bind(null,y))}catch(w){handleRejection(y,w)}}function handleRejection(y,m){eT.push(m);if(null!==y._state)return;var w=y._lib&&beginMicroTickScope();m=eO(m);y._state=false;y._value=m;et&&null!==m&&"object"==typeof m&&!m._promise&&tryCatch(()=>{var w=getPropertyDescriptor(m,"stack");m._promise=y;setProp(m,"stack",{get:()=>ek?w&&(w.get?w.get.apply(m):w.value):y.stack})});addPossiblyUnhandledError(y);propagateAllListeners(y);if(w)endMicroTickScope()}function propagateAllListeners(y){var m=y._listeners;y._listeners=[];for(var w=0,x=m.length;w<x;++w)propagateToListener(y,m[w]);var S=y._PSD;--S.ref||S.finalize();if(0===eF){++eF;asap(()=>{if(0===--eF)finalizePhysicalTick()},[])}}function propagateToListener(y,m){if(null===y._state){y._listeners.push(m);return}var w=y._state?m.onFulfilled:m.onRejected;if(null===w)return(y._state?m.resolve:m.reject)(y._value);++m.psd.ref;++eF;asap(callListener,[w,y,m])}function callListener(y,m,w){try{eC=m;var x,S=m._value;if(m._state)x=y(S);else{if(eT.length)eT=[];x=y(S);if(-1===eT.indexOf(S))markErrorAsHandled(m)}w.resolve(x)}catch(P){w.reject(P)}finally{eC=null;if(0===--eF)finalizePhysicalTick();--w.psd.ref||w.psd.finalize()}}function getStack(y,m,w){if(m.length===w)return m;var x="";if(false===y._state){var S=y._value,P,E;if(null!=S){P=S.name||"Error";E=S.message||S;x=prettyStack(S,0)}else{P=S;E=""}m.push(P+(E?": "+E:"")+x)}if(et){x=prettyStack(y._stackHolder,2);if(x&&-1===m.indexOf(x))m.push(x);if(y._prev)getStack(y._prev,m,w)}return m}function linkToPreviousPromise(y,m){var w=m?m._numPrev+1:0;if(w<ef){y._prev=m;y._numPrev=w}}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var y=eS;eS=false;eP=false;return y}function endMicroTickScope(){var y,m,w;do while(eI.length>0){y=eI;eI=[];w=y.length;for(m=0;m<w;++m){var x=y[m];x[0].apply(null,x[1])}}while(eI.length>0)eS=true;eP=true}function finalizePhysicalTick(){var y=eE;eE=[];y.forEach(y=>{y._PSD.onunhandled.call(null,y._value,y)});var m=eM.slice(0);var w=m.length;while(w)m[--w]()}function run_at_end_of_this_or_next_physical_tick(y){function finalizer(){y();eM.splice(eM.indexOf(finalizer),1)}eM.push(finalizer);++eF;asap(()=>{if(0===--eF)finalizePhysicalTick()},[])}function addPossiblyUnhandledError(y){if(!eE.some(m=>m._value===y._value))eE.push(y)}function markErrorAsHandled(y){var m=eE.length;while(m)if(eE[--m]._value===y._value){eE.splice(m,1);return}}function PromiseReject(y){return new DexiePromise(ed,false,y)}function wrap(y,m){var w=eR;return function(){var x=beginMicroTickScope(),S=eR;try{switchToZone(w,true);return y.apply(this,arguments)}catch(P){m&&m(P)}finally{switchToZone(S,false);if(x)endMicroTickScope()}}}const ej={awaits:0,echoes:0,id:0};var eB=0;var e$=[];var eL=0;var eN=0;var eH=0;function newScope(y,m,w,x){var S=eR,P=Object.create(S);P.parent=S;P.ref=0;P.global=false;P.id=++eH;var E=eA.env;P.env=ew?{Promise:DexiePromise,PromiseProp:{value:DexiePromise,configurable:true,writable:true},all:DexiePromise.all,race:DexiePromise.race,allSettled:DexiePromise.allSettled,any:DexiePromise.any,resolve:DexiePromise.resolve,reject:DexiePromise.reject,nthen:getPatchedPromiseThen(E.nthen,P),gthen:getPatchedPromiseThen(E.gthen,P)}:{};if(m)extend(P,m);++S.ref;P.finalize=function(){--this.parent.ref||this.parent.finalize()};var T=usePSD(P,y,w,x);if(0===P.ref)P.finalize();return T}function incrementExpectedAwaits(){if(!ej.id)ej.id=++eB;++ej.awaits;ej.echoes+=eg;return ej.id}function decrementExpectedAwaits(){if(!ej.awaits)return false;if(0===--ej.awaits)ej.id=0;ej.echoes=ej.awaits*eg;return true}if(-1===(""+e_).indexOf("[native code]"))incrementExpectedAwaits=decrementExpectedAwaits=nop;function onPossibleParallellAsync(y){if(ej.echoes&&y&&y.constructor===eb){incrementExpectedAwaits();return y.then(y=>{decrementExpectedAwaits();return y},y=>{decrementExpectedAwaits();return eq(y)})}return y}function zoneEnterEcho(y){++eN;if(!ej.echoes||0===--ej.echoes)ej.echoes=ej.id=0;e$.push(eR);switchToZone(y,true)}function zoneLeaveEcho(){var y=e$[e$.length-1];e$.pop();switchToZone(y,false)}function switchToZone(y,m){var w=eR;if(m?ej.echoes&&(!eL++||y!==eR):eL&&(!--eL||y!==eR))enqueueNativeMicroTask(m?zoneEnterEcho.bind(null,y):zoneLeaveEcho);if(y===eR)return;eR=y;if(w===eA)eA.env=snapShot();if(ew){var S=eA.env.Promise;var P=y.env;ey.then=P.nthen;S.prototype.then=P.gthen;if(w.global||y.global){Object.defineProperty(x,"Promise",P.PromiseProp);S.all=P.all;S.race=P.race;S.resolve=P.resolve;S.reject=P.reject;if(P.allSettled)S.allSettled=P.allSettled;if(P.any)S.any=P.any}}}function snapShot(){var y=x.Promise;return ew?{Promise:y,PromiseProp:Object.getOwnPropertyDescriptor(x,"Promise"),all:y.all,race:y.race,allSettled:y.allSettled,any:y.any,resolve:y.resolve,reject:y.reject,nthen:ey.then,gthen:y.prototype.then}:{}}function usePSD(y,m,w,x,S){var P=eR;try{switchToZone(y,true);return m(w,x,S)}finally{switchToZone(P,false)}}function enqueueNativeMicroTask(y){e_.call(ev,y)}function nativeAwaitCompatibleWrap(y,m,w,x){return"function"!=typeof y?y:function(){var S=eR;if(w)incrementExpectedAwaits();switchToZone(m,true);try{return y.apply(this,arguments)}finally{switchToZone(S,false);if(x)enqueueNativeMicroTask(decrementExpectedAwaits)}}}function getPatchedPromiseThen(y,m){return function(w,x){return y.call(this,nativeAwaitCompatibleWrap(w,m),nativeAwaitCompatibleWrap(x,m))}}const eK="unhandledrejection";function globalError(y,m){var w;try{w=m.onuncatched(y)}catch(S){}if(false!==w)try{var P,E={promise:m,reason:y};if(x.document&&document.createEvent){P=document.createEvent("Event");P.initEvent(eK,true,true);extend(P,E)}else if(x.CustomEvent){P=new CustomEvent(eK,{detail:E});extend(P,E)}if(P&&x.dispatchEvent){dispatchEvent(P);if(!x.PromiseRejectionEvent&&x.onunhandledrejection)try{x.onunhandledrejection(P)}catch(T){}}if(et&&P&&!P.defaultPrevented)console.warn(`Unhandled rejection: ${y.stack||y}`)}catch(C){}}var eq=DexiePromise.reject;function tempTransaction(y,m,w,x){if(y.idbdb&&(y._state.openComplete||eR.letThrough||y._vip)){var S=y._createTransaction(m,w,y._dbSchema);try{S.create()}catch(P){return eq(P)}return S._promise(m,(y,m)=>{return newScope(()=>{eR.trans=S;return x(y,m,S)})}).then(y=>{return S._completion.then(()=>y)})}if(y._state.openComplete)return eq(new eu.DatabaseClosed(y._state.dbOpenError));if(!y._state.isBeingOpened){if(!y._options.autoOpen)return eq(new eu.DatabaseClosed);y.open().catch(nop)}return y._state.dbReadyPromise.then(()=>tempTransaction(y,m,w,x))}const eU="3.2.0-rc.2";const eW=String.fromCharCode(65535);const eV=-1/0;const ez="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";const eG="String expected.";const eQ=[];const eZ="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent);const eJ=eZ;const eX=eZ;const dexieStackFrameFilter=y=>!/(dexie\.js|dexie\.min\.js)/.test(y);const eY="__dbnames";const e0="readonly";const e1="readwrite";function combine(y,m){return y?m?function(){return y.apply(this,arguments)&&m.apply(this,arguments)}:y:m}let e2;try{e2={indexedDB:x.indexedDB||x.mozIndexedDB||x.webkitIndexedDB||x.msIndexedDB,IDBKeyRange:x.IDBKeyRange||x.webkitIDBKeyRange}}catch(e3){e2={indexedDB:null,IDBKeyRange:null}}function safariMultiStoreFix(y){return 1===y.length?y[0]:y}let getMaxKey=y=>{try{y.only([[]]);getMaxKey=()=>[[]];return[[]]}catch(m){getMaxKey=()=>eW;return eW}};const e5={type:3,lower:-1/0,lowerOpen:false,get upper(){return getMaxKey(e2.IDBKeyRange)},upperOpen:false};function workaroundForUndefinedPrimKey(y){return"string"!=typeof y||/\./.test(y)?y=>y:m=>{if(void 0===m[y]&&y in m){m=deepClone(m);delete m[y]}return m}}class e6{_trans(y,m,w){const x=this._tx||eR.trans;const S=this.name;function checkTableInTransaction(y,w,x){if(!x.schema[S])throw new eu.NotFound("Table "+S+" not part of transaction");return m(x.idbtrans,x)}const P=beginMicroTickScope();try{return x&&x.db===this.db?x===eR.trans?x._promise(y,checkTableInTransaction,w):newScope(()=>x._promise(y,checkTableInTransaction,w),{trans:x,transless:eR.transless||eR}):tempTransaction(this.db,y,[this.name],checkTableInTransaction)}finally{if(P)endMicroTickScope()}}get(y,m){if(y&&y.constructor===Object)return this.where(y).first(m);return this._trans("readonly",m=>{return this.core.get({trans:m,key:y}).then(y=>this.hook.reading.fire(y))}).then(m)}where(y){if("string"==typeof y)return new this.db.WhereClause(this,y);if(P(y))return new this.db.WhereClause(this,`[${y.join("+")}]`);const m=S(y);if(1===m.length)return this.where(m[0]).equals(y[m[0]]);const w=this.schema.indexes.concat(this.schema.primKey).filter(y=>y.compound&&m.every(m=>y.keyPath.indexOf(m)>=0)&&y.keyPath.every(y=>m.indexOf(y)>=0))[0];if(w&&this.db._maxKey!==eW)return this.where(w.name).equals(w.keyPath.map(m=>y[m]));if(!w&&et)console.warn(`The query ${JSON.stringify(y)} on ${this.name} would benefit of a compound index [${m.join("+")}]`);const{idxByName:x}=this.schema;const E=this.db._deps.indexedDB;function equals(y,m){try{return 0===E.cmp(y,m)}catch(w){return false}}const[T,C]=m.reduce(([m,w],S)=>{const E=x[S];const T=y[S];return[m||E,m||!E?combine(w,E&&E.multi?y=>{const m=getByKeyPath(y,S);return P(m)&&m.some(y=>equals(T,y))}:y=>equals(T,getByKeyPath(y,S))):w]},[null,null]);return T?this.where(T.name).equals(y[T.keyPath]).filter(C):w?this.filter(C):this.where(m).equals("")}filter(y){return this.toCollection().and(y)}count(y){return this.toCollection().count(y)}offset(y){return this.toCollection().offset(y)}limit(y){return this.toCollection().limit(y)}each(y){return this.toCollection().each(y)}toArray(y){return this.toCollection().toArray(y)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(y){return new this.db.Collection(new this.db.WhereClause(this,P(y)?`[${y.join("+")}]`:y))}reverse(){return this.toCollection().reverse()}mapToClass(y){this.schema.mappedClass=y;const readHook=m=>{if(!m)return m;const w=Object.create(y.prototype);for(var x in m)if(hasOwn(m,x))try{w[x]=m[x]}catch(S){}return w};if(this.schema.readHook)this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=readHook;this.hook("reading",readHook);return y}defineClass(){function Class(y){extend(this,y)}return this.mapToClass(Class)}add(y,m){const{auto:w,keyPath:x}=this.schema.primKey;let S=y;if(x&&w)S=workaroundForUndefinedPrimKey(x)(y);return this._trans("readwrite",y=>{return this.core.mutate({trans:y,type:"add",keys:null!=m?[m]:null,values:[S]})}).then(y=>y.numFailures?DexiePromise.reject(y.failures[0]):y.lastResult).then(m=>{if(x)try{setByKeyPath(y,x,m)}catch(w){}return m})}update(y,m){if("object"!=typeof y||P(y))return this.where(":id").equals(y).modify(m);{const w=getByKeyPath(y,this.schema.primKey.keyPath);if(void 0===w)return eq(new eu.InvalidArgument("Given object does not contain its primary key"));try{if("function"!=typeof m)S(m).forEach(w=>{setByKeyPath(y,w,m[w])});else m(y,{value:y,primKey:w})}catch(x){}return this.where(":id").equals(w).modify(m)}}put(y,m){const{auto:w,keyPath:x}=this.schema.primKey;let S=y;if(x&&w)S=workaroundForUndefinedPrimKey(x)(y);return this._trans("readwrite",y=>this.core.mutate({trans:y,type:"put",values:[S],keys:null!=m?[m]:null})).then(y=>y.numFailures?DexiePromise.reject(y.failures[0]):y.lastResult).then(m=>{if(x)try{setByKeyPath(y,x,m)}catch(w){}return m})}delete(y){return this._trans("readwrite",m=>this.core.mutate({trans:m,type:"delete",keys:[y]})).then(y=>y.numFailures?DexiePromise.reject(y.failures[0]):void 0)}clear(){return this._trans("readwrite",y=>this.core.mutate({trans:y,type:"deleteRange",range:e5})).then(y=>y.numFailures?DexiePromise.reject(y.failures[0]):void 0)}bulkGet(y){return this._trans("readonly",m=>{return this.core.getMany({keys:y,trans:m}).then(y=>y.map(y=>this.hook.reading.fire(y)))})}bulkAdd(y,m,w){const x=Array.isArray(m)?m:void 0;w=w||(x?void 0:m);const S=w?w.allKeys:void 0;return this._trans("readwrite",m=>{const{auto:w,keyPath:P}=this.schema.primKey;if(P&&x)throw new eu.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(x&&x.length!==y.length)throw new eu.InvalidArgument("Arguments objects and keys must have the same length");const E=y.length;let T=P&&w?y.map(workaroundForUndefinedPrimKey(P)):y;return this.core.mutate({trans:m,type:"add",keys:x,values:T,wantResults:S}).then(({numFailures:y,results:m,lastResult:w,failures:x})=>{const P=S?m:w;if(0===y)return P;throw new BulkError(`${this.name}.bulkAdd(): ${y} of ${E} operations failed`,x)})})}bulkPut(y,m,w){const x=Array.isArray(m)?m:void 0;w=w||(x?void 0:m);const S=w?w.allKeys:void 0;return this._trans("readwrite",m=>{const{auto:w,keyPath:P}=this.schema.primKey;if(P&&x)throw new eu.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(x&&x.length!==y.length)throw new eu.InvalidArgument("Arguments objects and keys must have the same length");const E=y.length;let T=P&&w?y.map(workaroundForUndefinedPrimKey(P)):y;return this.core.mutate({trans:m,type:"put",keys:x,values:T,wantResults:S}).then(({numFailures:y,results:m,lastResult:w,failures:x})=>{const P=S?m:w;if(0===y)return P;throw new BulkError(`${this.name}.bulkPut(): ${y} of ${E} operations failed`,x)})})}bulkDelete(y){const m=y.length;return this._trans("readwrite",m=>{return this.core.mutate({trans:m,type:"delete",keys:y})}).then(({numFailures:y,lastResult:w,failures:x})=>{if(0===y)return w;throw new BulkError(`${this.name}.bulkDelete(): ${y} of ${m} operations failed`,x)})}}function Events(y){var m={};var rv=function(w,x){if(x){var S=arguments.length,P=new Array(S-1);while(--S)P[S-1]=arguments[S];m[w].subscribe.apply(null,P);return y}if("string"==typeof w)return m[w]};rv.addEventType=add;for(var w=1,x=arguments.length;w<x;++w)add(arguments[w]);return rv;function add(y,w,x){if("object"==typeof y)return addConfiguredEvents(y);if(!w)w=reverseStoppableEventChain;if(!x)x=nop;var S={subscribers:[],fire:x,subscribe:function(y){if(-1===S.subscribers.indexOf(y)){S.subscribers.push(y);S.fire=w(S.fire,y)}},unsubscribe:function(y){S.subscribers=S.subscribers.filter(function(m){return m!==y});S.fire=S.subscribers.reduce(w,x)}};m[y]=rv[y]=S;return S}function addConfiguredEvents(y){S(y).forEach(function(m){var w=y[m];if(P(w))add(m,y[m][0],y[m][1]);else if("asap"===w)var x=add(m,mirror,function(){var y=arguments.length,m=new Array(y);while(y--)m[y]=arguments[y];x.subscribers.forEach(function(y){asap$1(function(){y.apply(null,m)})})});else throw new eu.InvalidArgument("Invalid event config")})}}function makeClassConstructor(y,m){derive(m).from({prototype:y});return m}function createTableConstructor(y){return makeClassConstructor(e6.prototype,function(m,w,x){this.db=y;this._tx=x;this.name=m;this.schema=w;this.hook=y._allTables[m]?y._allTables[m].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})})}function isPlainKeyRange(y,m){return!(y.filter||y.algorithm||y.or)&&(m?y.justLimit:!y.replayFilter)}function addFilter(y,m){y.filter=combine(y.filter,m)}function addReplayFilter(y,m,w){var x=y.replayFilter;y.replayFilter=x?()=>combine(x(),m()):m;y.justLimit=w&&!x}function addMatchFilter(y,m){y.isMatch=combine(y.isMatch,m)}function getIndexOrStore(y,m){if(y.isPrimKey)return m.primaryKey;const w=m.getIndexByKeyPath(y.index);if(!w)throw new eu.Schema("KeyPath "+y.index+" on object store "+m.name+" is not indexed");return w}function openCursor(y,m,w){const x=getIndexOrStore(y,m.schema);return m.openCursor({trans:w,values:!y.keysOnly,reverse:"prev"===y.dir,unique:!!y.unique,query:{index:x,range:y.range}})}function iter(y,m,w,x){const S=y.replayFilter?combine(y.filter,y.replayFilter()):y.filter;if(!y.or)return iterate(openCursor(y,x,w),combine(y.algorithm,S),m,!y.keysOnly&&y.valueMapper);{const P={};const union=(y,w,x)=>{if(!S||S(w,x,y=>w.stop(y),y=>w.fail(y))){var E=w.primaryKey;var T=""+E;if("[object ArrayBuffer]"===T)T=""+new Uint8Array(E);if(!hasOwn(P,T)){P[T]=true;m(y,w,x)}}};return Promise.all([y.or._iterate(union,w),iterate(openCursor(y,x,w),y.algorithm,union,!y.keysOnly&&y.valueMapper)])}}function iterate(y,m,w,x){var S=x?(y,m,S)=>w(x(y),m,S):w;var P=wrap(S);return y.then(y=>{if(y)return y.start(()=>{var c=()=>y.continue();if(!m||m(y,y=>c=y,m=>{y.stop(m);c=nop},m=>{y.fail(m);c=nop}))P(y.value,y,y=>c=y);c()})})}class e4{_read(y,m){var w=this._ctx;return w.error?w.table._trans(null,eq.bind(null,w.error)):w.table._trans("readonly",y).then(m)}_write(y){var m=this._ctx;return m.error?m.table._trans(null,eq.bind(null,m.error)):m.table._trans("readwrite",y,"locked")}_addAlgorithm(y){var m=this._ctx;m.algorithm=combine(m.algorithm,y)}_iterate(y,m){return iter(this._ctx,y,m,this._ctx.table.core)}clone(y){var m=Object.create(this.constructor.prototype),w=Object.create(this._ctx);if(y)extend(w,y);m._ctx=w;return m}raw(){this._ctx.valueMapper=null;return this}each(y){var m=this._ctx;return this._read(w=>iter(m,y,w,m.table.core))}count(y){return this._read(y=>{const m=this._ctx;const w=m.table.core;if(isPlainKeyRange(m,true))return w.count({trans:y,query:{index:getIndexOrStore(m,w.schema),range:m.range}}).then(y=>Math.min(y,m.limit));var x=0;return iter(m,()=>{++x;return false},y,w).then(()=>x)}).then(y)}sortBy(y,m){const w=y.split(".").reverse(),x=w[0],S=w.length-1;function getval(y,m){if(m)return getval(y[w[m]],m-1);return y[x]}var P="next"===this._ctx.dir?1:-1;function sorter(y,m){var w=getval(y,S),x=getval(m,S);return w<x?-P:w>x?P:0}return this.toArray(function(y){return y.sort(sorter)}).then(m)}toArray(y){return this._read(y=>{var m=this._ctx;if("next"===m.dir&&isPlainKeyRange(m,true)&&m.limit>0){const{valueMapper:w}=m;const x=getIndexOrStore(m,m.table.core.schema);return m.table.core.query({trans:y,limit:m.limit,values:true,query:{index:x,range:m.range}}).then(({result:y})=>w?y.map(w):y)}{const S=[];return iter(m,y=>S.push(y),y,m.table.core).then(()=>S)}},y)}offset(y){var m=this._ctx;if(y<=0)return this;m.offset+=y;isPlainKeyRange(m)?addReplayFilter(m,()=>{var m=y;return(y,w)=>{if(0===m)return true;if(1===m){--m;return false}w(()=>{y.advance(m);m=0});return false}}):addReplayFilter(m,()=>{var m=y;return()=>--m<0});return this}limit(y){this._ctx.limit=Math.min(this._ctx.limit,y);addReplayFilter(this._ctx,()=>{var m=y;return function(y,w,x){if(--m<=0)w(x);return m>=0}},true);return this}until(y,m){addFilter(this._ctx,function(w,x,S){if(!y(w.value))return true;x(S);return m});return this}first(y){return this.limit(1).toArray(function(y){return y[0]}).then(y)}last(y){return this.reverse().first(y)}filter(y){addFilter(this._ctx,function(m){return y(m.value)});addMatchFilter(this._ctx,y);return this}and(y){return this.filter(y)}or(y){return new this.db.WhereClause(this._ctx.table,y,this)}reverse(){this._ctx.dir="prev"===this._ctx.dir?"next":"prev";if(this._ondirectionchange)this._ondirectionchange(this._ctx.dir);return this}desc(){return this.reverse()}eachKey(y){var m=this._ctx;m.keysOnly=!m.isMatch;return this.each(function(m,w){y(w.key,w)})}eachUniqueKey(y){this._ctx.unique="unique";return this.eachKey(y)}eachPrimaryKey(y){var m=this._ctx;m.keysOnly=!m.isMatch;return this.each(function(m,w){y(w.primaryKey,w)})}keys(y){var m=this._ctx;m.keysOnly=!m.isMatch;var w=[];return this.each(function(y,m){w.push(m.key)}).then(function(){return w}).then(y)}primaryKeys(y){var m=this._ctx;if("next"===m.dir&&isPlainKeyRange(m,true)&&m.limit>0)return this._read(y=>{var w=getIndexOrStore(m,m.table.core.schema);return m.table.core.query({trans:y,values:false,limit:m.limit,query:{index:w,range:m.range}})}).then(({result:y})=>y).then(y);m.keysOnly=!m.isMatch;var w=[];return this.each(function(y,m){w.push(m.primaryKey)}).then(function(){return w}).then(y)}uniqueKeys(y){this._ctx.unique="unique";return this.keys(y)}firstKey(y){return this.limit(1).keys(function(y){return y[0]}).then(y)}lastKey(y){return this.reverse().firstKey(y)}distinct(){var y=this._ctx,m=y.index&&y.table.schema.idxByName[y.index];if(!m||!m.multi)return this;var w={};addFilter(this._ctx,function(y){var m=y.primaryKey.toString();var x=hasOwn(w,m);w[m]=true;return!x});return this}modify(y){var m=this._ctx;return this._write(w=>{var x;if("function"==typeof y)x=y;else{var P=S(y);var E=P.length;x=function(m){var w=false;for(var x=0;x<E;++x){var S=P[x],T=y[S];if(getByKeyPath(m,S)!==T){setByKeyPath(m,S,T);w=true}}return w}}const T=m.table.core;const{outbound:C,extractKey:O}=T.schema.primaryKey;const A=this.db._options.modifyChunkSize||200;const{cmp:R}=this.db.core;const I=[];let M=0;const D=[];const applyMutateResult=(y,m)=>{const{failures:w,numFailures:x}=m;M+=y-x;for(let P of S(w))I.push(w[P])};return this.clone().primaryKeys().then(S=>{const nextChunk=P=>{const E=Math.min(A,S.length-P);return T.getMany({trans:w,keys:S.slice(P,P+E),cache:"immutable"}).then(I=>{const M=[];const D=[];const j=C?[]:null;const $=[];for(let N=0;N<E;++N){const q=I[N];const V={value:deepClone(q),primKey:S[P+N]};if(false!==x.call(V,V.value,V))if(null==V.value)$.push(S[P+N]);else if(C||0===R(O(q),O(V.value))){D.push(V.value);if(C)j.push(S[P+N])}else{$.push(S[P+N]);M.push(V.value)}}const et=isPlainKeyRange(m)&&m.limit===1/0&&("function"!=typeof y||y===deleteCallback)&&{index:m.index,range:m.range};return Promise.resolve(M.length>0&&T.mutate({trans:w,type:"add",values:M}).then(y=>{for(let m in y.failures)$.splice(parseInt(m),1);applyMutateResult(M.length,y)})).then(()=>(D.length>0||et&&"object"==typeof y)&&T.mutate({trans:w,type:"put",keys:j,values:D,criteria:et,changeSpec:"function"!=typeof y&&y}).then(y=>applyMutateResult(D.length,y))).then(()=>($.length>0||et&&y===deleteCallback)&&T.mutate({trans:w,type:"delete",keys:$,criteria:et}).then(y=>applyMutateResult($.length,y))).then(()=>{return S.length>P+E&&nextChunk(P+A)})})};return nextChunk(0).then(()=>{if(I.length>0)throw new ModifyError("Error modifying one or more objects",I,M,D);return S.length})})})}delete(){var y=this._ctx,m=y.range;if(isPlainKeyRange(y)&&(y.isPrimKey&&!eX||3===m.type))return this._write(w=>{const{primaryKey:x}=y.table.core.schema;const S=m;return y.table.core.count({trans:w,query:{index:x,range:S}}).then(m=>{return y.table.core.mutate({trans:w,type:"deleteRange",range:S}).then(({failures:y,lastResult:w,results:x,numFailures:S})=>{if(S)throw new ModifyError("Could not delete some values",Object.keys(y).map(m=>y[m]),m-S);return m-S})})});return this.modify(deleteCallback)}}const deleteCallback=(y,m)=>m.value=null;function createCollectionConstructor(y){return makeClassConstructor(e4.prototype,function(m,w){this.db=y;let x=e5,S=null;if(w)try{x=w()}catch(P){S=P}const E=m._ctx;const T=E.table;const C=T.hook.reading.fire;this._ctx={table:T,index:E.index,isPrimKey:!E.index||T.schema.primKey.keyPath&&E.index===T.schema.primKey.name,range:x,keysOnly:false,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:true,isMatch:null,offset:0,limit:1/0,error:S,or:E.or,valueMapper:C!==mirror?C:null}})}function simpleCompare(y,m){return y<m?-1:y===m?0:1}function simpleCompareReverse(y,m){return y>m?-1:y===m?0:1}function fail(y,m,w){var x=y instanceof e8?new y.Collection(y):y;x._ctx.error=w?new w(m):new TypeError(m);return x}function emptyCollection(y){return new y.Collection(y,()=>rangeEqual("")).limit(0)}function upperFactory(y){return"next"===y?y=>y.toUpperCase():y=>y.toLowerCase()}function lowerFactory(y){return"next"===y?y=>y.toLowerCase():y=>y.toUpperCase()}function nextCasing(y,m,w,x,S,P){var E=Math.min(y.length,x.length);var T=-1;for(var C=0;C<E;++C){var O=m[C];if(O!==x[C]){if(S(y[C],w[C])<0)return y.substr(0,C)+w[C]+w.substr(C+1);if(S(y[C],x[C])<0)return y.substr(0,C)+x[C]+w.substr(C+1);if(T>=0)return y.substr(0,T)+m[T]+w.substr(T+1);return null}if(S(y[C],O)<0)T=C}if(E<x.length&&"next"===P)return y+w.substr(y.length);if(E<y.length&&"prev"===P)return y.substr(0,w.length);return T<0?null:y.substr(0,T)+x[T]+w.substr(T+1)}function addIgnoreCaseAlgorithm(y,m,w,x){var S,P,E,T,C,O,A,R=w.length;if(!w.every(y=>"string"==typeof y))return fail(y,eG);function initDirection(y){S=upperFactory(y);P=lowerFactory(y);E="next"===y?simpleCompare:simpleCompareReverse;var m=w.map(function(y){return{lower:P(y),upper:S(y)}}).sort(function(y,m){return E(y.lower,m.lower)});T=m.map(function(y){return y.upper});C=m.map(function(y){return y.lower});O=y;A="next"===y?"":x}initDirection("next");var I=new y.Collection(y,()=>createRange(T[0],C[R-1]+x));I._ondirectionchange=function(y){initDirection(y)};var M=0;I._addAlgorithm(function(y,w,x){var S=y.key;if("string"!=typeof S)return false;var I=P(S);if(m(I,C,M))return true;var D=null;for(var j=M;j<R;++j){var $=nextCasing(S,I,T[j],C[j],E,O);if(null===$&&null===D)M=j+1;else if(null===D||E(D,$)>0)D=$}w(null!==D?function(){y.continue(D+A)}:x);return false});return I}function createRange(y,m,w,x){return{type:2,lower:y,upper:m,lowerOpen:w,upperOpen:x}}function rangeEqual(y){return{type:1,lower:y,upper:y}}class e8{get Collection(){return this._ctx.table.db.Collection}between(y,m,w,x){w=false!==w;x=true===x;try{if(this._cmp(y,m)>0||0===this._cmp(y,m)&&(w||x)&&!(w&&x))return emptyCollection(this);return new this.Collection(this,()=>createRange(y,m,!w,!x))}catch(S){return fail(this,ez)}}equals(y){if(null==y)return fail(this,ez);return new this.Collection(this,()=>rangeEqual(y))}above(y){if(null==y)return fail(this,ez);return new this.Collection(this,()=>createRange(y,void 0,true))}aboveOrEqual(y){if(null==y)return fail(this,ez);return new this.Collection(this,()=>createRange(y,void 0,false))}below(y){if(null==y)return fail(this,ez);return new this.Collection(this,()=>createRange(void 0,y,false,true))}belowOrEqual(y){if(null==y)return fail(this,ez);return new this.Collection(this,()=>createRange(void 0,y))}startsWith(y){if("string"!=typeof y)return fail(this,eG);return this.between(y,y+eW,true,true)}startsWithIgnoreCase(y){if(""===y)return this.startsWith(y);return addIgnoreCaseAlgorithm(this,(y,m)=>0===y.indexOf(m[0]),[y],eW)}equalsIgnoreCase(y){return addIgnoreCaseAlgorithm(this,(y,m)=>y===m[0],[y],"")}anyOfIgnoreCase(){var y=getArrayOf.apply(q,arguments);if(0===y.length)return emptyCollection(this);return addIgnoreCaseAlgorithm(this,(y,m)=>-1!==m.indexOf(y),y,"")}startsWithAnyOfIgnoreCase(){var y=getArrayOf.apply(q,arguments);if(0===y.length)return emptyCollection(this);return addIgnoreCaseAlgorithm(this,(y,m)=>m.some(m=>0===y.indexOf(m)),y,eW)}anyOf(){const y=getArrayOf.apply(q,arguments);let m=this._cmp;try{y.sort(m)}catch(w){return fail(this,ez)}if(0===y.length)return emptyCollection(this);const x=new this.Collection(this,()=>createRange(y[0],y[y.length-1]));x._ondirectionchange=w=>{m="next"===w?this._ascending:this._descending;y.sort(m)};let S=0;x._addAlgorithm((w,x,P)=>{const E=w.key;while(m(E,y[S])>0){++S;if(S===y.length){x(P);return false}}if(0===m(E,y[S]))return true;x(()=>{w.continue(y[S])});return false});return x}notEqual(y){return this.inAnyRange([[eV,y],[y,this.db._maxKey]],{includeLowers:false,includeUppers:false})}noneOf(){const y=getArrayOf.apply(q,arguments);if(0===y.length)return new this.Collection(this);try{y.sort(this._ascending)}catch(m){return fail(this,ez)}const w=y.reduce((y,m)=>y?y.concat([[y[y.length-1][1],m]]):[[eV,m]],null);w.push([y[y.length-1],this.db._maxKey]);return this.inAnyRange(w,{includeLowers:false,includeUppers:false})}inAnyRange(y,m){const w=this._cmp,x=this._ascending,S=this._descending,P=this._min,E=this._max;if(0===y.length)return emptyCollection(this);if(!y.every(y=>void 0!==y[0]&&void 0!==y[1]&&x(y[0],y[1])<=0))return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",eu.InvalidArgument);const T=!m||false!==m.includeLowers;const C=m&&true===m.includeUppers;function addRange(y,m){let x=0,S=y.length;for(;x<S;++x){const T=y[x];if(w(m[0],T[1])<0&&w(m[1],T[0])>0){T[0]=P(T[0],m[0]);T[1]=E(T[1],m[1]);break}}if(x===S)y.push(m);return y}let O=x;function rangeSorter(y,m){return O(y[0],m[0])}let A;try{A=y.reduce(addRange,[]);A.sort(rangeSorter)}catch(R){return fail(this,ez)}let I=0;const M=C?y=>x(y,A[I][1])>0:y=>x(y,A[I][1])>=0;const D=T?y=>S(y,A[I][0])>0:y=>S(y,A[I][0])>=0;function keyWithinCurrentRange(y){return!M(y)&&!D(y)}let j=M;const $=new this.Collection(this,()=>createRange(A[0][0],A[A.length-1][1],!T,!C));$._ondirectionchange=y=>{if("next"===y){j=M;O=x}else{j=D;O=S}A.sort(rangeSorter)};$._addAlgorithm((y,m,w)=>{var S=y.key;while(j(S)){++I;if(I===A.length){m(w);return false}}if(keyWithinCurrentRange(S))return true;if(0===this._cmp(S,A[I][1])||0===this._cmp(S,A[I][0]))return false;m(()=>{if(O===x)y.continue(A[I][0]);else y.continue(A[I][1])});return false});return $}startsWithAnyOf(){const y=getArrayOf.apply(q,arguments);if(!y.every(y=>"string"==typeof y))return fail(this,"startsWithAnyOf() only works with strings");if(0===y.length)return emptyCollection(this);return this.inAnyRange(y.map(y=>[y,y+eW]))}}function createWhereClauseConstructor(y){return makeClassConstructor(e8.prototype,function(m,w,x){this.db=y;this._ctx={table:m,index:":id"===w?null:w,or:x};const S=y._deps.indexedDB;if(!S)throw new eu.MissingAPI;this._cmp=this._ascending=S.cmp.bind(S);this._descending=(y,m)=>S.cmp(m,y);this._max=(y,m)=>S.cmp(y,m)>0?y:m;this._min=(y,m)=>S.cmp(y,m)<0?y:m;this._IDBKeyRange=y._deps.IDBKeyRange})}function eventRejectHandler(y){return wrap(function(m){preventDefault(m);y(m.target.error);return false})}function preventDefault(y){if(y.stopPropagation)y.stopPropagation();if(y.preventDefault)y.preventDefault()}const e9="storagemutated";const e7="x-storagemutated-1";const te=Events(null,e9);class tr{_lock(){assert(!eR.global);++this._reculock;if(1===this._reculock&&!eR.global)eR.lockOwnerFor=this;return this}_unlock(){assert(!eR.global);if(0===--this._reculock){if(!eR.global)eR.lockOwnerFor=null;while(this._blockedFuncs.length>0&&!this._locked()){var y=this._blockedFuncs.shift();try{usePSD(y[1],y[0])}catch(m){}}}return this}_locked(){return this._reculock&&eR.lockOwnerFor!==this}create(y){if(!this.mode)return this;const m=this.db.idbdb;const w=this.db._state.dbOpenError;assert(!this.idbtrans);if(!y&&!m)switch(w&&w.name){case"DatabaseClosedError":throw new eu.DatabaseClosed(w);case"MissingAPIError":throw new eu.MissingAPI(w.message,w);default:throw new eu.OpenFailed(w)}if(!this.active)throw new eu.TransactionInactive;assert(null===this._completion._state);y=this.idbtrans=y||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):m.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));y.onerror=wrap(m=>{preventDefault(m);this._reject(y.error)});y.onabort=wrap(m=>{preventDefault(m);this.active&&this._reject(new eu.Abort(y.error));this.active=false;this.on("abort").fire(m)});y.oncomplete=wrap(()=>{this.active=false;this._resolve();if("mutatedParts"in y)te.storagemutated.fire(y["mutatedParts"])});return this}_promise(y,m,w){if("readwrite"===y&&"readwrite"!==this.mode)return eq(new eu.ReadOnly("Transaction is readonly"));if(!this.active)return eq(new eu.TransactionInactive);if(this._locked())return new DexiePromise((x,S)=>{this._blockedFuncs.push([()=>{this._promise(y,m,w).then(x,S)},eR])});if(w)return newScope(()=>{var y=new DexiePromise((y,w)=>{this._lock();const x=m(y,w,this);if(x&&x.then)x.then(y,w)});y.finally(()=>this._unlock());y._lib=true;return y});var x=new DexiePromise((y,w)=>{var x=m(y,w,this);if(x&&x.then)x.then(y,w)});x._lib=true;return x}_root(){return this.parent?this.parent._root():this}waitFor(y){var m=this._root();const w=DexiePromise.resolve(y);if(m._waitingFor)m._waitingFor=m._waitingFor.then(()=>w);else{m._waitingFor=w;m._waitingQueue=[];var x=m.idbtrans.objectStore(m.storeNames[0]);(function spin(){++m._spinCount;while(m._waitingQueue.length)m._waitingQueue.shift()();if(m._waitingFor)x.get(-1/0).onsuccess=spin})()}var S=m._waitingFor;return new DexiePromise((y,x)=>{w.then(w=>m._waitingQueue.push(wrap(y.bind(null,w))),y=>m._waitingQueue.push(wrap(x.bind(null,y)))).finally(()=>{if(m._waitingFor===S)m._waitingFor=null})})}abort(){if(this.active){this.active=false;if(this.idbtrans)this.idbtrans.abort();this._reject(new eu.Abort)}}table(y){const m=this._memoizedTables||(this._memoizedTables={});if(hasOwn(m,y))return m[y];const w=this.schema[y];if(!w)throw new eu.NotFound("Table "+y+" not part of transaction");const x=new this.db.Table(y,w,this);x.core=this.db.core.table(y);m[y]=x;return x}}function createTransactionConstructor(y){return makeClassConstructor(tr.prototype,function(m,w,x,S,P){this.db=y;this.mode=m;this.storeNames=w;this.schema=x;this.chromeTransactionDurability=S;this.idbtrans=null;this.on=Events(this,"complete","error","abort");this.parent=P||null;this.active=true;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new DexiePromise((y,m)=>{this._resolve=y;this._reject=m});this._completion.then(()=>{this.active=false;this.on.complete.fire()},y=>{var m=this.active;this.active=false;this.on.error.fire(y);this.parent?this.parent._reject(y):m&&this.idbtrans&&this.idbtrans.abort();return eq(y)})})}function createIndexSpec(y,m,w,x,S,P,E){return{name:y,keyPath:m,unique:w,multi:x,auto:S,compound:P,src:(w&&!E?"&":"")+(x?"*":"")+(S?"++":"")+nameFromKeyPath(m)}}function nameFromKeyPath(y){return"string"==typeof y?y:y?"["+[].join.call(y,"+")+"]":""}function createTableSchema(y,m,w){return{name:y,primKey:m,indexes:w,mappedClass:null,idxByName:arrayToObject(w,y=>[y.name,y])}}function getKeyExtractor(y){if(null==y)return()=>void 0;if("string"==typeof y)return getSinglePathKeyExtractor(y);return m=>getByKeyPath(m,y)}function getSinglePathKeyExtractor(y){const m=y.split(".");if(1===m.length)return m=>m[y];return m=>getByKeyPath(m,y)}function arrayify(y){return[].slice.call(y)}let ti=0;function getKeyPathAlias(y){return null==y?":id":"string"==typeof y?y:`[${y.join("+")}]`}function createDBCore(y,m,w,x){const S=m.cmp.bind(m);function extractSchema(y,m){const w=arrayify(y.objectStoreNames);return{schema:{name:y.name,tables:w.map(y=>m.objectStore(y)).map(y=>{const{keyPath:m,autoIncrement:w}=y;const x=P(m);const S=null==m;const E={};const T={name:y.name,primaryKey:{name:null,isPrimaryKey:true,outbound:S,compound:x,keyPath:m,autoIncrement:w,unique:true,extractKey:getKeyExtractor(m)},indexes:arrayify(y.indexNames).map(m=>y.index(m)).map(y=>{const{name:m,unique:w,multiEntry:x,keyPath:S}=y;const T=P(S);const C={name:m,compound:T,keyPath:S,unique:w,multiEntry:x,extractKey:getKeyExtractor(S)};E[getKeyPathAlias(S)]=C;return C}),getIndexByKeyPath:y=>E[getKeyPathAlias(y)]};E[":id"]=T.primaryKey;if(null!=m)E[getKeyPathAlias(m)]=T.primaryKey;return T})},hasGetAll:w.length>0&&"getAll"in m.objectStore(w[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function makeIDBKeyRange(y){if(3===y.type)return null;if(4===y.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:m,upper:x,lowerOpen:S,upperOpen:P}=y;const E=void 0===m?void 0===x?null:w.upperBound(x,!!P):void 0===x?w.lowerBound(m,!!S):w.bound(m,x,!!S,!!P);return E}function createDbCoreTable(y){const m=y.name;function mutate({trans:y,type:w,keys:x,values:S,range:P}){return new Promise((E,T)=>{E=wrap(E);const C=y.objectStore(m);const O=null==C.keyPath;const A="put"===w||"add"===w;if(!A&&"delete"!==w&&"deleteRange"!==w)throw new Error("Invalid operation type: "+w);const{length:R}=x||S||{length:1};if(x&&S&&x.length!==S.length)throw new Error("Given keys array must have same length as given values array.");if(0===R)return E({numFailures:0,failures:{},results:[],lastResult:void 0});let I;const M=[];const D=[];let j=0;const errorHandler=y=>{++j;preventDefault(y)};if("deleteRange"===w){if(4===P.type)return E({numFailures:j,failures:D,results:[],lastResult:void 0});if(3===P.type)M.push(I=C.clear());else M.push(I=C.delete(makeIDBKeyRange(P)))}else{const[$,N]=A?O?[S,x]:[S,null]:[x,null];if(A)for(let q=0;q<R;++q){M.push(I=N&&void 0!==N[q]?C[w]($[q],N[q]):C[w]($[q]));I.onerror=errorHandler}else for(let V=0;V<R;++V){M.push(I=C[w]($[V]));I.onerror=errorHandler}}const done=y=>{const m=y.target.result;M.forEach((y,m)=>null!=y.error&&(D[m]=y.error));E({numFailures:j,failures:D,results:"delete"===w?x:M.map(y=>y.result),lastResult:m})};I.onerror=y=>{errorHandler(y);done(y)};I.onsuccess=done})}function openCursor({trans:y,values:w,query:x,reverse:S,unique:P}){return new Promise((E,T)=>{E=wrap(E);const{index:C,range:O}=x;const A=y.objectStore(m);const R=C.isPrimaryKey?A:A.index(C.name);const I=S?P?"prevunique":"prev":P?"nextunique":"next";const M=!w&&"openKeyCursor"in R?R.openKeyCursor(makeIDBKeyRange(O),I):R.openCursor(makeIDBKeyRange(O),I);M.onerror=eventRejectHandler(T);M.onsuccess=wrap(m=>{const w=M.result;if(!w){E(null);return}w.___id=++ti;w.done=false;const x=w.continue.bind(w);let S=w.continuePrimaryKey;if(S)S=S.bind(w);const P=w.advance.bind(w);const doThrowCursorIsNotStarted=()=>{throw new Error("Cursor not started")};const doThrowCursorIsStopped=()=>{throw new Error("Cursor not stopped")};w.trans=y;w.stop=w.continue=w.continuePrimaryKey=w.advance=doThrowCursorIsNotStarted;w.fail=wrap(T);w.next=function(){let y=1;return this.start(()=>y--?this.continue():this.stop()).then(()=>this)};w.start=y=>{const m=new Promise((y,m)=>{y=wrap(y);M.onerror=eventRejectHandler(m);w.fail=m;w.stop=m=>{w.stop=w.continue=w.continuePrimaryKey=w.advance=doThrowCursorIsStopped;y(m)}});const guardedCallback=()=>{if(M.result)try{y()}catch(m){w.fail(m)}else{w.done=true;w.start=()=>{throw new Error("Cursor behind last entry")};w.stop()}};M.onsuccess=wrap(y=>{M.onsuccess=guardedCallback;guardedCallback()});w.continue=x;w.continuePrimaryKey=S;w.advance=P;guardedCallback();return m};E(w)},T)})}function query(y){return w=>{return new Promise((x,S)=>{x=wrap(x);const{trans:P,values:E,limit:T,query:C}=w;const O=T===1/0?void 0:T;const{index:A,range:R}=C;const I=P.objectStore(m);const M=A.isPrimaryKey?I:I.index(A.name);const D=makeIDBKeyRange(R);if(0===T)return x({result:[]});if(y){const j=E?M.getAll(D,O):M.getAllKeys(D,O);j.onsuccess=y=>x({result:y.target.result});j.onerror=eventRejectHandler(S)}else{let $=0;const N=!E&&"openKeyCursor"in M?M.openKeyCursor(D):M.openCursor(D);const q=[];N.onsuccess=y=>{const m=N.result;if(!m)return x({result:q});q.push(E?m.value:m.primaryKey);if(++$===T)return x({result:q});m.continue()};N.onerror=eventRejectHandler(S)}})}}return{name:m,schema:y,mutate,getMany({trans:y,keys:w}){return new Promise((x,S)=>{x=wrap(x);const P=y.objectStore(m);const E=w.length;const T=new Array(E);let C=0;let O=0;let A;const successHandler=y=>{const m=y.target;T[m._pos]=m.result;if(++O===C)x(T)};const R=eventRejectHandler(S);for(let I=0;I<E;++I){const M=w[I];if(null!=M){A=P.get(w[I]);A._pos=I;A.onsuccess=successHandler;A.onerror=R;++C}}if(0===C)x(T)})},get({trans:y,key:w}){return new Promise((x,S)=>{x=wrap(x);const P=y.objectStore(m);const E=P.get(w);E.onsuccess=y=>x(y.target.result);E.onerror=eventRejectHandler(S)})},query:query(T),openCursor,count({query:y,trans:w}){const{index:x,range:S}=y;return new Promise((y,P)=>{const E=w.objectStore(m);const T=x.isPrimaryKey?E:E.index(x.name);const C=makeIDBKeyRange(S);const O=C?T.count(C):T.count();O.onsuccess=wrap(m=>y(m.target.result));O.onerror=eventRejectHandler(P)})}}}const{schema:E,hasGetAll:T}=extractSchema(y,x);const C=E.tables.map(y=>createDbCoreTable(y));const O={};C.forEach(y=>O[y.name]=y);return{stack:"dbcore",transaction:y.transaction.bind(y),table(y){const m=O[y];if(!m)throw new Error(`Table '${y}' not found`);return O[y]},cmp:S,MIN_KEY:-1/0,MAX_KEY:getMaxKey(w),schema:E}}function createMiddlewareStack(y,m){return m.reduce((y,{create:m})=>({...y,...m(y)}),y)}function createMiddlewareStacks(y,m,{IDBKeyRange:w,indexedDB:x},S){const P=createMiddlewareStack(createDBCore(m,x,w,S),y.dbcore);return{dbcore:P}}function generateMiddlewareStacks({_novip:y},m){const w=m.db;const x=createMiddlewareStacks(y._middlewares,w,y._deps,m);y.core=x.dbcore;y.tables.forEach(m=>{const w=m.name;if(y.core.schema.tables.some(y=>y.name===w)){m.core=y.core.table(w);if(y[w]instanceof y.Table)y[w].core=m.core}})}function setApiOnPlace({_novip:y},m,w,x){w.forEach(w=>{const S=x[w];m.forEach(m=>{const x=getPropertyDescriptor(m,w);if(!x||"value"in x&&void 0===x.value)if(m===y.Transaction.prototype||m instanceof y.Transaction)setProp(m,w,{get(){return this.table(w)},set(y){C(this,w,{value:y,writable:true,configurable:true,enumerable:true})}});else m[w]=new y.Table(w,S)})})}function removeTablesApi({_novip:y},m){m.forEach(m=>{for(let w in m)if(m[w]instanceof y.Table)delete m[w]})}function lowerVersionFirst(y,m){return y._cfg.version-m._cfg.version}function runUpgraders(y,m,w,x){const P=y._dbSchema;const E=y._createTransaction("readwrite",y._storeNames,P);E.create(w);E._completion.catch(x);const T=E._reject.bind(E);const C=eR.transless||eR;newScope(()=>{eR.trans=E;eR.transless=C;if(0===m){S(P).forEach(y=>{createTable(w,y,P[y].primKey,P[y].indexes)});generateMiddlewareStacks(y,w);DexiePromise.follow(()=>y.on.populate.fire(E)).catch(T)}else updateTablesAndIndexes(y,m,E,w).catch(T)})}function updateTablesAndIndexes({_novip:y},m,w,x){const P=[];const E=y._versions;let T=y._dbSchema=buildGlobalSchema(y,y.idbdb,x);let C=false;const O=E.filter(y=>y._cfg.version>=m);O.forEach(E=>{P.push(()=>{const P=T;const O=E._cfg.dbschema;adjustToExistingIndexNames(y,P,x);adjustToExistingIndexNames(y,O,x);T=y._dbSchema=O;const A=getSchemaDiff(P,O);A.add.forEach(y=>{createTable(x,y[0],y[1].primKey,y[1].indexes)});A.change.forEach(y=>{if(y.recreate)throw new eu.Upgrade("Not yet support for changing primary key");{const m=x.objectStore(y.name);y.add.forEach(y=>addIndex(m,y));y.change.forEach(y=>{m.deleteIndex(y.name);addIndex(m,y)});y.del.forEach(y=>m.deleteIndex(y))}});const R=E._cfg.contentUpgrade;if(R&&E._cfg.version>m){generateMiddlewareStacks(y,x);w._memoizedTables={};C=true;let I=shallowClone(O);A.del.forEach(y=>{I[y]=P[y]});removeTablesApi(y,[y.Transaction.prototype]);setApiOnPlace(y,[y.Transaction.prototype],S(I),I);w.schema=I;const M=V(R);if(M)incrementExpectedAwaits();let D;const j=DexiePromise.follow(()=>{D=R(w);if(D){if(M){var y=decrementExpectedAwaits.bind(null,null);D.then(y,y)}}});return D&&"function"==typeof D.then?DexiePromise.resolve(D):j.then(()=>D)}});P.push(m=>{if(!C||!eJ){const x=E._cfg.dbschema;deleteRemovedTables(x,m)}removeTablesApi(y,[y.Transaction.prototype]);setApiOnPlace(y,[y.Transaction.prototype],y._storeNames,y._dbSchema);w.schema=y._dbSchema})});function runQueue(){return P.length?DexiePromise.resolve(P.shift()(w.idbtrans)).then(runQueue):DexiePromise.resolve()}return runQueue().then(()=>{createMissingTables(T,x)})}function getSchemaDiff(y,m){const w={del:[],add:[],change:[]};let x;for(x in y)if(!m[x])w.del.push(x);for(x in m){const S=y[x],P=m[x];if(S){const E={name:x,def:P,recreate:false,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")===""+(P.primKey.keyPath||"")&&(S.primKey.auto===P.primKey.auto||eZ)){const T=S.idxByName;const C=P.idxByName;let O;for(O in T)if(!C[O])E.del.push(O);for(O in C){const A=T[O],R=C[O];if(A){if(A.src!==R.src)E.change.push(R)}else E.add.push(R)}if(E.del.length>0||E.add.length>0||E.change.length>0)w.change.push(E)}else{E.recreate=true;w.change.push(E)}}else w.add.push([x,P])}return w}function createTable(y,m,w,x){const S=y.db.createObjectStore(m,w.keyPath?{keyPath:w.keyPath,autoIncrement:w.auto}:{autoIncrement:w.auto});x.forEach(y=>addIndex(S,y));return S}function createMissingTables(y,m){S(y).forEach(w=>{if(!m.db.objectStoreNames.contains(w))createTable(m,w,y[w].primKey,y[w].indexes)})}function deleteRemovedTables(y,m){for(var w=0;w<m.db.objectStoreNames.length;++w){var x=m.db.objectStoreNames[w];if(null==y[x])m.db.deleteObjectStore(x)}}function addIndex(y,m){y.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function buildGlobalSchema(y,m,w){const x={};const S=slice(m.objectStoreNames,0);S.forEach(y=>{const m=w.objectStore(y);let S=m.keyPath;const P=createIndexSpec(nameFromKeyPath(S),S||"",false,false,!!m.autoIncrement,S&&"string"!=typeof S,true);const E=[];for(let T=0;T<m.indexNames.length;++T){const C=m.index(m.indexNames[T]);S=C.keyPath;var O=createIndexSpec(C.name,S,!!C.unique,!!C.multiEntry,false,S&&"string"!=typeof S,false);E.push(O)}x[y]=createTableSchema(y,P,E)});return x}function readGlobalSchema({_novip:y},m,w){y.verno=m.version/10;const x=y._dbSchema=buildGlobalSchema(y,m,w);y._storeNames=slice(m.objectStoreNames,0);setApiOnPlace(y,[y._allTables],S(x),x)}function verifyInstalledSchema(y,m){const w=buildGlobalSchema(y,y.idbdb,m);const x=getSchemaDiff(w,y._dbSchema);return!(x.add.length||x.change.some(y=>y.add.length||y.change.length))}function adjustToExistingIndexNames({_novip:y},m,w){const S=w.db.objectStoreNames;for(let P=0;P<S.length;++P){const E=S[P];const T=w.objectStore(E);y._hasGetAll="getAll"in T;for(let C=0;C<T.indexNames.length;++C){const O=T.indexNames[C];const A=T.index(O).keyPath;const R="string"==typeof A?A:"["+slice(A).join("+")+"]";if(m[E]){const I=m[E].idxByName[R];if(I){I.name=O;delete m[E].idxByName[R];m[E].idxByName[O]=I}}}}if("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&x.WorkerGlobalScope&&x instanceof x.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)y._hasGetAll=false}function parseIndexSyntax(y){return y.split(",").map((y,m)=>{y=y.trim();const w=y.replace(/([&*]|\+\+)/g,"");const x=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return createIndexSpec(w,x||null,/\&/.test(y),/\*/.test(y),/\+\+/.test(y),P(x),0===m)})}class to{_parseStoresSpec(y,m){S(y).forEach(w=>{if(null!==y[w]){var x=parseIndexSyntax(y[w]);var S=x.shift();if(S.multi)throw new eu.Schema("Primary key cannot be multi-valued");x.forEach(y=>{if(y.auto)throw new eu.Schema("Only primary key can be marked as autoIncrement (++)");if(!y.keyPath)throw new eu.Schema("Index must have a name and cannot be an empty string")});m[w]=createTableSchema(w,S,x)}})}stores(y){const m=this.db;this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,y):y;const w=m._versions;const x={};let P={};w.forEach(y=>{extend(x,y._cfg.storesSource);P=y._cfg.dbschema={};y._parseStoresSpec(x,P)});m._dbSchema=P;removeTablesApi(m,[m._allTables,m,m.Transaction.prototype]);setApiOnPlace(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],S(P),P);m._storeNames=S(P);return this}upgrade(y){this._cfg.contentUpgrade=promisableChain(this._cfg.contentUpgrade||nop,y);return this}}function createVersionConstructor(y){return makeClassConstructor(to.prototype,function(m){this.db=y;this._cfg={version:m,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function getDbNamesTable(y,m){let w=y["_dbNamesDB"];if(!w){w=y["_dbNamesDB"]=new th(eY,{addons:[],indexedDB:y,IDBKeyRange:m});w.version(1).stores({dbnames:"name"})}return w.table("dbnames")}function hasDatabasesNative(y){return y&&"function"==typeof y.databases}function getDatabaseNames({indexedDB:y,IDBKeyRange:m}){return hasDatabasesNative(y)?Promise.resolve(y.databases()).then(y=>y.map(y=>y.name).filter(y=>y!==eY)):getDbNamesTable(y,m).toCollection().primaryKeys()}function _onDatabaseCreated({indexedDB:y,IDBKeyRange:m},w){hasDatabasesNative(y)||w===eY||getDbNamesTable(y,m).put({name:w}).catch(nop)}function _onDatabaseDeleted({indexedDB:y,IDBKeyRange:m},w){hasDatabasesNative(y)||w===eY||getDbNamesTable(y,m).delete(w).catch(nop)}function vip(y){return newScope(function(){eR.letThrough=true;return y()})}function idbReady(){var y=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!y||!indexedDB.databases)return Promise.resolve();var m;return new Promise(function(y){var tryIdb=function(){return indexedDB.databases().finally(y)};m=setInterval(tryIdb,100);tryIdb()}).finally(function(){return clearInterval(m)})}function dexieOpen(y){const m=y._state;const{indexedDB:w}=y._deps;if(m.isBeingOpened||y.idbdb)return m.dbReadyPromise.then(()=>m.dbOpenError?eq(m.dbOpenError):y);et&&(m.openCanceller._stackHolder=getErrorWithStack());m.isBeingOpened=true;m.dbOpenError=null;m.openComplete=false;const x=m.openCanceller;function throwIfCancelled(){if(m.openCanceller!==x)throw new eu.DatabaseClosed("db.open() was cancelled")}let S=m.dbReadyResolve,P=null,E=false;return DexiePromise.race([x,("undefined"==typeof navigator?DexiePromise.resolve():idbReady()).then(()=>new DexiePromise((x,S)=>{throwIfCancelled();if(!w)throw new eu.MissingAPI;const T=y.name;const C=m.autoSchema?w.open(T):w.open(T,Math.round(10*y.verno));if(!C)throw new eu.MissingAPI;C.onerror=eventRejectHandler(S);C.onblocked=wrap(y._fireOnBlocked);C.onupgradeneeded=wrap(x=>{P=C.transaction;if(m.autoSchema&&!y._options.allowEmptyDB){C.onerror=preventDefault;P.abort();C.result.close();const O=w.deleteDatabase(T);O.onsuccess=O.onerror=wrap(()=>{S(new eu.NoSuchDatabase(`Database ${T} doesnt exist`))})}else{P.onerror=eventRejectHandler(S);var A=x.oldVersion>Math.pow(2,62)?0:x.oldVersion;E=A<1;y._novip.idbdb=C.result;runUpgraders(y,A/10,P,S)}},S);C.onsuccess=wrap(()=>{P=null;const w=y._novip.idbdb=C.result;const S=slice(w.objectStoreNames);if(S.length>0)try{const O=w.transaction(safariMultiStoreFix(S),"readonly");if(m.autoSchema)readGlobalSchema(y,w,O);else{adjustToExistingIndexNames(y,y._dbSchema,O);if(!verifyInstalledSchema(y,O))console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")}generateMiddlewareStacks(y,O)}catch(A){}eQ.push(y);w.onversionchange=wrap(w=>{m.vcFired=true;y.on("versionchange").fire(w)});w.onclose=wrap(m=>{y.on("close").fire(m)});if(E)_onDatabaseCreated(y._deps,T);x()},S)}))]).then(()=>{throwIfCancelled();m.onReadyBeingFired=[];return DexiePromise.resolve(vip(()=>y.on.ready.fire(y.vip))).then(function fireRemainders(){if(m.onReadyBeingFired.length>0){let w=m.onReadyBeingFired.reduce(promisableChain,nop);m.onReadyBeingFired=[];return DexiePromise.resolve(vip(()=>w(y.vip))).then(fireRemainders)}})}).finally(()=>{m.onReadyBeingFired=null;m.isBeingOpened=false}).then(()=>{return y}).catch(w=>{m.dbOpenError=w;try{P&&P.abort()}catch(S){}if(x===m.openCanceller)y._close();return eq(w)}).finally(()=>{m.openComplete=true;S()})}function awaitIterator(y){var callNext=m=>y.next(m),doThrow=m=>y.throw(m),m=step(callNext),w=step(doThrow);function step(y){return x=>{var S=y(x),E=S.value;return S.done?E:E&&"function"==typeof E.then?E.then(m,w):P(E)?Promise.all(E).then(m,w):m(E)}}return step(callNext)()}function extractTransactionArgs(y,m,w){var x=arguments.length;if(x<2)throw new eu.InvalidArgument("Too few arguments");var S=new Array(x-1);while(--x)S[x-1]=arguments[x];w=S.pop();var P=flatten(S);return[y,P,w]}function enterTransactionScope(y,m,w,x,S){return DexiePromise.resolve().then(()=>{const P=eR.transless||eR;const E=y._createTransaction(m,w,y._dbSchema,x);const T={trans:E,transless:P};if(x)E.idbtrans=x.idbtrans;else E.create();const C=V(S);if(C)incrementExpectedAwaits();let O;const A=DexiePromise.follow(()=>{O=S.call(E,E);if(O){if(C){var y=decrementExpectedAwaits.bind(null,null);O.then(y,y)}else if("function"==typeof O.next&&"function"==typeof O.throw)O=awaitIterator(O)}},T);return(O&&"function"==typeof O.then?DexiePromise.resolve(O).then(y=>E.active?y:eq(new eu.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):A.then(()=>O)).then(y=>{if(x)E._resolve();return E._completion.then(()=>y)}).catch(y=>{E._reject(y);return eq(y)})})}function pad(y,m,w){const x=P(y)?y.slice():[y];for(let S=0;S<w;++S)x.push(m);return x}function createVirtualIndexMiddleware(y){return{...y,table(m){const w=y.table(m);const{schema:x}=w;const S={};const P=[];function addVirtualIndexes(y,m,w){const x=getKeyPathAlias(y);const E=S[x]=S[x]||[];const T=null==y?0:"string"==typeof y?1:y.length;const C=m>0;const O={...w,isVirtual:C,keyTail:m,keyLength:T,extractKey:getKeyExtractor(y),unique:!C&&w.unique};E.push(O);if(!O.isPrimaryKey)P.push(O);if(T>1){const A=2===T?y[0]:y.slice(0,T-1);addVirtualIndexes(A,m+1,w)}E.sort((y,m)=>y.keyTail-m.keyTail);return O}const E=addVirtualIndexes(x.primaryKey.keyPath,0,x.primaryKey);S[":id"]=[E];for(const T of x.indexes)addVirtualIndexes(T.keyPath,0,T);function findBestIndex(y){const m=S[getKeyPathAlias(y)];return m&&m[0]}function translateRange(m,w){return{type:1===m.type?2:m.type,lower:pad(m.lower,m.lowerOpen?y.MAX_KEY:y.MIN_KEY,w),lowerOpen:true,upper:pad(m.upper,m.upperOpen?y.MIN_KEY:y.MAX_KEY,w),upperOpen:true}}function translateRequest(y){const m=y.query.index;return m.isVirtual?{...y,query:{index:m,range:translateRange(y.query.range,m.keyTail)}}:y}const C={...w,schema:{...x,primaryKey:E,indexes:P,getIndexByKeyPath:findBestIndex},count(y){return w.count(translateRequest(y))},query(y){return w.query(translateRequest(y))},openCursor(m){const{keyTail:x,isVirtual:S,keyLength:P}=m.query.index;if(!S)return w.openCursor(m);function createVirtualCursor(w){function _continue(S){null!=S?w.continue(pad(S,m.reverse?y.MAX_KEY:y.MIN_KEY,x)):m.unique?w.continue(w.key.slice(0,P).concat(m.reverse?y.MIN_KEY:y.MAX_KEY,x)):w.continue()}const S=Object.create(w,{continue:{value:_continue},continuePrimaryKey:{value(m,S){w.continuePrimaryKey(pad(m,y.MAX_KEY,x),S)}},primaryKey:{get(){return w.primaryKey}},key:{get(){const y=w.key;return 1===P?y[0]:y.slice(0,P)}},value:{get(){return w.value}}});return S}return w.openCursor(translateRequest(m)).then(y=>y&&createVirtualCursor(y))}};return C}}}const ts={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:createVirtualIndexMiddleware};function getObjectDiff(y,m,w,x){w=w||{};x=x||"";S(y).forEach(S=>{if(hasOwn(m,S)){var P=y[S],E=m[S];if("object"==typeof P&&"object"==typeof E&&P&&E){const T=toStringTag(P);const C=toStringTag(E);if(T!==C)w[x+S]=m[S];else if("Object"===T)getObjectDiff(P,E,w,x+S+".");else if(P!==E)w[x+S]=m[S]}else if(P!==E)w[x+S]=m[S]}else w[x+S]=void 0});S(m).forEach(S=>{if(!hasOwn(y,S))w[x+S]=m[S]});return w}function getEffectiveKeys(y,m){if("delete"===m.type)return m.keys;return m.keys||m.values.map(y.extractKey)}const ta={stack:"dbcore",name:"HooksMiddleware",level:2,create:y=>({...y,table(m){const w=y.table(m);const{primaryKey:x}=w.schema;const S={...w,mutate(y){const S=eR.trans;const{deleting:P,creating:E,updating:T}=S.table(m).hook;switch(y.type){case"add":if(E.fire===nop)break;return S._promise("readwrite",()=>addPutOrDelete(y),true);case"put":if(E.fire===nop&&T.fire===nop)break;return S._promise("readwrite",()=>addPutOrDelete(y),true);case"delete":if(P.fire===nop)break;return S._promise("readwrite",()=>addPutOrDelete(y),true);case"deleteRange":if(P.fire===nop)break;return S._promise("readwrite",()=>deleteRange(y),true)}return w.mutate(y);function addPutOrDelete(y){const m=eR.trans;const S=y.keys||getEffectiveKeys(x,y);if(!S)throw new Error("Keys missing");y="add"===y.type||"put"===y.type?{...y,keys:S}:{...y};if("delete"!==y.type)y.values=[...y.values];if(y.keys)y.keys=[...y.keys];return getExistingValues(w,y,S).then(C=>{const O=S.map((w,S)=>{const O=C[S];const A={onerror:null,onsuccess:null};if("delete"===y.type)P.fire.call(A,w,O,m);else if("add"===y.type||void 0===O){const R=E.fire.call(A,w,y.values[S],m);if(null==w&&null!=R){w=R;y.keys[S]=w;if(!x.outbound)setByKeyPath(y.values[S],x.keyPath,w)}}else{const I=getObjectDiff(O,y.values[S]);const M=T.fire.call(A,I,w,O,m);if(M){const D=y.values[S];Object.keys(M).forEach(y=>{if(hasOwn(D,y))D[y]=M[y];else setByKeyPath(D,y,M[y])})}}return A});return w.mutate(y).then(({failures:m,results:w,numFailures:x,lastResult:P})=>{for(let E=0;E<S.length;++E){const T=w?w[E]:S[E];const A=O[E];if(null==T)A.onerror&&A.onerror(m[E]);else A.onsuccess&&A.onsuccess("put"===y.type&&C[E]?y.values[E]:T)}return{failures:m,results:w,numFailures:x,lastResult:P}}).catch(y=>{O.forEach(m=>m.onerror&&m.onerror(y));return Promise.reject(y)})})}function deleteRange(y){return deleteNextChunk(y.trans,y.range,1e4)}function deleteNextChunk(y,m,S){return w.query({trans:y,values:false,query:{index:x,range:m},limit:S}).then(({result:w})=>{return addPutOrDelete({type:"delete",keys:w,trans:y}).then(x=>{if(x.numFailures>0)return Promise.reject(x.failures[0]);if(w.length<S)return{failures:[],numFailures:0,lastResult:void 0};return deleteNextChunk(y,{...m,lower:w[w.length-1],lowerOpen:true},S)})})}}};return S}})};function getExistingValues(y,m,w){return"add"===m.type?Promise.resolve([]):y.getMany({trans:m.trans,keys:w,cache:"immutable"})}let tc;function cmp(y,m){if(tc)return tc(y,m);const{indexedDB:w}=e2;if(!w)throw new eu.MissingAPI;tc=(y,m)=>{try{return null==y||null==m?NaN:w.cmp(y,m)}catch(x){return NaN}};return tc(y,m)}function getFromTransactionCache(y,m,w){try{if(!m)return null;if(m.keys.length<y.length)return null;const x=[];for(let S=0,P=0;S<m.keys.length&&P<y.length;++S)if(0===cmp(m.keys[S],y[P])){x.push(w?deepClone(m.values[S]):m.values[S]);++P}return x.length===y.length?x:null}catch(E){return null}}const tu={stack:"dbcore",level:-1,create:y=>{return{table:m=>{const w=y.table(m);return{...w,getMany:y=>{if(!y.cache)return w.getMany(y);const m=getFromTransactionCache(y.keys,y.trans["_cache"],"clone"===y.cache);if(m)return DexiePromise.resolve(m);return w.getMany(y).then(m=>{y.trans["_cache"]={keys:y.keys,values:"clone"===y.cache?deepClone(m):m};return m})},mutate:y=>{if("add"!==y.type)y.trans["_cache"]=null;return w.mutate(y)}}}}}};function isEmptyRange(y){return!("from"in y)}const RangeSet=function(y,m){if(this)extend(this,arguments.length?{d:1,from:y,to:arguments.length>1?m:y}:{d:0});else{const w=new RangeSet;if(y&&"d"in y)extend(w,y);return w}};props(RangeSet.prototype,{add(y){mergeRanges(this,y);return this},addKey(y){addRange(this,y,y);return this},addKeys(y){y.forEach(y=>addRange(this,y,y));return this},[$](){return getRangeSetIterator(this)}});function addRange(y,m,w){const x=cmp(m,w);if(isNaN(x))return;if(x>0)throw RangeError();if(isEmptyRange(y))return extend(y,{from:m,to:w,d:1});const S=y.l;const P=y.r;if(cmp(w,y.from)<0){S?addRange(S,m,w):y.l={from:m,to:w,d:1,l:null,r:null};return rebalance(y)}if(cmp(m,y.to)>0){P?addRange(P,m,w):y.r={from:m,to:w,d:1,l:null,r:null};return rebalance(y)}if(cmp(m,y.from)<0){y.from=m;y.l=null;y.d=P?P.d+1:1}if(cmp(w,y.to)>0){y.to=w;y.r=null;y.d=y.l?y.l.d+1:1}const E=!y.r;if(S&&!y.l)mergeRanges(y,S);if(P&&E)mergeRanges(y,P)}function mergeRanges(y,m){function _addRangeSet(y,{from:m,to:w,l:x,r:S}){addRange(y,m,w);if(x)_addRangeSet(y,x);if(S)_addRangeSet(y,S)}if(!isEmptyRange(m))_addRangeSet(y,m)}function rangesOverlap(y,m){const w=getRangeSetIterator(m);let x=w.next();if(x.done)return false;let S=x.value;const P=getRangeSetIterator(y);let E=P.next(S.from);let T=E.value;while(!x.done&&!E.done){if(cmp(T.from,S.to)<=0&&cmp(T.to,S.from)>=0)return true;cmp(S.from,T.from)<0?S=(x=w.next(T.from)).value:T=(E=P.next(S.from)).value}return false}function getRangeSetIterator(y){let m=isEmptyRange(y)?null:{s:0,n:y};return{next(y){const w=arguments.length>0;while(m)switch(m.s){case 0:m.s=1;if(w)while(m.n.l&&cmp(y,m.n.from)<0)m={up:m,n:m.n.l,s:1};else while(m.n.l)m={up:m,n:m.n.l,s:1};case 1:m.s=2;if(!w||cmp(y,m.n.to)<=0)return{value:m.n,done:false};case 2:if(m.n.r){m.s=3;m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:true}}}}function rebalance(y){var m,w;const x=((null===(m=y.r)||void 0===m?void 0:m.d)||0)-((null===(w=y.l)||void 0===w?void 0:w.d)||0);const S=x>1?"r":x<-1?"l":"";if(S){const P="r"===S?"l":"r";const E={...y};const T=y[S];y.from=T.from;y.to=T.to;y[S]=T[S];E[S]=T[P];y[P]=E;E.d=computeDepth(E)}y.d=computeDepth(y)}function computeDepth({r:y,l:m}){return(y?m?Math.max(y.d,m.d):y.d:m?m.d:0)+1}const tl={stack:"dbcore",level:0,create:y=>{const m=y.schema.name;const w=new RangeSet(y.MIN_KEY,y.MAX_KEY);return{...y,table:x=>{const E=y.table(x);const{schema:T}=E;const{primaryKey:C}=T;const{extractKey:O,outbound:A}=C;const R={...E,mutate:y=>{const S=y.trans;const C=S.mutatedParts||(S.mutatedParts={});const getRangeSet=y=>{const w=`idb://${m}/${x}/${y}`;return C[w]||(C[w]=new RangeSet)};const O=getRangeSet("");const A=getRangeSet(":dels");const{type:R}=y;let[I,M]="deleteRange"===y.type?[y.range]:"delete"===y.type?[y.keys]:y.values.length<50?[[],y.values]:[];const D=y.trans["_cache"];return E.mutate(y).then(y=>{if(P(I)){if("delete"!==R)I=y.results;O.addKeys(I);const m=getFromTransactionCache(I,D);if(!m&&"add"!==R)A.addKeys(I);if(m||M)trackAffectedIndexes(getRangeSet,T,m,M)}else if(I){const x={from:I.lower,to:I.upper};A.add(x);O.add(x)}else{O.add(w);A.add(w);T.indexes.forEach(y=>getRangeSet(y.name).add(w))}return y})}};const getRange=({query:{index:m,range:w}})=>{var x,S;return[m,new RangeSet(null!==(x=w.lower)&&void 0!==x?x:y.MIN_KEY,null!==(S=w.upper)&&void 0!==S?S:y.MAX_KEY)]};const I={get:y=>[C,new RangeSet(y.key)],getMany:y=>[C,new RangeSet().addKeys(y.keys)],count:getRange,query:getRange,openCursor:getRange};S(I).forEach(y=>{R[y]=function(S){const{subscr:P}=eR;if(P){const getRangeSet=y=>{const w=`idb://${m}/${x}/${y}`;return P[w]||(P[w]=new RangeSet)};const T=getRangeSet("");const C=getRangeSet(":dels");const[R,M]=I[y](S);getRangeSet(R.name||"").add(M);if(!R.isPrimaryKey)if("count"===y)C.add(w);else{const D="query"===y&&A&&S.values&&E.query({...S,values:false});return E[y].apply(this,arguments).then(m=>{if("query"===y){if(A&&S.values)return D.then(({result:y})=>{T.addKeys(y);return m});const w=S.values?m.result.map(O):m.result;if(S.values)T.addKeys(w);else C.addKeys(w)}else if("openCursor"===y){const x=m;const P=S.values;return x&&Object.create(x,{key:{get(){C.addKey(x.primaryKey);return x.key}},primaryKey:{get(){const y=x.primaryKey;C.addKey(y);return y}},value:{get(){P&&T.addKey(x.primaryKey);return x.value}}})}return m})}}return E[y].apply(this,arguments)}});return R}}}};function trackAffectedIndexes(y,m,w,x){function addAffectedIndex(m){const S=y(m.name||"");function extractKey(y){return null!=y?m.extractKey(y):null}const addKeyOrKeys=y=>m.multiEntry&&P(y)?y.forEach(y=>S.addKey(y)):S.addKey(y);(w||x).forEach((y,m)=>{const S=w&&extractKey(w[m]);const P=x&&extractKey(x[m]);if(0!==cmp(S,P)){if(null!=S)addKeyOrKeys(S);if(null!=P)addKeyOrKeys(P)}})}m.indexes.forEach(addAffectedIndex)}class th{constructor(y,m){this._middlewares={};this.verno=0;const w=th.dependencies;this._options=m={addons:th.addons,autoOpen:true,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,...m};this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange};const{addons:x}=m;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;const S={dbOpenError:null,isBeingOpened:false,onReadyBeingFired:null,openComplete:false,dbReadyResolve:nop,dbReadyPromise:null,cancelOpen:nop,openCanceller:null,autoSchema:true};S.dbReadyPromise=new DexiePromise(y=>{S.dbReadyResolve=y});S.openCanceller=new DexiePromise((y,m)=>{S.cancelOpen=m});this._state=S;this.name=y;this.on=Events(this,"populate","blocked","versionchange","close",{ready:[promisableChain,nop]});this.on.ready.subscribe=override(this.on.ready.subscribe,y=>{return(m,w)=>{th.vip(()=>{const x=this._state;if(x.openComplete){if(!x.dbOpenError)DexiePromise.resolve().then(m);if(w)y(m)}else if(x.onReadyBeingFired){x.onReadyBeingFired.push(m);if(w)y(m)}else{y(m);const S=this;if(!w)y(function unsubscribe(){S.on.ready.unsubscribe(m);S.on.ready.unsubscribe(unsubscribe)})}})}});this.Collection=createCollectionConstructor(this);this.Table=createTableConstructor(this);this.Transaction=createTransactionConstructor(this);this.Version=createVersionConstructor(this);this.WhereClause=createWhereClauseConstructor(this);this.on("versionchange",y=>{if(y.newVersion>0)console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`);else console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`);this.close()});this.on("blocked",y=>{if(!y.newVersion||y.newVersion<y.oldVersion)console.warn(`Dexie.delete('${this.name}') was blocked`);else console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${y.oldVersion/10}`)});this._maxKey=getMaxKey(m.IDBKeyRange);this._createTransaction=(y,m,w,x)=>new this.Transaction(y,m,w,this._options.chromeTransactionDurability,x);this._fireOnBlocked=y=>{this.on("blocked").fire(y);eQ.filter(y=>y.name===this.name&&y!==this&&!y._state.vcFired).map(m=>m.on("versionchange").fire(y))};this.use(ts);this.use(ta);this.use(tl);this.use(tu);this.vip=Object.create(this,{_vip:{value:true}});x.forEach(y=>y(this))}version(y){if(isNaN(y)||y<.1)throw new eu.Type("Given version is not a positive number");y=Math.round(10*y)/10;if(this.idbdb||this._state.isBeingOpened)throw new eu.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,y);const m=this._versions;var w=m.filter(m=>m._cfg.version===y)[0];if(w)return w;w=new this.Version(y);m.push(w);m.sort(lowerVersionFirst);w.stores({});this._state.autoSchema=false;return w}_whenReady(y){return this.idbdb&&(this._state.openComplete||eR.letThrough||this._vip)?y():new DexiePromise((y,m)=>{if(this._state.openComplete)return m(new eu.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){m(new eu.DatabaseClosed);return}this.open().catch(nop)}this._state.dbReadyPromise.then(y,m)}).then(y)}use({stack:y,create:m,level:w,name:x}){if(x)this.unuse({stack:y,name:x});const S=this._middlewares[y]||(this._middlewares[y]=[]);S.push({stack:y,create:m,level:null==w?10:w,name:x});S.sort((y,m)=>y.level-m.level);return this}unuse({stack:y,name:m,create:w}){if(y&&this._middlewares[y])this._middlewares[y]=this._middlewares[y].filter(y=>w?y.create!==w:!!m&&y.name!==m);return this}open(){return dexieOpen(this)}_close(){const y=this._state;const m=eQ.indexOf(this);if(m>=0)eQ.splice(m,1);if(this.idbdb){try{this.idbdb.close()}catch(w){}this._novip.idbdb=null}y.dbReadyPromise=new DexiePromise(m=>{y.dbReadyResolve=m});y.openCanceller=new DexiePromise((m,w)=>{y.cancelOpen=w})}close(){this._close();const y=this._state;this._options.autoOpen=false;y.dbOpenError=new eu.DatabaseClosed;if(y.isBeingOpened)y.cancelOpen(y.dbOpenError)}delete(){const y=arguments.length>0;const m=this._state;return new DexiePromise((w,x)=>{const doDelete=()=>{this.close();var y=this._deps.indexedDB.deleteDatabase(this.name);y.onsuccess=wrap(()=>{_onDatabaseDeleted(this._deps,this.name);w()});y.onerror=eventRejectHandler(x);y.onblocked=this._fireOnBlocked};if(y)throw new eu.InvalidArgument("Arguments not allowed in db.delete()");if(m.isBeingOpened)m.dbReadyPromise.then(doDelete);else doDelete()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const y=this._state.dbOpenError;return y&&"DatabaseClosed"===y.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return S(this._allTables).map(y=>this._allTables[y])}transaction(){const y=extractTransactionArgs.apply(this,arguments);return this._transaction.apply(this,y)}_transaction(y,m,w){let x=eR.trans;if(!x||x.db!==this||-1!==y.indexOf("!"))x=null;const S=-1!==y.indexOf("?");y=y.replace("!","").replace("?","");let P,E;try{E=m.map(y=>{var m=y instanceof this.Table?y.name:y;if("string"!=typeof m)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m});if("r"==y||y===e0)P=e0;else if("rw"==y||y==e1)P=e1;else throw new eu.InvalidArgument("Invalid transaction mode: "+y);if(x){if(x.mode===e0&&P===e1)if(S)x=null;else throw new eu.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");if(x)E.forEach(y=>{if(x&&-1===x.storeNames.indexOf(y))if(S)x=null;else throw new eu.SubTransaction("Table "+y+" not included in parent transaction.")});if(S&&x&&!x.active)x=null}}catch(T){return x?x._promise(null,(y,m)=>{m(T)}):eq(T)}const C=enterTransactionScope.bind(null,this,P,E,x,w);return x?x._promise(P,C,"lock"):eR.trans?usePSD(eR.transless,()=>this._whenReady(C)):this._whenReady(C)}table(y){if(!hasOwn(this._allTables,y))throw new eu.InvalidTable(`Table ${y} does not exist`);return this._allTables[y]}}const td="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol["observable"]:"@@observable";class tf{constructor(y){this._subscribe=y}subscribe(y,m,w){return this._subscribe(y&&"function"!=typeof y?y:{next:y,error:m,complete:w})}[td](){return this}}function extendObservabilitySet(y,m){S(m).forEach(w=>{const x=y[w]||(y[w]=new RangeSet);mergeRanges(x,m[w])});return y}function liveQuery(y){return new tf(m=>{const w=V(y);function execute(m){if(w)incrementExpectedAwaits();const exec=()=>newScope(y,{subscr:m,trans:null});const x=eR.trans?usePSD(eR.transless,exec):exec();if(w)x.then(decrementExpectedAwaits,decrementExpectedAwaits);return x}let x=false;let P={};let E={};const T={get closed(){return x},unsubscribe:()=>{x=true;te.storagemutated.unsubscribe(mutationListener)}};m.start&&m.start(T);let C=false,O=false;function shouldNotify(){return S(E).some(y=>P[y]&&rangesOverlap(P[y],E[y]))}const mutationListener=y=>{extendObservabilitySet(P,y);if(shouldNotify())doQuery()};const doQuery=()=>{if(C||x)return;P={};const y={};const w=execute(y);if(!O){te(e9,mutationListener);O=true}C=true;Promise.resolve(w).then(w=>{C=false;if(x)return;if(shouldNotify())doQuery();else{P={};E=y;m.next&&m.next(w)}},y=>{C=false;m.error&&m.error(y);T.unsubscribe()})};doQuery();return T})}const tp=th;props(tp,{...eh,delete(y){const m=new tp(y,{addons:[]});return m.delete()},exists(y){return new tp(y,{addons:[]}).open().then(y=>{y.close();return true}).catch("NoSuchDatabaseError",()=>false)},getDatabaseNames(y){try{return getDatabaseNames(tp.dependencies).then(y)}catch(m){return eq(new eu.MissingAPI)}},defineClass(){function Class(y){extend(this,y)}return Class},ignoreTransaction(y){return eR.trans?usePSD(eR.transless,y):y()},vip,async:function(y){return function(){try{var m=awaitIterator(y.apply(this,arguments));if(!m||"function"!=typeof m.then)return DexiePromise.resolve(m);return m}catch(w){return eq(w)}}},spawn:function(y,m,w){try{var x=awaitIterator(y.apply(w,m||[]));if(!x||"function"!=typeof x.then)return DexiePromise.resolve(x);return x}catch(S){return eq(S)}},currentTransaction:{get:()=>eR.trans||null},waitFor:function(y,m){const w=DexiePromise.resolve("function"==typeof y?tp.ignoreTransaction(y):y).timeout(m||6e4);return eR.trans?eR.trans.waitFor(w):w},Promise:DexiePromise,debug:{get:()=>et,set:y=>{setDebug(y,"dexie"===y?()=>true:dexieStackFrameFilter)}},derive:derive,extend:extend,props:props,override:override,Events:Events,on:te,liveQuery,extendObservabilitySet,getByKeyPath:getByKeyPath,setByKeyPath:setByKeyPath,delByKeyPath:delByKeyPath,shallowClone:shallowClone,deepClone:deepClone,getObjectDiff:getObjectDiff,asap:asap$1,minKey:eV,addons:[],connections:eQ,errnames:ea,dependencies:e2,semVer:eU,version:eU.split(".").map(y=>parseInt(y)).reduce((y,m,w)=>y+m/Math.pow(10,2*w))});tp.maxKey=getMaxKey(tp.dependencies.IDBKeyRange);if("undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener){te(e9,y=>{if(!tg){let m;if(eZ){m=document.createEvent("CustomEvent");m.initCustomEvent(e7,true,true,y)}else m=new CustomEvent(e7,{detail:y});tg=true;dispatchEvent(m);tg=false}});addEventListener(e7,({detail:y})=>{if(!tg)propagateLocally(y)})}function propagateLocally(y){let m=tg;try{tg=true;te.storagemutated.fire(y)}finally{tg=m}}let tg=false;if("undefined"!=typeof BroadcastChannel){const tv=new BroadcastChannel(e7);te(e9,y=>{if(!tg)tv.postMessage(y)});tv.onmessage=y=>{if(y.data)propagateLocally(y.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){te(e9,y=>{try{if(!tg){if("undefined"!=typeof localStorage)localStorage.setItem(e7,JSON.stringify({trig:Math.random(),changedParts:y}));if("object"==typeof self["clients"])[...self["clients"].matchAll({includeUncontrolled:true})].forEach(m=>m.postMessage({type:e7,changedParts:y}))}}catch(m){}});addEventListener("storage",y=>{if(y.key===e7){const m=JSON.parse(y.newValue);if(m)propagateLocally(m.changedParts)}});const ty=self.document&&navigator.serviceWorker;if(ty)ty.addEventListener("message",propagateMessageLocally)}function propagateMessageLocally({data:y}){if(y&&y.type===e7)propagateLocally(y.changedParts)}DexiePromise.rejectionMapper=mapError;setDebug(et,dexieStackFrameFilter);const tm=th},81904:(y,m,w)=>{"use strict";w.d(m,{Z:()=>pRetry});var x=w(33426);const S=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed"]);class P extends Error{constructor(y){super();if(y instanceof Error){this.originalError=y;({message:y}=y)}else{this.originalError=new Error(y);this.originalError.stack=this.stack}this.name="AbortError";this.message=y}}const decorateErrorWithCounts=(y,m,w)=>{const x=w.retries-(m-1);y.attemptNumber=m;y.retriesLeft=x;return y};const isNetworkError=y=>S.has(y);const getDOMException=y=>void 0===globalThis.DOMException?new Error(y):new DOMException(y);async function pRetry(y,m){return new Promise((w,S)=>{m={onFailedAttempt(){},retries:10,...m};const E=x.operation(m);E.attempt(async x=>{try{w(await y(x))}catch(C){if(!(C instanceof Error)){S(new TypeError(`Non-error was thrown: "${C}". You should only throw errors.`));return}if(C instanceof P){E.stop();S(C.originalError)}else if(C instanceof TypeError&&!isNetworkError(C.message)){E.stop();S(C)}else{decorateErrorWithCounts(C,x,m);try{await m.onFailedAttempt(C)}catch(T){S(T);return}if(!E.retry(C))S(E.mainError())}}});if(m.signal&&!m.signal.aborted)m.signal.addEventListener("abort",()=>{E.stop();const y=void 0===m.signal.reason?getDOMException("The operation was aborted."):m.signal.reason;S(y instanceof Error?y:getDOMException(y))},{once:true})})}}}]);